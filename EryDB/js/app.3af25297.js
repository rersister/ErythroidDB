(function(e){function t(t){for(var n,o,s=t[0],l=t[1],c=t[2],u=0,h=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);p&&p(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var s=a[o];0!==i[s]&&(n=!1)}n&&(r.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},o={app:0},i={app:0},r=[];function s(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-12502414":"a16efe08","chunk-16c4f9e9":"2a3d70ae","chunk-2d0b2cda":"3eb9d9b5","chunk-3597c03e":"77a3c725","chunk-47b34872":"7eacc992","chunk-49d26aee":"9a824a38","chunk-5b7d44c6":"473d5d33","chunk-64f02f4e":"1b5da830","chunk-8b7d4c3a":"353b6aad","chunk-9098ce2e":"5595cc90","chunk-b455608e":"6c58d400","chunk-c587d42c":"50ad7df9","chunk-e9c019d2":"1afb05cd","chunk-f75d2cbc":"9456fca0"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-12502414":1,"chunk-16c4f9e9":1,"chunk-3597c03e":1,"chunk-49d26aee":1,"chunk-5b7d44c6":1,"chunk-64f02f4e":1,"chunk-8b7d4c3a":1,"chunk-9098ce2e":1,"chunk-c587d42c":1,"chunk-e9c019d2":1,"chunk-f75d2cbc":1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-12502414":"fcd3fd9f","chunk-16c4f9e9":"c799e2ff","chunk-2d0b2cda":"31d6cfe0","chunk-3597c03e":"0dc416de","chunk-47b34872":"31d6cfe0","chunk-49d26aee":"5d611edb","chunk-5b7d44c6":"1a3cab10","chunk-64f02f4e":"d305e714","chunk-8b7d4c3a":"e2aa9ee6","chunk-9098ce2e":"0dc416de","chunk-b455608e":"31d6cfe0","chunk-c587d42c":"0dc416de","chunk-e9c019d2":"bf92aef8","chunk-f75d2cbc":"fbf09132"}[e]+".css",i=l.p+n,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var c=r[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===n||u===i))return t()}var h=document.getElementsByTagName("style");for(s=0;s<h.length;s++){c=h[s],u=c.getAttribute("data-href");if(u===n||u===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||i,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete o[e],p.parentNode.removeChild(p),a(r)},p.href=i;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){o[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,a){n=i[e]=[t,a]}));t.push(n[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=s(e);var h=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var a=i[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",h.name="ChunkLoadError",h.type=n,h.request=o,a[1](h)}i[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/EryDB/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var p=u;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"00b3":function(e,t,a){},"02f5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"wrap"}},[a("div",{staticClass:"row viz_title",attrs:{id:"clustergram_title"}},[e._v(" Clustergrammer ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"clustergrammer_container",attrs:{id:"container-id-1"}},[a("div",{staticClass:"wait_message"},[e._v("Please wait ...")])])]),a("div",{staticClass:"row viz_description",attrs:{id:"clustergram_desc"}},[a("p",[e._v("Above is a clustergram/heatmap visualization of your input matrix. The rows and columns have been hierarchically clustered, using the Scipy library in Python, using cosine distance and average linkage. Red/blue cells in the matrix represent positive/negative values in your matrix. The visualization interactive (zoomable, reorderable, filterable) and shareable - the current URL is permanent and shareable.")])])])}],i=(a("d3b7"),a("25f0"),a("ddb9"),{name:"ClustGram",data:function(){return{spinShow1:!0,series:this.$store.state.app.CurrentPageToken}},methods:{make_clust:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){make_clust(e),this.spinShow1=!1}))},mounted:function(){var e=this.series+"_expreDiff_TPM_log2_view.json";this.make_clust(e)},watch:{$route:"getParams"}}),r=i,s=(a("7951"),a("2877")),l=Object(s["a"])(r,n,o,!1,null,null,null);t["default"]=l.exports},"0337":function(e,t,a){"use strict";a("38f0")},"0672":function(e,t,a){e.exports=a.p+"img/help_scInter.a54f7ce1.png"},"06fb":function(e,t,a){e.exports=a.p+"img/help_scCommuNetP.42731b75.png"},"080f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("br"),a("h1",{staticClass:"my_h1"},[e._v("Visualization")]),a("br"),a("div",{staticStyle:{background:"white"}},[a("Row",{attrs:{gutter:0}},[a("Col",{attrs:{span:"16"}},[e.spinShow1?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("Plotly",{attrs:{data:e.TSNE_data,layout:e.TSNE_layout,options:e.TSNE_options}})],1),a("Col",{attrs:{span:"6"}},[a("i-form",{staticStyle:{"margin-top":"60px"},attrs:{"label-width":120}},[a("Form-item",{attrs:{label:"Plot size: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Select",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedPlotSize},model:{value:e.plotSize,callback:function(t){e.plotSize=t},expression:"plotSize"}},e._l(e.plotSize_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"View by: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Select",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedViewMethod},model:{value:e.if3D,callback:function(t){e.if3D=t},expression:"if3D"}},e._l(e.viewMethod_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Visual method: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Select view method",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedVisaulMethod},model:{value:e.VisaulMethod,callback:function(t){e.VisaulMethod=t},expression:"VisaulMethod"}},e._l(e.VisaulMethod_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedSource},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Sample: "}},[a("i-select",{attrs:{model:e.showBySample,clearable:"",placeholder:"Pleace select sample",filterable:""},on:{"update:model":function(t){e.showBySample=t},"on-change":e.changedShowSample},model:{value:e.sample,callback:function(t){e.sample=t},expression:"sample"}},e._l(e.group_sample_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Color by: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedGroup},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.group_type_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1)],1),a("br"),a("h1",{staticClass:"my_h1"},[e._v("Feature Plot")]),a("br"),a("div",{staticStyle:{background:"white"}},[a("Row",{attrs:{gutter:0}},[a("Col",{attrs:{span:"16"}},[e.spinShow2?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{data:e.Feature_data,layout:e.Feature_layout,options:e.Feature_options}})],1),a("Col",{attrs:{span:"6"}},[a("i-form",{staticStyle:{"margin-top":"60px"},attrs:{"label-width":120}},[a("Form-item",{attrs:{label:"Plot size: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Select",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedPlotSize2},model:{value:e.plotSize2,callback:function(t){e.plotSize2=t},expression:"plotSize2"}},e._l(e.plotSize_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedShowGroup2},model:{value:e.source2,callback:function(t){e.source2=t},expression:"source2"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Sample: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"on-change":e.changedShowSample2},model:{value:e.sample2,callback:function(t){e.sample2=t},expression:"sample2"}},e._l(e.group_sample_list2,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Feature name: "}},[a("i-select",{staticStyle:{width:"120%"},attrs:{"enter-button":"Search",placeholder:"Please input gene symbol",filterable:""},on:{"on-search":function(t){return e.getFeatureByName(t)},"on-change":function(t){return e.getFeatureByName(t)}},model:{value:e.feature_name,callback:function(t){e.feature_name=t},expression:"feature_name"}},e._l(e.keyWords_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1)],1)])},o=[],i=(a("b0c0"),a("d3b7"),a("159b"),a("43e0")),r=a.n(i),s=a("04d1"),l=a("6c9c"),c=a("39b2"),u={name:"allScPlotTSNE",components:{VuePlotly:r.a,Plotly:s["Plotly"]},props:{selectList:{type:Array,default:function(){return[]}}},data:function(){return{keyWords_list:[],orga:"",sequ_type:"",showBySample:"",table_name:"",spinShow1:"true",spinShow2:"true",sourceGroup:"",TSNE_data:[],TSNE_layout:{},contrasts_group:[],TSNE_options:{responsive:!0},Feature_data:[],Feature_layout:{},Feature_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_all_feature",height:500,width:700,scale:1}},showByGroup:"",series:"",source:"",source2:"",if3D:"",VisaulMethod:"UMAP",group_type_list:[{id:"0",name:"Original identity",value:"orig.ident"},{id:"1",name:"Cell type",value:"celltype"},{id:"2",name:"Phase",value:"Phase"}],group:"",data_source_list:[],data_source_listF:[],group_sample_list:[],group_sample_list2:[],sample:"",sample2:"",viewMethod_list:[{name:"2D"},{name:"3D"}],plotSize_list:[{name:"2"},{name:"4"},{name:"6"},{name:"8"},{name:"10"}],plotSize:"4",plotSize2:"4",VisaulMethod_list:[{name:"PCA"},{name:"tSNE"},{name:"UMAP"}],colnames:[],feature_name:""}},watch:{selectList:{handler:function(e){var t="all_"+e[0].orga+"_ep_"+e[0].sequnceType;this.table_name=t,t.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),t.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),"dr"==e[0].orga&&(this.orga_name="Danio rerio"),"hs"==e[0].orga&&(this.orga_name="Homo sapiens"),"mm"==e[0].orga&&(this.orga_name="Mus musculus")},immediate:!0}},methods:{getAllscFeatureSplitCell:function(e,t){var a=this;Object(c["b"])(e,t).then((function(e){var t=e.data.keywords;a.feature_name=t[0].name,a.keyWords_list=t}))},getFeatureByName:function(e){this.feature_name=e,this.getFeaturePlot(this.table_name,this.source2,this.sample2,e)},getFeaturePlot:function(e,t,a,n){var o=this,i=this;i.spinShow2=!0,console.log(this.table_name),console.log(n),""!=t?Object(l["o"])(e,t,a,n).then((function(e){var a=e.data;console.log("getFeaturePlotData"),console.log(a);var n=a.featurename;o.searchVivoGene=n,o.feature_name=n;var r=a.x_list,s=a.y_list,l=a.feature_list,c=a.iftsne,u={mode:"markers",type:"scatter",y:s,x:r,marker:{size:o.plotSize2,color:l,colorscale:"Viridis",colorbar:{thickness:20}}};o.Feature_data=[],o.Feature_data.push(u);var h="UMAP 1",p="UMAP 2";!0===c&&(h="tSNE 1",p="tSNE 2");var d={title:o.searchVivoGene+" expression level (Organism: "+o.orga_name+"; Group: "+t+")",xaxis:{title:h},yaxis:{title:p},legend:{y:.5,yref:"paper",font:{family:"Arial, sans-serif",size:20,color:"grey"}}};o.Feature_layout=d,i.spinShow2=!1})):this.$Message.info("please select data source",10)},getTsneChart:function(e,t,a,n,o,i){var r=this,s=this;s.spinShow1=!0,console.log(this.table_name),Object(l["C"])(e,t,a,n,o,i).then((function(e){var a=e.data;console.log(a);var n=a.xData,o=a.yData,i=a.gData,l=a.signal;if("no"===l)return r.$Message.info("this visual is temporary not available,please try other visual method",50),void(s.spinShow1=!1);if("PCA"===r.VisaulMethod)var c="PC_1",u="PC_2",h="PC_3",p="PCA";if("UMAP"===r.VisaulMethod)c="UMAP_1",u="UMAP_2",h="UMAP_3",p="UMAP";if("tSNE"===r.VisaulMethod)c="tSNE_1",u="tSNE_2",h="tSNE_3",p="tSNE";if("3D"==r.if3D){for(var d=a.zData,m=[],g=0;g<n.length;g++){var f={x:n[g],y:o[g],z:d[g],mode:"markers",type:"scatter3d",name:i[g],marker:{size:r.plotSize}};m.push(f)}r.TSNE_data=m;var _={title:p+"\tplot (Organism: "+r.orga_name+"; Group: "+t+")",scene:{xaxis:{title:c},yaxis:{title:u},zaxis:{title:h}},margin:{l:50,r:50,b:50,t:50}};r.TSNE_layout=_,s.spinShow1=!1}else{var v=[];for(g=0;g<n.length;g++){f={x:n[g],y:o[g],mode:"markers",type:"scatter",name:i[g],marker:{size:r.plotSize}};v.push(f)}r.TSNE_data=v;_={title:p+"\tplot (Organism: "+r.orga_name+"; Group: "+t+")",xaxis:{title:c},yaxis:{title:u}};r.TSNE_layout=_,s.spinShow1=!1}}))},getTsneCol:function(e,t){var a=this,n=this;Object(l["D"])(e,t).then((function(e){var t=e.data;console.log(t),n.colnames=t,a.group_type_list=[],t.forEach((function(e){return a.group_type_list.push({name:e})}))}))},changedSource:function(e){this.source=e,this.getGroupSampleData(this.table_name,e),this.getTsneShow()},changedViewMethod:function(e){this.if3D=e,this.getTsneShow()},changedPlotSize:function(e){this.plotSize=e,this.getTsneShow()},changedPlotSize2:function(e){this.plotSize2=e,this.getFeaturePlot(this.table_name,this.source2,this.feature_name)},changedVisaulMethod:function(e){this.VisaulMethod=e,this.getTsneShow()},changedShowGroup2:function(e){this.source2=e,this.getGroupSampleData2(this.table_name,e),this.getFeaturePlot(this.table_name,this.source2,this.sample2,this.feature_name)},changedGroup:function(e){console.log(e),this.group=e,this.getTsneShow()},getTsneShow:function(){this.getTsneChart(this.table_name,this.source,this.sample,this.group,this.if3D,this.VisaulMethod)},changedShowSample:function(e){var t=this;t.sample=e,this.getTsneShow()},changedShowSample2:function(e){var t=this;t.sample2=e,this.getFeaturePlot(this.table_name,this.source2,e,this.feature_name)},getGroupSampleData:function(e,t){var a=this;a.sample="All",a.group_sample_list=[],a.group_sample_list.push({name:"All"}),Object(l["p"])(e,t).then((function(e){var t=e.data;console.log(),console.log(t),t.forEach((function(e){a.group_sample_list.push({name:e.sample})}))}))},getGroupSampleData2:function(e,t){var a=this;a.sample2="All",a.group_sample_list2=[],a.group_sample_list2.push({name:"All"}),Object(l["p"])(e,t).then((function(e){var t=e.data;console.log(),console.log(t),t.forEach((function(e){a.group_sample_list2.push({name:e.sample})}))}))},getDataSourceList:function(e){var t=this;Object(l["E"])(e).then((function(a){var n=t,o=a.data;console.log(),console.log(o);var i=o;o.forEach((function(e){n.data_source_list.push({name:e.source_g})})),o.forEach((function(e){"yes"===e.if_anal&&(console.log(e.source_g),n.data_source_listF.push({name:e.source_g}))})),t.source=i[0].source_g,t.getGroupSampleData(t.table_name,t.source),t.getGroupSampleData2(t.table_name,t.source),t.if3D="2D",t.VisaulMethod="UMAP",t.group="celltype",t.getTsneChart(e,i[0].source_g,t.sample,"celltype","2D","UMAP"),t.source2=i[0].source_g,t.getAllscFeatureSplitCell(e,o[0].source_g),t.getFeaturePlot(e,o[0].source_g,t.sample2,"needFind")}))}},mounted:function(){this.table_name;this.getDataSourceList(this.table_name)}},h=u,p=a("2877"),d=Object(p["a"])(h,n,o,!1,null,null,null);t["default"]=d.exports},"0b5e":function(e,t,a){e.exports=a.p+"img/help_homeCompounds.67cd9c4c.png"},"0d16":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r}));var n=a("66df"),o=function(e){return n["a"].request({url:"public/getDatasetExperiType",data:{dataset_serid:e},method:"post"})},i=function(e){return n["a"].request({url:"public/getDatasetSequenceType",data:{dataset_serid:e},method:"post"})},r=function(e){return n["a"].request({url:"public/getDatasetGeneKeyWords",data:{dataset_serid:e},method:"post"})}},"0dba":function(e,t,a){e.exports=a.p+"img/help_eryAtlas.77d017aa.png"},1:function(e,t){},"118f":function(e,t,a){e.exports=a.p+"img/help_eryAtlaCellAnno.a90b571f.png"},1378:function(e,t,a){"use strict";a("00b3")},"14d8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my_out"},[a("body",{staticClass:"my_body"},[a("div",{staticClass:"my_Row"},[a("div",{staticClass:"my_col"},[a("Br"),a("div",[a("h4",[e._v("Choose cell type:")]),a("i-select",{attrs:{clearable:"",placeholder:"Pleace select cell type",filterable:""},on:{"on-change":e.changedCellType}},e._l(e.celltype_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.full_name))])})),1)],1),a("Br"),a("div",[a("h4",[e._v("Choose reported gene:")]),a("i-select",{attrs:{clearable:"",placeholder:"Pleace select reported gene",filterable:""},on:{"on-change":e.changedReportedGene},model:{value:e.searchGene,callback:function(t){e.searchGene=t},expression:"searchGene"}},e._l(e.reportedGene_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Br"),a("div",[a("h4",[e._v("Choose compound type:")]),a("i-select",{attrs:{clearable:"",placeholder:"Pleace select compound type",filterable:""},on:{"on-change":e.changedComppoundType}},e._l(e.compound_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Br"),a("div",[a("h4",[e._v("Choose disease type:")]),a("i-select",{attrs:{clearable:"",placeholder:"Pleace select disease type",filterable:""},on:{"on-change":e.changedDiseaseType}},e._l(e.disease_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Br"),a("div",[a("h4",[e._v("Choose species:")]),a("i-select",{staticStyle:{"font-style":"italic"},attrs:{clearable:"",placeholder:"Pleace select species",filterable:""},on:{"on-change":e.changedSpecies},model:{value:e.searchSpecies,callback:function(t){e.searchSpecies=t},expression:"searchSpecies"}},e._l(e.species_list,(function(t,n){return a("i-option",{key:n,staticStyle:{"font-style":"italic"},attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Br"),a("div",[a("h4",[e._v("Choose tissue:")]),a("i-select",{attrs:{clearable:"",placeholder:"Pleace select tissue",filterable:""},on:{"on-change":e.changedTissue},model:{value:e.searchTissue,callback:function(t){e.searchTissue=t},expression:"searchTissue"}},e._l(e.tissue_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Br"),a("div",[a("h4",[e._v("Choose experiment type:")]),a("i-select",{staticStyle:{"font-style":"italic"},attrs:{clearable:"",placeholder:"Pleace select experiment type",filterable:""},on:{"on-change":e.changedGrowthMode}},e._l(e.growth_mode_list,(function(t,n){return a("i-option",{key:n,staticStyle:{"font-style":"italic"},attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Br"),a("div",[a("h4",[e._v("Choose omics type:")]),a("i-select",{attrs:{clearable:"",placeholder:"Pleace select sequence type",filterable:""},on:{"on-change":e.changedSequenceType}},e._l(e.sequenceType_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("div",{staticClass:"my_colRight"},[a("div",[a("Table",{ref:"table",staticClass:"my_hover",attrs:{id:"mytable",stripe:"",data:e.datasetsTypeSource,columns:e.tAdatasetTypeSourceColumns},on:{"on-row-click":e.intoDataSet}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.totalTypeSource,current:e.currentPageTypeSource,"page-size":e.pageSizeTypeSource,"show-total":"","show-sizer":""},on:{"on-change":e.handleCurrentChangeTypeSource,"on-page-size-change":e.handleSizeChangeTypeSource}})],1)]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){return e.exportData(1)}}},[a("Icon",{attrs:{type:"ios-download-outline"}}),e._v("Download")],1)],1)])])]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")])},o=[],i=a("5530"),r=(a("d3b7"),a("159b"),a("ac1f"),a("5319"),a("4de4"),a("b0c0"),a("a18c")),s=(a("ddb9"),a("2f62")),l=a("64a5"),c=a("de34"),u=a("2644"),h=a("39b2"),p={0:{value:"1-10",name:"1-10"},1:{value:"10-20",name:"10-20"},2:{value:"20-30",name:"20-30"},3:{value:"30-50",name:"30-50"},4:{value:">50",name:">50"},5:{value:"all",name:"All"}},d={0:{value:"1-1000",name:"1-1,000"},1:{value:"1000-10000",name:"1,000-10,000"},3:{value:"10000-20000",name:"10,000-20,000"},4:{value:">10000",name:">10,000"},5:{value:"all",name:"All"}},m={0:{value:"Homo",name:"Homo sapiens"},1:{value:"Mus",name:"Mus musculus"},2:{value:"Danio",name:"Danio rerio"},3:{value:"all",name:"All"}},g={0:{value:"Marrow",name:"Bone Marrow"},1:{value:"Cord",name:"Cord Blood"},2:{value:"Peripheral",name:"Peripheral Blood"},3:{value:"Spleen",name:"Spleen"},4:{value:"Line",name:"Cell Line"},5:{value:"Embryo",name:"Embryo"},6:{value:"Embryonic ",name:"Fetus Tissue "},7:{value:"Pluripotent",name:"Induced Pluripotent Stem Cells)"},8:{value:"Heart",name:"Heart"},9:{value:"Kidney",name:"Kidney"},10:{value:"other",name:"Other"},11:{value:"all",name:"All"}},f={0:{value:"vitro",name:"In vitro"},1:{value:"vivo",name:"In vivo"},3:{value:"all",name:"All"}},v={0:{name:"Bulk RNA-seq",value:"Bulk"},1:{name:"scRNA-seq",value:"scRNA"},2:{value:"all",name:"All"}},b={name:"App",components:{HeaderBar:l["a"],Header:c["a"],FilterTableForAllDateSet:u["a"]},data:function(){return{values:[{id:1,name:"Home",link:"/",type:"ios-home"},{id:0,name:"Search",link:"/Search",type:"ios-search"},{id:2,name:"Erythroid Atlas",link:"/Erythroid_Atlas",type:"ios-analytics"},{id:3,name:"Help",link:"/help",type:"ios-paper"},{id:4,name:"About",link:"/about",type:"ios-navigate"}],search:"",searchGene:"",table_name:"all_dataset_source_type",pageSizeTypeSource:10,totalTypeSource:400,currentPage:1,currentPageTypeSource:1,current_index:-1,search_placeholder:"",datasetsTypeSource:[],tAdatasetTypeSourceColumns:[{title:"Dataset ID",key:"EryID",filter:{type:"Input"},width:"140",fixed:"left"},{title:"Species",key:"organism",width:"130",filter:{type:"Select",option:m},className:"table_Orga"},{title:"Tissue",key:"source",filter:{type:"Select",option:g}},{title:"Experiment type",key:"growth_mode",width:"120",filter:{type:"Select",option:f},className:"table_Orga"},{title:"Title",key:"title",filter:{type:"Input"}},{title:"Omics type",key:"sequence_type",width:"125",filter:{type:"Select",option:v}},{title:"Sample number",key:"sample_number",width:"90",filter:{type:"Select",option:p}},{title:"Cell number",key:"cell_number",width:"90",filter:{type:"Select",option:d}}],cell_type:"",celltype_list:[{name:"HSC",full_name:"Hematopoietic Stem Cell",cell_ano:"Hematopoietic stem cells (HSCs) are a rare population of cells residing in the bone marrow (BM) and continuously replenish all mature blood cells throughout the life span."},{name:"MPP",full_name:"Multipotent Progenitor Cell",cell_ano:"Multipotent progenitor cell is generated from HSC and has the ability of self-renewing and differentiation into all blood cell forms."},{name:"CMP",full_name:"Common Myeloid Progenitor",cell_ano:"Common myeloid progenitors give rise to either megakaryocyte/erythrocyte or granulocyte/macrophage progenitors. "},{name:"MEP",full_name:"Megakaryocyte-Erythroid Progenitor",cell_ano:"Megakaryocyte/erythroid progenitors (MEPs) are bipotent cells that undergo a fate decision to become either megakaryocytes (Mk) or erythroid (E) cells."},{name:"BFU-E",full_name:"Burst-Forming Unit-Erythroid",cell_ano:"BFU-E Burst forming unit-erythroid, the earliest known erythroid precursor cell that eventually differentiates into erythrocytes. Produces a colony containing greater than 200 erythroblasts in a hematopoietic colony assay."},{name:"CFU-E",full_name:"Colony-Forming Unit-Erythroid",cell_ano:"A CFU-E cell, which has a lesser proliferative capacity than a BFU-E cell, requires the presence of erythropoietin as a stimulatory factor. "},{name:"Pro-E",full_name:"Proerythroblast",cell_ano:"The proerythroblast is a large cell with deep blue cytoplasm, high nucleus-to-cytoplasm ratio, and prominent nucleoli. Subsequent to proerythroblasts, nucleoli are no longer seen."},{name:"BasoE",full_name:"Basophilic Erythroblast",cell_ano:"Basophilic erythroblast is a nucleated precursor in the erythrocytic series, preceding the polychromatophilic erythroblast and following the proerythroblast; the cytoplasm is basophilic, the nucleus is large with clumped chromatin, and the nucleoli have disappeared. It is also called basophilic normoblast."},{name:"Poly-E",full_name:"Polychromatophilic Erythroblast",cell_ano:"The nucleus is intensely heterochromatic, and the cytoplasm is now a characteristic lilac color. The basophilia is due to the cytoplasmic ribosomes, and the acidophilia is due to the increase in the amount of hemoglobin being synthesized by the ribosomes. This is the last stage during which cell division occurs."},{name:"Ortho-E",full_name:"Orthochromatic Erythroblast",cell_ano:"In an orthochromatic erythroblast, the nucleus has shrunk and become darker and the growing concentration of hemoglobin turns the cytoplasm pink. "},{name:"Retic",full_name:"Reticulocyte",cell_ano:"Reticulocytes are immature red blood cells that detect if your bone marrow is forming enough red blood cells"},{name:"RBC",full_name:"Red Blood Cell",cell_ano:"Red blood cell, also called erythrocyte, cellular component of blood, millions of which in the circulation of vertebrates give the blood its characteristic color and carry oxygen from the lungs to the tissues. The mature human red blood cell is small, round, and biconcave; it appears dumbbell-shaped in profile. "}],reported_gene:"",reportedGene_list:[],compound_n:"",compound_list:[{name:"TRβ agonists",full_name:"Thyroid hormone receptor(TRβ)  agonists",cell_ano:""},{name:"ERBB inhibitors",full_name:"Epidermal growth factor receptor inhibitors",cell_ano:""},{name:"Iron",full_name:"Iron",cell_ano:" "},{name:"IDH2 inhibitors",full_name:"Isocitrate dehydrogenase 2(IDH2) mutant-specific inhibitors",cell_ano:""},{name:"BET bromodomain inhibitors",full_name:"BET bromodomain inhibitors",cell_ano:""},{name:"PPAR-α agonists",full_name:"Peroxisome proliferator-activated receptor α(PPAR-α) agonists",cell_ano:""},{name:"HbF inducers",full_name:"Heterogeneity of fetal hemoglobin (HbF) activation",cell_ano:""},{name:"Erythropoietin",full_name:"Erythropoietin",cell_ano:""},{name:"Corticosteroids",full_name:"Corticosteroids",cell_ano:""}],disease_n:"",disease_list:[{name:"Fanconi anemia",full_name:"Fanconi anemia",cell_ano:""},{name:"Diamond-Blackfan anemia",full_name:"Diamond-Blackfan anemia",cell_ano:""},{name:"Epo-resistant anemia",full_name:"Epo-resistant anemia",cell_ano:" "},{name:"Aplastic anemia",full_name:"Aplastic anemia",cell_ano:" "},{name:"Hemoglobinopathies",full_name:"Hemoglobinopathies",cell_ano:""}],species:"",searchSpecies:"",species_list:[{value:"Homo",name:"Homo sapiens"},{value:"Mus",name:"Mus musculus"},{value:"Danio",name:"Danio rerio"}],tissue:"",searchTissue:"",tissue_list:[{value:"Marrow",name:"Bone Marrow"},{value:"Cord",name:"Cord Blood"},{value:"Peripheral",name:"Peripheral Blood"},{value:"Spleen",name:"Spleen"},{value:"Line",name:"Cell Line"},{value:"Embryo",name:"Embryo"},{value:"Embryonic",name:"Fetus Tissue "},{value:"Pluripotent",name:"Induced Pluripotent Stem Cells"},{value:"Heart",name:"Heart"},{value:"Kidney",name:"Kidney"},{value:"other",name:"Other"}],growth_mode:"",growth_mode_list:[{value:"vitro",name:"In vitro"},{value:"vivo",name:"In vivo"}],development:"",development_list:[{value:"BM_vitro",name:"BM_vitro"},{value:"CL_vitro",name:"CL_vitro"},{value:"EMFL_vitro",name:"EMFL_vitro"},{value:"PB_vitro",name:"PB_vitro"},{value:"EM_vitro",name:"EM_vitro"},{value:"CB_vitro",name:"CB_vitro"},{value:"SP_vitro",name:"SP_vitro"},{value:"iPSC_vitro",name:"iPSC_vitro"},{value:"BM_vivo",name:"BM_vivo"},{value:"CB_vivo",name:"CB_vivo"},{value:"PB_vivo",name:"PB_vivo"},{value:"CP_vivo",name:"CP_vivo"},{value:"EMFL_vivo",name:"EMFL_vivo"},{value:"EM_vivo",name:"EM_vivo"},{value:"SP_vivo",name:"SP_vivo"},{value:"EMYS_vivo",name:"EMYS_vivo"},{value:"EMCH_vivo",name:"EMCH_vivo"}],sequence:"",sequenceType_list:[{name:"Bulk RNA-seq",value:"Bulk"},{name:"scRNA-seq",value:"scRNA"}]}},computed:{},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["setCurrentPageToken"])),{},{handleCurrentChangeTypeSource:function(e){var t=this;t.currentPageTypeSource=e,this.getDatasetByMultiInput()},handleSizeChangeTypeSource:function(e){var t=this;t.pageSizeTypeSource=e,this.getDatasetByMultiInput()},intoDataSet:function(e,t,a){this.type||(this.setCurrentPageToken(e.dataset_id),r["a"].push({name:"Dataset_detail",params:{dataset:e.dataset_id}}))},exportData:function(e){if(1===e){this.$refs.table.exportCsv({filename:"dataset_eryDB",original:!0,columns:this.tAdatasetTypeSourceColumns,data:_.forEach(this.datasetsTypeSource,(function(e){var t=[];for(var a in e)"string"==typeof e[a]&&(e[a]='"'+e[a].replace(/"/g,'""')+'"');return t.push(e),t}))})}else 2===e?this.$refs.table.exportCsv({filename:"排序和过滤后的数据",original:!1}):3===e&&this.$refs.table.exportCsv({filename:"自定义数据",columns:this.columns8.filter((function(e,t){return t<4})),data:this.data7.filter((function(e,t){return t<4}))})},searchItemByName:function(){},mockTableDataTypeSource:function(){var e=this;Object(h["j"])(e.table_name,e.currentPageTypeSource,e.pageSizeTypeSource).then((function(t){var a=t.data;e.datasetsTypeSource=a.list,e.totalTypeSource=a.total}))},mockTableDataByKeyParam:function(e){var t=this;Object(h["f"])(t.table_name,t.currentPageTypeSource,t.pageSizeTypeSource,e).then((function(e){var a=e.data;t.datasetsTypeSource=a.list,t.totalTypeSource=a.total}))},getDatasetByMultiInput:function(){var e=this,t=[];t.push({cell_type:this.cell_type,gene:this.reported_gene,molecules_type:this.compound_n,disease:this.disease_n,organism:this.species,source:this.tissue,growth_mode:this.growth_mode,development_type:this.development,sequence_type:this.sequence}),Object(h["g"])(e.table_name,e.currentPageTypeSource,e.pageSizeTypeSource,t).then((function(t){var a=t.data;e.datasetsTypeSource=a.list,e.totalTypeSource=a.total}))},changedCellType:function(e){var t=this;t.cell_type=e,this.getDatasetByMultiInput()},changedReportedGene:function(e){var t=this;t.reported_gene=e,this.getDatasetByMultiInput()},changedComppoundType:function(e){var t=this;t.compound_n=e,this.getDatasetByMultiInput()},changedDiseaseType:function(e){var t=this;t.disease_n=e,this.getDatasetByMultiInput()},changedSpecies:function(e){var t=this;t.species=e,this.getDatasetByMultiInput()},changedTissue:function(e){for(var t=this,a=0;a<this.tissue_list.length;a++)e.indexOf(this.tissue_list[a].name)>-1&&(t.tissue=this.tissue_list[a].value);this.getDatasetByMultiInput()},changedGrowthMode:function(e){var t=this;t.growth_mode=e,this.getDatasetByMultiInput()},changedDevelopmentType:function(e){var t=this;t.development=e,this.getDatasetByMultiInput()},changedSequenceType:function(e){var t=this;t.sequence=e,this.getDatasetByMultiInput()},getReportedGeneList:function(){var e=this;Object(h["h"])().then((function(t){var a=e,n=t.data,o=n.gData;a.reportedGene_list=o;for(var i=0;i<o.length;i++)o[i].name===e.$route.query.KeyName&&(e.searchGene=e.$route.query.KeyName,a.reported_gene=e.$route.query.KeyName);for(i=0;i<e.tissue_list.length;i++)e.tissue_list[i].value==e.$route.query.KeyName&&(a.searchTissue=e.tissue_list[i].name,a.tissue=e.tissue_list[i].value),e.$route.query.KeyName.indexOf(e.tissue_list[i].value)>-1&&(e.searchTissue=e.tissue_list[i].name);for(i=0;i<e.species_list.length;i++)e.species_list[i].name===e.$route.query.KeyName&&(e.searchSpecies=e.$route.query.KeyName,a.species=e.$route.query.KeyName),e.$route.query.KeyName.indexOf(e.species_list[i].name)>-1&&(e.searchSpecies=e.$route.query.KeyName,a.species=e.$route.query.KeyName)}))}}),watch:{$route:function(e){this.setBreadCrumb(e)}},created:function(){this.$route.query},mounted:function(){console.log("=============="),void 0!=this.$route.query.KeyName?(this.mockTableDataByKeyParam(this.$route.query.KeyName),this.getReportedGeneList()):(this.mockTableDataTypeSource(),this.getReportedGeneList())}},y=b,C=(a("a47c"),a("2877")),S=Object(C["a"])(y,n,o,!1,null,null,null),w=S.exports;t["default"]=w},17997:function(e,t,a){e.exports=a.p+"img/help_homeDiseases.bfa87a54.png"},"1bb8":function(e,t,a){},"1ddc":function(e,t,a){e.exports=a.p+"img/development_test.72b6d6f8.png"},"229f":function(e,t,a){},"23db":function(e,t,a){e.exports=a.p+"img/image-20220310215336566.c5bc895b.png"},2644:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Table",{staticClass:"h1_title",attrs:{border:"",data:e.filters,columns:e.tableColumnsFilters,stripe:""}}),a("Table",{staticClass:"h1_title",attrs:{height:"500","show-header":!1,data:e.data,columns:e.columns,stripe:""},on:{"on-row-click":e.intoDataSet,"on-selection-change":e.onChange}})],1)},o=[],i=a("5530"),r=(a("4de4"),a("d3b7"),a("ac1f"),a("841c"),a("a15b"),a("d81d"),a("b0c0"),a("a18c")),s=(a("ddb9"),a("2f62")),l={name:"FilterTableForAllDateSet",props:{columns:Array,data:Array,type:{default:!1,type:Boolean}},data:function(){return{filters:[{title:""}],tableColumnsFilters:[],search:{},dataset_id:""}},created:function(){var e=this,t=function(t){var a={};e.$set(a,"title",e.columns[t].title),e.columns[t].width&&e.$set(a,"width",e.columns[t].width);var n=function(e){};e.columns[t].filter&&(n=e.columns[t].filter.type&&"Select"===e.columns[t].filter.type?function(a){return a(e.columns[t].filter.type,{props:{placeholder:"Choose "+e.columns[t].title,value:0},on:{"on-change":function(a){return 0===a?(e.$delete(e.search,e.columns[t].key),void e.load()):0===a.split(" ").join("").length?(e.$Message.info("Please check your input",15),void e.load()):(e.$set(e.search,e.columns[t].key,a.split(" ").join("")),void e.load())}}},e.createOptionsRender(t,a))}:function(a){var n={};return a(e.columns[t].filter.type,{props:{placeholder:"Input "+e.columns[t].title,icon:"ios-search"},on:{input:function(a){n=a,n||e.validInputValue(t,n)},"on-click":function(){e.validInputValue(t,n)},"on-enter":function(){e.validInputValue(t,n)}}})}),e.$set(a,"render",n),e.tableColumnsFilters.push(a)};for(var a in this.columns)t(a)},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["setCurrentPageToken"])),{},{onChange:function(e){var t=e.map((function(e){return e.dataset_id}));this.$emit("select",t)},createOptionsRender:function(e,t){var a=[];if(this.columns[e].filter.option){var n=this.columns[e].filter.option;for(var o in n)a.push(t("Option",{props:{value:n[o].value}},n[o].name))}return a},load:function(){this.$emit("on-search",this.search),this.$emit("on-row-click",this.dataset_id)},validInputValue:function(e,t){if(!t)return this.$delete(this.search,this.columns[e].key),void this.load();this.$set(this.search,this.columns[e].key,t),this.load()},intoDataSet:function(e,t,a){this.type||(this.setCurrentPageToken(e.dataset_id),r["a"].push({name:"Dataset_detail",params:{dataset:e.dataset_id}}))}})},c=l,u=(a("9a13"),a("2877")),h=Object(u["a"])(c,n,o,!1,null,"0daa9914",null);t["a"]=h.exports},"26b6":function(e,t,a){e.exports=a.p+"img/help_homeDiffer.svg.a28c91bc.png"},"27d5":function(e,t,a){},"2b3f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lay_out"},[a("div",[a("h1",{staticClass:"my_h1"},[e._v("Expression Profile (Organism: "+e._s(e.orga_name)+")")]),a("Br"),a("Row",[a("Col",{attrs:{span:"12"}},[a("i-select",{staticStyle:{width:"80%"},attrs:{placeholder:"Please choose source",clearable:"",filterable:""},on:{"on-change":function(t){return e.changeCellSource(t)}},model:{value:e.cell_source,callback:function(t){e.cell_source=t},expression:"cell_source"}},e._l(e.SourceList,(function(t){return a("i-option",{attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),a("Col",{attrs:{span:"12"}},[a("i-select",{staticStyle:{width:"80%"},attrs:{placeholder:"Please input gene symbol",clearable:"",filterable:""},on:{"on-change":function(t){return e.changeGsymbol(t)}},model:{value:e.searchGene,callback:function(t){e.searchGene=t},expression:"searchGene"}},e._l(e.GeneList,(function(t){return a("i-option",{attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),a("Br"),a("Row",[e.spinShow1?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{autoResize:e.ifResize,data:e.vivo_data,layout:e.vivo_layout,options:e.vivo_options}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.ifShow,expression:"ifShow"}]},[a("Row",{directives:[{name:"show",rawName:"v-show",value:e.ifShow,expression:"ifShow"}]},[a("Col",{directives:[{name:"show",rawName:"v-show",value:e.ifShow,expression:"ifShow"}],attrs:{span:"12"}},[a("Input",{attrs:{search:"","enter-button":"Search",placeholder:"Please input gene symbol"},on:{"on-search":function(t){return e.searchVivtroBygene(t)}}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.ifShow,expression:"ifShow"}]},[a("vue-plotly",{directives:[{name:"show",rawName:"v-show",value:e.ifShow,expression:"ifShow"}],attrs:{autoResize:e.ifResize2,data:e.vitro_data,layout:e.vitro_layout,options:e.vitro_options}})],1)],1)])},o=[],i=(a("d3b7"),a("159b"),a("b0c0"),a("e6ca")),r=a("43e0"),s=a.n(r),l=[{value:"BM_vitro",name:"Bone Marrow (in vitro)"},{value:"BM_vivo",name:"Bone Marrow (in vivo)"},{value:"CB_vivo",name:"Cord Blood (in vivo)"},{value:"CB_vitro",name:"Cord Blood (in vitro)"},{value:"PB_vitro",name:"Peripheral Blood (in vitro)"},{value:"FL_vitro",name:"Fetal Liver (in vitro)"},{value:"FL_vivo",name:"Fetal Liver (in vivo)"},{value:"PB_vivo",name:"Peripheral Blood (in vivo)"},{value:"iPSC_vitro",name:"Induced Pluripotent Stem Cells (in vitro)"},{value:"Em_vivo",name:"Embryos (in vivo)"}],c={name:"AllExpression",components:{VuePlotly:s.a},props:{selectList:{type:Array,default:function(){return[]}}},data:function(){return{orga_name:"",spinShow1:!1,ifShow:!1,ifResize:!0,ifResize2:!0,vitro_data:[],vivo_data:[],vivo_layout:{},vitro_layout:{},vivo_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"all_expression",height:500,width:700,scale:1}},vitro_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"all_expression",height:500,width:700,scale:1}},SourceList:[],GeneList:[],vitroSourceList:[{value:"BM_vitro",label:"BM (in vitro)"},{value:"CB_vitro",label:"CB (in vitro)"},{value:"FL_vitro",label:"FL (in vitro)"},{value:"ESC_vitro",label:"ESC (in vitro)"},{value:"PB_vitro",label:"PB (in vitro)"},{value:"vitro",label:"All (in vitro)"}],cell_source:"",vitro_source:"vitro",searchGene:"AATK",searchVitroGene:"AATK"}},watch:{selectList:{handler:function(e){console.log(e);var t="all_"+e[0].orga+"_ep_"+e[0].sequnceType;this.table_name=t,this.getAllDevType(t),this.getAllDevGene(t),"hs"==e[0].orga&&(this.orga_name="Homo sapiens"),"mm"==e[0].orga&&(this.orga_name="Mus musculus"),"dr"==e[0].orga&&(this.orga_name="Danio rerio")},immediate:!0}},methods:{getAllDevType:function(e){var t=this,a=[];Object(i["c"])(e).then((function(e){var n=e.data;console.log(n),n.forEach((function(e){l.forEach((function(t){t.value==e&&a.push({value:e,label:t.name})}))})),t.SourceList=a,t.cell_source=n[0]}))},getAllDevGene:function(e){var t=this,a=[];Object(i["b"])(e).then((function(e){var n=e.data;console.log("getAllgenes"),console.log(n),n.forEach((function(e){a.push({value:e,label:e})})),t.GeneList=a,t.searchGene=a[0].value,t.searchBygene()}))},getVitroExpreChart:function(){},getVivoExpreChart:function(e,t){},searchVivtroBygene:function(e){var t=this;this.searchVitroGene=e,""!=this.vitro_source?""!=e?Object(i["a"])(this.selectList[1],this.searchVitroGene).then((function(e){var a=e.data;if(console.log(e.data),0==a.signal)t.$Message.info("Please check your input(no such gene)",10),t.spinShow1=!1;else{t.vitro_data=[];for(var n=a.xData,o=a.yData,i=0;i<n.length;i++){var r={type:"box",y:o[i],name:n[i],boxpoints:"all",jitter:.5,whiskerwidth:.2,fillcolor:"cls",marker:{size:2},line:{width:1}};t.spinShow1=!1,t.vitro_data.push(r)}var s={title:t.searchGene+" expression level (Source: "+t.selectList[1]+")",bargap:.25,yaxis:{autorange:!0,rangemode:"normal",showgrid:!0,zeroline:!0,gridcolor:"rgb(255, 255, 255)",gridwidth:1,zerolinecolor:"rgb(255, 255, 255)",zerolinewidth:2},margin:{l:40,r:30,b:80,t:100},paper_bgcolor:"rgb(243, 243, 243)",plot_bgcolor:"rgb(243, 243, 243)",showlegend:!1};t.vitro_layout=s}})):this.$Message.info("please input gene symbol",10):this.$Message.info("please select source",10)},changeGsymbol:function(e){this.searchGene=e,this.searchBygene()},searchBygene:function(){var e=this;""!=this.cell_source?(""==this.searchGene&&this.$Message.info("please input gene symbol",10),Object(i["a"])(this.selectList[0],this.searchGene,this.cell_source).then((function(t){var a=t.data;if(console.log(t.data),0==a.signal)e.$Message.info("Please check your input(no such gene)",10),e.spinShow4=!1;else{e.vivo_data=[];for(var n=a.xData,o=a.yData,i=0;i<n.length;i++){var r={type:"box",y:o[i],name:n[i],boxpoints:"all",jitter:.5,whiskerwidth:.2,fillcolor:"cls",marker:{size:2},line:{width:1}};e.vivo_data.push(r)}var s="";l.forEach((function(t){t.value==e.cell_source&&(s=t.name)}));var c={title:e.searchGene+" expression level (Source: "+s+")",bargap:.25,yaxis:{autorange:!0,rangemode:"normal",showgrid:!0,zeroline:!0,gridcolor:"rgb(255, 255, 255)",gridwidth:1,zerolinecolor:"rgb(255, 255, 255)",zerolinewidth:2,title:"Expression"},xaxis:{title:"Group"},margin:{l:40,r:40,b:80,t:100},paper_bgcolor:"rgb(243, 243, 243)",plot_bgcolor:"rgb(243, 243, 243)",showlegend:!1};e.vivo_layout=c}}))):this.$Message.info("please select source",10)},changeCellSource:function(e){this.cell_source=e,this.searchBygene()},changeVivtroCellSource:function(e){this.vitro_source=e},getrandom:function(e,t){for(var a=[],n=0;n<=e;n++){var o=Math.random()*t;a.push(o)}return a}},mounted:function(){},created:function(){}},u=c,h=(a("536c"),a("2877")),p=Object(h["a"])(u,n,o,!1,null,null,null);t["default"]=p.exports},"2be6":function(e,t,a){"use strict";a("a836")},"300f":function(e,t,a){"use strict";a("8641")},3047:function(e,t,a){e.exports=a.p+"img/help_eryAtlas1.19ea5ddf.png"},"318a":function(e,t,a){e.exports=a.p+"img/help_scPCA.f6f6d99a.png"},"33cf":function(e,t,a){"use strict";a("ad24")},"354a":function(e,t,a){e.exports=a.p+"img/help_scDifferEnrich.e15cb073.png"},"376b":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("2909"),o=(a("d3b7"),a("c19f"),a("ace4"),a("5cc6"),a("907ac"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("fa9e"),a("77d9"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("1b3b"),a("3d71"),a("c6e3"),a("159b"),a("d81d"),a("25f0"),a("99af"),a("21a6")),i=a("25ca");function r(e,t){t&&(e+=1462);var a=Date.parse(e);return(a-new Date(Date.UTC(1899,11,30)))/864e5}function s(e,t){for(var a={},n={s:{c:1e7,r:1e7},e:{c:0,r:0}},o=0;o!=e.length;++o)for(var s=0;s!=e[o].length;++s){n.s.r>o&&(n.s.r=o),n.s.c>s&&(n.s.c=s),n.e.r<o&&(n.e.r=o),n.e.c<s&&(n.e.c=s);var l={v:e[o][s]};if(null!=l.v){var c=i["b"].encode_cell({c:s,r:o});"number"===typeof l.v?l.t="n":"boolean"===typeof l.v?l.t="b":l.v instanceof Date?(l.t="n",l.z=i["a"]._table[14],l.v=r(l.v)):l.t="s",a[c]=l}}return n.s.c<1e7&&(a["!ref"]=i["b"].encode_range(n)),a}function l(){if(!(this instanceof l))return new l;this.SheetNames=[],this.Sheets={}}function c(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),n=0;n!=e.length;++n)a[n]=255&e.charCodeAt(n);return t}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiHeader,a=void 0===t?[]:t,r=e.header,u=e.data,h=e.filename,p=e.merges,d=void 0===p?[]:p,m=e.autoWidth,g=void 0===m||m,f=e.bookType,_=void 0===f?"xlsx":f;h=h||"excel-list",u=Object(n["a"])(u),u.unshift(r);for(var v=a.length-1;v>-1;v--)u.unshift(a[v]);var b="SheetJS",y=new l,C=s(u);if(d.length>0&&(C["!merges"]||(C["!merges"]=[]),d.forEach((function(e){C["!merges"].push(i["b"].decode_range(e))}))),g){for(var S=u.map((function(e){return e.map((function(e){return null==e?{wch:10}:e.toString().charCodeAt(0)>255?{wch:2*e.toString().length}:{wch:e.toString().length}}))})),w=S[0],x=1;x<S.length;x++)for(var k=0;k<S[x].length;k++)w[k]["wch"]<S[x][k]["wch"]&&(w[k]["wch"]=S[x][k]["wch"]);C["!cols"]=w}y.SheetNames.push(b),y.Sheets[b]=C;var P=i["c"](y,{bookType:_,bookSST:!1,type:"binary"});Object(o["saveAs"])(new Blob([c(P)],{type:"application/octet-stream"}),"".concat(h,".").concat(_))}},"381e":function(e,t,a){},"38f0":function(e,t,a){},"39b2":function(e,t,a){"use strict";a.d(t,"e",(function(){return o})),a.d(t,"j",(function(){return i})),a.d(t,"s",(function(){return r})),a.d(t,"t",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"o",(function(){return c})),a.d(t,"p",(function(){return u})),a.d(t,"q",(function(){return h})),a.d(t,"r",(function(){return p})),a.d(t,"c",(function(){return d})),a.d(t,"z",(function(){return m})),a.d(t,"u",(function(){return g})),a.d(t,"v",(function(){return f})),a.d(t,"w",(function(){return _})),a.d(t,"y",(function(){return v})),a.d(t,"x",(function(){return b})),a.d(t,"k",(function(){return y})),a.d(t,"l",(function(){return C})),a.d(t,"m",(function(){return S})),a.d(t,"n",(function(){return w})),a.d(t,"h",(function(){return x})),a.d(t,"i",(function(){return k})),a.d(t,"a",(function(){return P})),a.d(t,"b",(function(){return D})),a.d(t,"A",(function(){return O})),a.d(t,"B",(function(){return T})),a.d(t,"g",(function(){return E})),a.d(t,"f",(function(){return G})),a.d(t,"C",(function(){return z}));var n=a("66df"),o=function(e,t,a){return n["a"].request({url:"public/getPageDataSets",data:{datasetName:e,pageIndex:t,pageSize:a},method:"post"})},i=function(e,t,a){return n["a"].request({url:"public/getPageDataSetsTypeSource",data:{table_name:e,pageIndex:t,pageSize:a},method:"post"})},r=function(e,t,a){return n["a"].request({url:"public/getEryGeneScore",data:{table_name:e,pageIndex:t,pageSize:a},method:"post"})},s=function(e,t,a,o){return n["a"].request({url:"public/getEryGeneScoreByKeyName",data:{keyname:e,table_name:t,pageIndex:a,pageSize:o},method:"post"})},l=function(e){return n["a"].request({url:"public/getDataTypeInfo",data:{type_name:e},method:"post"})},c=function(e,t,a,o){return n["a"].request({url:"public/getDiffPageDataset",data:{table_name:e,pageIndex:t,pageSize:a,contrastsGroup:o},method:"post"})},u=function(e,t,a,o,i){return n["a"].request({url:"public/getDiffPageDatasetByGene",data:{table_name:t,pageIndex:a,pageSize:o,contrastsGroup:i,gene:e},method:"post"})},h=function(e,t,a,o,i,r){return n["a"].request({url:"public/getDiffPageDatasetBySort",data:{sortableOrder:t,sortableKey:e,table_name:a,pageIndex:o,pageSize:i,contrastsGroup:r},method:"post"})},p=function(e,t,a,o,i,r,s){return n["a"].request({url:"public/getDiffPageDatasetBySortGene",data:{sortableOrder:a,sortableKey:t,table_name:o,pageIndex:i,pageSize:r,contrastsGroup:s,gene:e},method:"post"})},d=function(){return n["a"].request({url:"public/getAllSampleCellNumber",data:{},method:"post"})},m=function(e,t,a){return n["a"].request({url:"public/getSampleGroupPageDataset",data:{series:e,pageIndex:t,pageSize:a},method:"post"})},g=function(e){return n["a"].request({url:"public/getSCCellAnnoInfo",data:{series:e},method:"post"})},f=function(e,t,a,o){return n["a"].request({url:"public/getSCDiffPageDataset",data:{table_name:e,pageIndex:t,pageSize:a,contrastsGroup:o},method:"post"})},_=function(e,t,a,o,i){return n["a"].request({url:"public/getSCDiffPageDatasetByGene",data:{gene:e,table_name:t,pageIndex:a,pageSize:o,contrastsGroup:i},method:"post"})},v=function(e,t,a,o,i,r,s){return n["a"].request({url:"public/getSCDiffPageDatasetBySortGene",data:{gene:e,sortableKey:t,sortableOrder:a,table_name:o,pageIndex:i,pageSize:r,contrastsGroup:s},method:"post"})},b=function(e,t,a,o,i,r){return n["a"].request({url:"public/getSCDiffPageDatasetBySort",data:{sortableKey:e,sortableOrder:t,table_name:a,pageIndex:o,pageSize:i,contrastsGroup:r},method:"post"})},y=function(e,t,a){return n["a"].request({url:"public/getDatasetTypeSourceByCell",data:{cell_name:e,pageIndex:t,pageSize:a},method:"post"})},C=function(e,t,a){return n["a"].request({url:"public/getDatasetTypeSourceByCompundsType",data:{compunds_type:e,pageIndex:t,pageSize:a},method:"post"})},S=function(e,t,a){return n["a"].request({url:"public/getDatasetTypeSourceByDiseaseType",data:{disease_type:e,pageIndex:t,pageSize:a},method:"post"})},w=function(e,t,a){return n["a"].request({url:"public/getDatasetTypeSourceByGene",data:{gene:e,pageIndex:t,pageSize:a},method:"post"})},x=function(){return n["a"].request({url:"public/getDatasetGene",data:{},method:"post"})},k=function(){return n["a"].request({url:"public/getDatasetKeyWords",data:{},method:"post"})},P=function(e,t){return n["a"].request({url:"public/getAllSCFeatureKeyWords",data:{series:e,group:t},method:"post"})},D=function(e,t){return n["a"].request({url:"public/getAllSCFeatureKeyWordsSplitCell",data:{series:e,group:t},method:"post"})},O=function(e,t,a,o){return n["a"].request({url:"public/getPageDataSetsByParms",data:{datasetName:e,search:t,pageIndex:a,pageSize:o},method:"post"})},T=function(e,t,a,o,i){return n["a"].request({url:"public/getPageDataSetsTypeSourceByParms",data:{search:e,pageIndex:t,pageSize:a,cell_type:o,real_cell_type_name:i},method:"post"})},E=function(e,t,a,o){return n["a"].request({url:"public/getDatasetDataByMultiInput",data:{table_name:e,pageIndex:t,pageSize:a,select:o},method:"post"})},G=function(e,t,a,o){return n["a"].request({url:"public/getPageDataSetByKeyParam",data:{table_name:e,pageIndex:t,pageSize:a,keyParam:o},method:"post"})},z=function(e,t,a,o,i){return n["a"].request({url:"public/getDiffDatasetByParms",data:{series:e,search:t,pageIndex:a,pageSize:o,contrastsGroup:i},method:"post"})}},4360:function(e,t,a){"use strict";var n=a("2b0e"),o=a("2f62"),i=a("c276"),r=(a("a18c"),a("ddb9")),s=a("f121"),l=s["a"].homeName,c={state:{breadCrumbList:[],homeRoute:{},local:Object(i["d"])("local"),CurrentPageToken:"",NewRouteName:""},getters:{menuList:function(e,t,a){return getMenuByRouter(r["a"],a.user.access)}},mutations:{setBreadCrumb:function(e,t){e.breadCrumbList=Object(i["b"])(t,e.homeRoute)},setHomeRoute:function(e,t){e.homeRoute=Object(i["c"])(t,l)},setLocal:function(e,t){Object(i["e"])("local",t),e.local=t},setCurrentPageToken:function(e,t){Object(i["e"])("CurrentPageToken",t),e.CurrentPageToken=t},setNewRouteName:function(e,t){Object(i["e"])("NewRouteName",t),e.NewRouteName=t}}};n["default"].use(o["a"]);t["a"]=new o["a"].Store({state:{},mutations:{},actions:{},modules:{app:c}})},4644:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[e.ifshowvis?a("Row",[a("Col",{attrs:{span:"4"}},[a("strong",[e._v("Visualize Site:")])]),a("Col",{attrs:{span:"20"}},[a("a",{attrs:{href:e.getVisHref()}},[e._v(e._s(e.visualize_site))])])],1):e._e(),a("br"),e.ifshowAnalContent?a("div",{staticClass:"card"},[a("h3",{staticClass:"h3_title"},[e._v("Analysis:")]),e._l(e.AnalyzeTypeList,(function(t,n){return a("div",{key:n,staticClass:"anal_div",class:{myactive:e.currentAnalIndex===n},on:{click:function(t){return e.analClick(n)}}},[a("div",{on:{click:function(a){return e.changeDom(t.link)}}},[a("span",{staticClass:"servetitle"},[e._v(e._s(t.name))])])])}))],2):e._e()],1),"RNA_Expression"==e.childDom?a("Rna"):e._e(),"PCA"==e.childDom?a("PCA"):e._e(),"Diff_analysis"==e.childDom?a("DiffAnalysis"):e._e(),"EnrichGO"==e.childDom?a("EnrichGO"):e._e(),"scPlotTSNE"==e.childDom?a("scPlotTSNE"):e._e(),"ClusterMarker"==e.childDom?a("ClusterMarker"):e._e(),"sc_Diffanal"==e.childDom?a("sc_Diffanal"):e._e(),"ClusterDiffTrajectory"==e.childDom?a("ClusterDiffTrajectory"):e._e(),"ScInterraction"==e.childDom?a("ScInterraction"):e._e(),"ScCommunication"==e.childDom?a("ScCommunication"):e._e(),e.ifcellAnno?a("div",{staticClass:"card"},[a("h3",{staticClass:"h3_title"},[e._v("Cell annotation information： ")]),a("br"),a("Row",[a("Table",{ref:"table",staticClass:"my-tableStyle",attrs:{columns:e.cellAnnoCols,data:e.cellAnnoData,size:"small","disabled-hover":"True"}})],1)],1):e._e()],1)},o=[],i=a("0d16"),r=a("39b2"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("br"),a("h1",{staticClass:"my_h1"},[e._v("Expression Profile")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"h4_title"},[e._v("Input gene symbol:")]),a("i-select",{staticStyle:{width:"80%"},attrs:{filterable:""},on:{"on-change":function(t){return e.searchItemByName(t)},"on-search":function(t){return e.searchItemByName(t)}},model:{value:e.specif_name,callback:function(t){e.specif_name=t},expression:"specif_name"}},e._l(e.keyWords_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("br"),a("Row",[a("Collapse",{staticClass:"h3_title",attrs:{simple:""},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},[a("Panel",{attrs:{name:"2"}},[a("span",{staticClass:"h4_title"},[e._v("Search gene in:")]),a("p",{attrs:{slot:"content"},slot:"content"},e._l(e.othersearch_items,(function(t,n){return a("Button",{key:n,staticClass:"button_style",attrs:{label:t.name,type:"primary",icon:"ios-search"}},[a("a",{staticStyle:{color:"white"},attrs:{href:t.link,target:"_blank"}},[e._v(" "+e._s(t.name)+" ")])])})),1)])],1)],1),a("br"),a("Row",{staticClass:"code-row-bg",attrs:{justify:"center"}},[e.spinShow4?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{autoResize:e.ifResize,data:e.expreProfile_data,layout:e.expreProfile_layout,options:e.expreProfile_options}})],1)],1)])])},l=[],c=(a("b0c0"),a("fb6a"),a("ac1f"),a("841c"),a("6c9c")),u=a("43e0"),h=a.n(u),p={name:"RnaExpression",components:{VuePlotly:h.a},data:function(){return{inpute_v:"",search_placeholder:"",series:this.$store.state.app.CurrentPageToken,SpecifExpreOptionsByName:{},ifResize:!0,expreProfile_data:[],expreProfile_layout:{},expreProfile_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"expression_image",height:500,width:700,scale:1}},keyWords_list:[],spinShow4:"true",othersearch_items:[],search_datatype:"",experiment_type:"",value1:"1",itemInfo_Symbol:"",itemInfo_Ensembl_ID:"",itemInfo_Description:"",itemInfo_Alias:"",itemInfo_Summary:"",ShowitemInfoTip:!1,dataType:"",specif_name:""}},methods:{getAllkeyWords:function(){var e=this,t=[];Object(i["c"])(this.$store.state.app.CurrentPageToken).then((function(a){t=a.data.keywords,e.keyWords_list=t,e.getdatasetExperiType(e.keyWords_list[0].name)}))},getdatasetExperiType:function(e){var t=this;console.log(this.$store.state.app.CurrentPageToken),Object(i["a"])(this.$store.state.app.CurrentPageToken).then((function(a){var n=a.data;if(console.log(n),t.experiment_type=n.experiment_type,n.experiment_type.indexOf("Expression profiling")>-1){t.search_placeholder="AAGAB";var o="rna";t.dataType=o,t.search_datatype="RNA's symbol",t.searchItemInfoBydataname("rna","CD36"),t.specif_name=e,t.setOthersearchItems("rna"),t.getSpecifExpreOptionsByName(t.series,o,e)}}))},search_value:function(e){this.inpute_v=e},searchItemByName:function(e){var t=this;t.ShowitemInfoTip=!1;var a=e;this.specif_name=a,this.getSpecifExpreOptionsByName(this.series,this.dataType,a),this.searchItemInfoBydataname(this.dataType,a),this.setOthersearchItems(this.dataType)},getSpecifExpreOptionsByName:function(e,t,a){var n=this,o=this;void 0!=a&&null!=a||(a="CD36",this.specif_name=a);var i=o.dataType;Object(c["z"])(e,i,a).then((function(e){var t=e.data;if(0==t.signal)n.$Message.info(t.message,10),n.spinShow4=!1;else{n.expreProfile_data=[];var o=t.xData,i=t.yData;console.log("==="),console.log(i);for(var r=0;r<o.length;r++){var s={type:"box",y:i[r],name:o[r],boxpoints:"all",jitter:.5,whiskerwidth:.2,fillcolor:"cls",marker:{size:2},line:{width:1}};n.expreProfile_data.push(s)}var l=t.growth_mode[0].toUpperCase(),c=t.growth_mode.slice(1),u=l+c,h={title:a+" expression level ("+n.series+"; Source:"+t.source+"; Experiment type: "+u+")",yaxis:{autorange:!0,rangemode:"normal",showgrid:!0,zeroline:!0,gridcolor:"rgb(243, 243, 243)",gridwidth:1,zerolinecolor:"rgb(243, 243, 243)",zerolinewidth:2,title:"Expression"},xaxis:{title:"Group",gridcolor:"rgb(243, 243, 243)",gridwidth:1},margin:{l:80,r:30,b:80,t:100},showlegend:!1};n.expreProfile_layout=h,n.spinShow4=!1}}))},setOthersearchItems:function(e){var t=[],a=this;-1!=e.search("rna")&&t.push({name:"GeneCards",link:"http://www.genecards.org/cgi-bin/carddisp.pl?gene="+a.specif_name},{name:"NCBI",link:"https://www.ncbi.nlm.nih.gov/gene/?term="+a.specif_name},{name:"Ensembl",link:"http://www.ensembl.org/Homo_sapiens/Gene/Summary?g="+a.specif_name},{name:"OMIM",link:"https://omim.org/search/?search="+a.specif_name},{name:"COSMIC",link:"http://cancer.sanger.ac.uk/cosmic/gene/analysis?ln="+a.specif_name},{name:"DrugBank",link:"https://www.drugbank.ca/unearth/q?query="+a.specif_name+"&searcher=targets"}),-1!=e.search("miRNA")&&t.push({name:"GeneCards",link:"http://www.genecards.org/cgi-bin/carddisp.pl?gene="+a.specif_name},{name:"NCBI",link:"https://www.ncbi.nlm.nih.gov/gene/?term=ENSG00000125148"},{name:"Ensembl",link:"http://www.ensembl.org/Homo_sapiens/Gene/Summary?g="+a.specif_name},{name:"OMIM",link:"https://omim.org/search/?search="+a.specif_name},{name:"COSMIC",link:"http://cancer.sanger.ac.uk/cosmic/gene/analysis?ln="+a.specif_name},{name:"DrugBank",link:"https://www.drugbank.ca/unearth/q?query="+a.specif_name+"&searcher=targets"}),-1!=e.search("lncRNA")&&t.push({name:"GeneCards",link:"http://www.genecards.org/cgi-bin/carddisp.pl?gene="+a.specif_name},{name:"NCBI",link:"https://www.ncbi.nlm.nih.gov/gene/?term=ENSG00000125148"},{name:"Ensembl",link:"http://www.ensembl.org/Homo_sapiens/Gene/Summary?g="+a.specif_name},{name:"OMIM",link:"https://omim.org/search/?search="+a.specif_name},{name:"COSMIC",link:"http://cancer.sanger.ac.uk/cosmic/gene/analysis?ln="+a.specif_name},{name:"DrugBank",link:"https://www.drugbank.ca/unearth/q?query="+a.specif_name+"&searcher=targets"}),a.othersearch_items=[],a.othersearch_items=t},searchItemInfoBydataname:function(e,t){var a=this;void 0!=t&&null!=t||(t="CD36"),Object(c["q"])(e,t).then((function(e){var t=e.data;0==t.signal?(a.itemInfoTip=t.message,a.ShowitemInfoTip=!0):(a.itemInfo_Symbol=t.Symbol,a.itemInfo_Ensembl_ID=t.Ensembl_ID,a.itemInfo_Description=t.Description,a.itemInfo_Alias=t.Alias,a.itemInfo_Summary=t.Summary)}))}},mounted:function(){this.getAllkeyWords()}},d=p,m=(a("5b59"),a("2877")),g=Object(m["a"])(d,s,l,!1,null,null,null),f=g.exports,_=a("4784"),v=a("924a"),b=a("b001"),y=a("02f5"),C=a("53b5"),S=a("f39f"),w=a("b02c"),x=a("e636"),k=a("9072"),P=a("a0ee"),D={name:"DatasetService",components:{Rna:f,PCA:_["default"],DiffAnalysis:v["default"],EnrichGO:b["default"],ClustGram:y["default"],scPlotTSNE:C["default"],ClusterMarker:S["default"],Diff_analysis:v["default"],sc_Diffanal:w["default"],ClusterDiffTrajectory:x["default"],ScInterraction:k["default"],ScCommunication:P["default"]},data:function(){return{ifshowvis:!1,showSubAnalContent:!1,SubAnalContent:"",ifshowAnalContent:!1,experiment_type:"",visualize_site:"",series:this.$store.state.app.CurrentPageToken,currentAnalIndex:-1,cellAnnoCols:[{title:"Cell type abbreviation",key:"refPaper_name",sortable:!0,filter:{type:"Input"}},{title:"Cell name full name",key:"full_cell_name",sortable:!0,width:400}],cellAnnoData:[],AnalyzeTypeList:[{name:"Expression Profile",link:"RNA_Expression"},{name:"Principal Component Analysis",link:"PCA"},{name:"Differential Analysis",link:"Diff_analysis"},{name:"Enrichment Analysis",link:"EnrichGO"}],childDom:"",ifcellAnno:!1}},methods:{changeDom:function(e){this.childDom!==e?this.childDom=e:this.childDom=""},analClick:function(e){this.currentAnalIndex=e},getVisHref:function(){return this.visualize_site},mockScAnnoTableData:function(e){var t=this;Object(r["u"])(e).then((function(e){var a=e.data;t.cellAnnoData=a.list}))},getDatasetSequenceType:function(){var e=this;console.log(this.$store.state.app.CurrentPageToken),Object(i["b"])(this.$store.state.app.CurrentPageToken).then((function(t){var a=t.data;if(console.log("data:"),console.log(a),e.experiment_type=a.experiment_type,e.sequencing_type=a.sequencing_type,e.ifAnal=a.if_Anal,e.visualize_site=a.visualize_site,e.ifAnal.indexOf("yes")>-1)if(a.sequencing_type.indexOf("Single Cell")>-1)null!=a.visualize_site?e.ifshowvis=!0:(e.ifshowAnalContent=!0,e.AnalyzeTypeList=[{name:"Visualization & Feature",link:"scPlotTSNE"},{name:"Marker & Enrichment",link:"ClusterMarker"},{name:"Difference & Enrichment",link:"sc_Diffanal"},{name:"Differentiation Trajectory",link:"ClusterDiffTrajectory"},{name:"Cell-Cell Interaction",link:"ScInterraction"},{name:"Cell-Cell Communication",link:"ScCommunication"}],e.ifcellAnno=!0,e.mockScAnnoTableData(e.$store.state.app.CurrentPageToken));else{e.ifshowAnalContent=!0;a.experiment_type.split(",");a.experiment_type.indexOf("Expression profiling")>=0&&(a.sequencing_type.indexOf("Bulk")>=0?e.AnalyzeTypeList=[{name:"Expression Profile",link:"RNA_Expression"},{name:"Principal Component Analysis",link:"PCA"},{name:"Differential Analysis",link:"Diff_analysis"},{name:"Enrichment Analysis",link:"EnrichGO"}]:e.AnalyzeTypeList=[{name:"Differential analysis",link:"Diff_analysis"},{name:"Enrichment Analysis",link:"EnrichGO"},{name:"Single Cell t_SNE",link:"scPlotTSNE"},{name:"Single Cell Feature Plot",link:"FeaturePlot"}])}if(e.ifAnal.indexOf("1")>-1)if(a.sequencing_type.indexOf("Single Cell")>-1)null!=a.visualize_site?e.ifshowvis=!0:(e.ifshowAnalContent=!0,e.AnalyzeTypeList=[{name:"PCA & Feature",link:"PlotTSNE"},{name:"Marker & Enrichment",link:"ClusterMarker"},{name:"Difference & Enrichment",link:"sc_Diffanal"},{name:"Differentiation Trajectory",link:"ClusterDiffTrajectory"},{name:"Cell-Cell Interaction",link:"ScInterraction"},{name:"Cell-Cell Communication",link:"ScCommunication"}]);else{e.ifshowAnalContent=!0;a.experiment_type.split(",");a.experiment_type.indexOf("Expression profiling")>=0&&(a.sequencing_type.indexOf("Bulk")>=0?e.AnalyzeTypeList=[{name:"Expression Profile",link:"RNA_Expression"},{name:"Principal Component Analysis",link:"PCA"}]:e.AnalyzeTypeList=[{name:"Differential analysis",link:"Diff_analysis"},{name:"Enrichment Analysis",link:"EnrichGO"},{name:"Single Cell t_SNE",link:"PlotTSNE"},{name:"Single Cell Feature Plot",link:"FeaturePlot"}])}}))}},mounted:function(){this.getDatasetSequenceType()}},O=D,T=(a("b368"),Object(m["a"])(O,n,o,!1,null,null,null));t["default"]=T.exports},4784:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("br"),a("h1",{staticClass:"my_h1"},[e._v("Principal Component Analysis (PCA)")]),a("Row",[e.spinShow3?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{data:e.sim_data,layout:e.sim_layout,options:e.sim_options}}),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){return e.exportPCAData()}}},[a("Icon",{attrs:{type:"ios-download-outline"}}),e._v("Download Data")],1)],1)],1)},o=[],i=(a("fb6a"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("43e0")),r=a.n(i),s=a("6c9c"),l={name:"PCA",components:{VuePlotly:r.a},data:function(){return{series:this.$store.state.app.CurrentPageToken,spinShow3:"true",sim_data:[],sim_layout:{},sim_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"pca_image",height:500,width:700,scale:1}},source:"",Dsource:"",Dgrowth_mode:""}},methods:{getsim_chart:function(e){var t=this,a=this;Object(s["G"])(this.series).then((function(e){var n=e.data;console.log(n),t.sim_data=n.data;var o=t.Dgrowth_mode[0].toUpperCase(),i=t.Dgrowth_mode.slice(1),r=o+i,s={title:"PCA ("+t.series+"; Source:"+t.Dsource+"; Experiment type: "+r+")",xaxis:{title:"Dim 1"},yaxis:{title:"Dim 2"}};t.sim_layout=s,a.spinShow3=!1}))},getDatasetSourceInfo:function(e){var t=this;Object(s["h"])(this.series).then((function(e){var a=e.data;console.log(a),t.Dsource=a.source,t.Dgrowth_mode=a.growth_mode}))},exportPCAData:function(){var e=this;this.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","Dowloding")])}}),Object(s["r"])(this.series).then((function(t){var a=new Blob([t.data],{type:"application/vnd.ms-excel"}),n=e.series+"_pca_data.xls";if("msSaveOrOpenBlob"in navigator)window.navigator.msSaveOrOpenBlob(a,n);else{var o=document.createElement("a");o.download=n,o.style.display="none",o.href=URL.createObjectURL(a),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}e.$Spin.hide()})),this.$Loading.finish()}},mounted:function(){this.getDatasetSourceInfo(this.series),this.getsim_chart(this.series)}},c=l,u=a("2877"),h=Object(u["a"])(c,n,o,!1,null,null,null);t["default"]=h.exports},"4c81":function(e,t,a){e.exports=a.p+"img/test_home.d61ce30e.png"},"4ee7":function(e,t,a){},"4f76":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lay_out"},[a("h1",{staticClass:"my_h1"},[e._v("Principal Component Analysis (Organism: "+e._s(e.orga_name)+")")]),a("Br"),a("Row",[a("i-form",{attrs:{"label-width":100}},[a("Col",{attrs:{span:"12"}},[a("i-select",{staticStyle:{width:"80%"},attrs:{placeholder:"Please choose source",clearable:"",filterable:""},on:{"on-change":function(t){return e.changeCellSource(t)}},model:{value:e.cell_source,callback:function(t){e.cell_source=t},expression:"cell_source"}},e._l(e.SourceList,(function(t){return a("i-option",{attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),a("Col",{attrs:{span:"12"}},[a("i-select",{staticStyle:{width:"70%"},attrs:{clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"on-change":function(t){return e.changedClustChart(t)}},model:{value:e.colorby,callback:function(t){e.colorby=t},expression:"colorby"}},e._l(e.group_type_list,(function(t){return a("i-option",{attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1),a("Br"),a("Row",[a("div",[e.spinShow3?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{autoResize:e.ifResize,data:e.clusterbyifVivo_data,layout:e.clusterbyifVivo_layout,options:e.clusterbyifVivo_options}})],1)])],1)},o=[],i=(a("d3b7"),a("159b"),a("b0c0"),a("43e0")),r=a.n(i),s=a("e6ca"),l=[{value:"BM_vitro",name:"Bone Marrow (in vitro)"},{value:"BM_vivo",name:"Bone Marrow (in vivo)"},{value:"CB_vivo",name:"Cord Blood (in vivo)"},{value:"CB_vitro",name:"Cord Blood (in vitro)"},{value:"PB_vitro",name:"Peripheral Blood (in vitro)"},{value:"FL_vitro",name:"Fetal Liver (in vitro)"},{value:"FL_vivo",name:"Fetal Liver (in vivo)"},{value:"PB_vivo",name:"Peripheral Blood (in vivo)"},{value:"iPSC_vitro",name:"Induced Pluripotent Stem Cells (in vitro)"},{value:"Em_vivo",name:"Embryos (in vivo)"}],c={name:"all_Cluster",components:{VuePlotly:r.a},props:{selectList:{type:Array,default:function(){return[]}}},data:function(){return{orga_name:"",ifResize:!0,series:this.$store.state.app.CurrentPageToken,spinShow3:"true",spinShow2:"true",SourceList:[],spinShow1:"true",clusterbyifVivo_data:[],clusterbyifVivo_layout:{},clusterbyifVivo_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"all_pca",height:500,width:700,scale:1}},clusterbyCellType_data:[],clusterbyCellType_layout:{},clusterbyCellType_options:{responsive:!0},clusterbySourceCell_data:[],clusterbySourceCell_layout:{},clusterbySourceCell_options:{responsive:!0},orga:this.$route.params.orga,sequ_type:this.$route.params.sequ_type,table_name:"all_hsrna_dev_cluster",colorby:"",cell_source:"",group_type_list:[{id:"1",name:"Cell type ",value:"cell_type"},{id:"2",name:"Experiment and cell type ",value:"group"}]}},watch:{selectList:{handler:function(e){var t="all_"+e[0].orga+"_ep_"+e[0].sequnceType;this.table_name=t,this.getAllDevType(t),"hs"==e[0].orga&&(this.orga_name="Homo sapiens"),"mm"==e[0].orga&&(this.orga_name="Mus musculus"),"dr"==e[0].orga&&(this.orga_name="Danio rerio")},immediate:!0}},methods:{getAllDevType:function(e){var t=this,a=[];Object(s["c"])(e).then((function(e){var n=e.data;console.log("dev_type"),console.log(n),n.forEach((function(e){l.forEach((function(t){t.value==e&&a.push({value:e,label:t.name})}))})),t.SourceList=a,t.cell_source=n[0],t.colorby="cell_type",t.getCluster_chart3(t.selectList,t.colorby,t.cell_source)}))},changeCellSource:function(e){this.cell_source=e,this.getPCAByKey()},getPCAByKey:function(){this.getCluster_chart3(this.selectList,this.colorby,this.cell_source)},changedClustChart:function(e){var t=this;this.group_type_list.forEach((function(a){a.name==e&&(t.colorby=a.value)})),this.getPCAByKey()},getCluster_chart3:function(e,t,a){var n=this,o=this;Object(s["h"])(e[0],t,a).then((function(e){var t=e.data;console.log(t);var a=t.xData,i=t.yData,r=t.nData,s=t.tData;n.clusterbyifVivo_data=[];for(var c=0;c<a.length;c++){var u={x:a[c],y:i[c],mode:"markers",type:"scatter",name:r[c],text:s[c],marker:{size:15}};n.clusterbyifVivo_data.push(u)}var h="";l.forEach((function(e){e.value==n.cell_source&&(h=e.name)}));var p={title:"Principal Component Analysis (Source: "+h+")",xaxis:{title:"Leading logFC dim 1"},yaxis:{title:"Leading logFC dim 2",axisLabel:{interval:0,formatter:function(e){return e.length>30?e.substring(0,30)+"...":e}}}};n.clusterbyifVivo_layout=p,o.spinShow3=!1}))},getCluster_chart2:function(e){var t=this,a="cell_type",n=this;Object(s["h"])(this.table_name,a).then((function(e){var a=e.data;console.log(a);for(var o=a.xData,i=a.yData,r=a.nData,s=a.tData,l=0;l<o.length;l++){var c={x:o[l],y:i[l],mode:"markers",type:"scatter",name:r[l],text:s[l],marker:{size:15}};t.clusterbyCellType_data.push(c)}var u={title:"Principal Component Analysis (in {{selectList[0].deve}})",xaxis:{title:"Leading logFC dim 1"},yaxis:{title:"Leading logFC dim 2"}};t.clusterbyCellType_layout=u,n.spinShow2=!1}))},getCluster_chart1:function(e){var t=this,a="source_cell",n=this;Object(s["h"])(this.table_name,a).then((function(e){var a=e.data;console.log(a);for(var o=a.xData,i=a.yData,r=a.nData,s=a.tData,l=0;l<o.length;l++){var c={x:o[l],y:i[l],mode:"markers",type:"scatter",name:r[l],text:s[l],marker:{size:15}};t.clusterbySourceCell_data.push(c)}var u={title:"Principal Component Analysis (in {{selectList[0].deve}})",xaxis:{title:"Leading logFC dim 1"},yaxis:{title:"Leading logFC dim 2"}};t.clusterbySourceCell_layout=u,n.spinShow1=!1}))}},mounted:function(){this.sequ_type=this.$route.params.sequ_type,this.orga=this.$route.params.orga;this.orga,this.sequ_type;var e="cell_type";this.getCluster_chart3(this.selectList,e,"BM_vivo")}},u=c,h=(a("5716"),a("2877")),p=Object(h["a"])(u,n,o,!1,null,null,null);t["default"]=p.exports},"531b":function(e,t,a){},5352:function(e,t,a){e.exports=a.p+"img/help_scDifferTable.269bda87.png"},"536c":function(e,t,a){"use strict";a("a2fb")},"53b5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("br"),a("h1",{staticClass:"my_h1"},[e._v("Visualization")]),a("br"),a("div",[a("Row",{attrs:{gutter:0}},[a("Col",{attrs:{span:"14"}},[e.spinShow1?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("Plotly",{attrs:{data:e.TSNE_data,layout:e.TSNE_layout,options:e.TSNE_options}})],1),a("Col",{attrs:{span:"8"}},[a("i-form",{attrs:{"label-width":120}},[a("Form-item",{attrs:{label:"Plot size: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Select",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedPlotSize},model:{value:e.plotSize,callback:function(t){e.plotSize=t},expression:"plotSize"}},e._l(e.plotSize_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"View by: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Select",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedViewMethod},model:{value:e.if3D,callback:function(t){e.if3D=t},expression:"if3D"}},e._l(e.viewMethod_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Visual method: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Select view method",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedVisaulMethod},model:{value:e.VisaulMethod,callback:function(t){e.VisaulMethod=t},expression:"VisaulMethod"}},e._l(e.VisaulMethod_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedSource},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Sample: "}},[a("i-select",{attrs:{model:e.showBySample,clearable:"",placeholder:"Pleace select sample",filterable:""},on:{"update:model":function(t){e.showBySample=t},"on-change":e.changedShowSample},model:{value:e.sample,callback:function(t){e.sample=t},expression:"sample"}},e._l(e.group_sample_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Color by: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedGroup},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.group_type_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1),a("Form-item")],1)],1)],1)],1),a("div",[a("h1",{staticClass:"my_h1"},[e._v("Feature Plot")]),a("br"),a("Row",{attrs:{gutter:0}},[a("Col",{attrs:{span:"14"}},[e.spinShow2?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{data:e.Feature_data,layout:e.Feature_layout,options:e.Feature_options}})],1),a("Col",{attrs:{span:"8"}},[a("i-form",{attrs:{"label-width":120}},[a("Form-item",{attrs:{label:"Plot size: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Select",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedPlotSize2},model:{value:e.plotSize2,callback:function(t){e.plotSize2=t},expression:"plotSize2"}},e._l(e.plotSize_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"on-change":e.changedShowGroup2},model:{value:e.source2,callback:function(t){e.source2=t},expression:"source2"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Sample: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"on-change":e.changedShowSample2},model:{value:e.sample,callback:function(t){e.sample=t},expression:"sample"}},e._l(e.group_sample_list2,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Feature name: "}},[a("i-select",{attrs:{"enter-button":"Search",placeholder:"Please input gene symbol",filterable:""},on:{"on-search":function(t){return e.getFeatureByName(t)},"on-change":function(t){return e.getFeatureByName(t)}},model:{value:e.feature_name,callback:function(t){e.feature_name=t},expression:"feature_name"}},e._l(e.keyWords_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1)],1)])},o=[],i=(a("b0c0"),a("d3b7"),a("159b"),a("43e0")),r=a.n(i),s=a("04d1"),l=a("6c9c"),c=a("39b2"),u={name:"scPlotTSNE",components:{VuePlotly:r.a,Plotly:s["Plotly"]},data:function(){return{keyWords_list:[],spinShow1:"true",spinShow2:"true",TSNE_data:[],TSNE_layout:{},contrasts_group:[],TSNE_options:{responsive:!0},Feature_data:[],Feature_layout:{},Feature_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_feature_image",scale:1}},showByGroup:"",showBySample:"",series:this.$store.state.app.CurrentPageToken,source:"",sample:"",sample2:"",source2:"",if3D:"2D",VisaulMethod:"UMAP",group_type_list:[{id:"0",name:"Original identity",value:"orig.ident"},{id:"1",name:"Cell type",value:"celltype"},{id:"2",name:"Phase",value:"Phase"}],group:"",data_source_list:[],data_source_listF:[],group_sample_list:[],group_sample_list2:[],viewMethod_list:[{name:"2D"},{name:"3D"}],plotSize_list:[{name:"2"},{name:"4"},{name:"6"},{name:"8"},{name:"10"}],plotSize:"4",plotSize2:"4",VisaulMethod_list:[{name:"PCA"},{name:"tSNE"},{name:"UMAP"}],colnames:[],feature_name:""}},methods:{getAllscFeatureSplitCell:function(e,t){var a=this;Object(c["b"])(e,t).then((function(e){var t=e.data.keywords;a.feature_name=t[0].name,a.keyWords_list=t}))},getFeatureByName:function(e){var t=this;t.feature_name=e,this.getFeaturePlot(this.series,this.source2,this.sample2,e)},getFeaturePlot:function(e,t,a,n){var o=this,i=this;console.log(this.series),console.log(n),""!=t?""!=n?""!=a?(i.spinShow2=!0,Object(l["o"])(e,t,a,n).then((function(e){var a=e.data;console.log("getFeaturePlotData"),console.log(a);var n=a.featurename;o.feature_name=n,o.searchVivoGene=n;var r=a.x_list,s=a.y_list,l=a.feature_list,c=a.iftsne,u={mode:"markers",type:"scatter",y:s,x:r,marker:{size:o.plotSize2,color:l,colorscale:"Viridis",colorbar:{thickness:20}}};o.Feature_data=[],o.Feature_data.push(u);var h="UMAP 1",p="UMAP 2";!0===c&&(h="tSNE 1",p="tSNE 2");var d={title:o.searchVivoGene+" expression level <br /> ("+o.series+"; Group: "+t+"; Sample: "+o.sample2+")",xaxis:{title:h},yaxis:{title:p},legend:{y:.5,yref:"paper",font:{family:"Arial, sans-serif",size:20,color:"grey"}}};o.Feature_layout=d,i.spinShow2=!1}))):this.$Message.info("please select sample",10):this.$Message.info("please input gene symbol",10):this.$Message.info("please select data source",10)},getTsneChart:function(e,t,a,n,o,i){var r=this,s=this;s.spinShow1=!0,console.log(this.series),Object(l["C"])(e,t,a,n,o,i).then((function(e){var a=e.data;console.log(a);var n=a.xData,o=a.yData,i=a.gData;a.signal;if("PCA"===r.VisaulMethod)var l="PC_1",c="PC_2",u="PC_3",h="PCA";if("UMAP"===r.VisaulMethod)l="UMAP_1",c="UMAP_2",u="UMAP_3",h="UMAP";if("tSNE"===r.VisaulMethod)l="tSNE_1",c="tSNE_2",u="tSNE_3",h="tSNE";if("3D"==r.if3D){for(var p=a.zData,d=[],m=0;m<n.length;m++){var g={x:n[m],y:o[m],z:p[m],mode:"markers",type:"scatter3d",name:i[m],marker:{size:r.plotSize}};d.push(g)}r.TSNE_data=d;var f={title:h+"\tplot <br />("+r.series+"; Group: "+t+"; Sample: "+r.sample+")",scene:{xaxis:{title:l},yaxis:{title:c},zaxis:{title:u}},margin:{l:50,r:50,b:50,t:50}};r.TSNE_layout=f,s.spinShow1=!1}else{var _=[];for(m=0;m<n.length;m++){g={x:n[m],y:o[m],mode:"markers",type:"scatter",name:i[m],marker:{size:r.plotSize}};_.push(g)}r.TSNE_data=_;f={title:h+"\tplot <br /> ("+r.series+"; Group: "+t+"; Sample: "+r.sample+")",xaxis:{title:l},yaxis:{title:c}};r.TSNE_layout=f,s.spinShow1=!1}}))},getTsneCol:function(e,t){var a=this,n=this;Object(l["D"])(e,t).then((function(e){var t=e.data;console.log(t),n.colnames=t,a.group_type_list=[],t.forEach((function(e){return a.group_type_list.push({name:e})}))}))},changedSource:function(e){this.source=e,this.getGroupSampleData(this.series,e),this.getTsneShow()},changedShowSample:function(e){var t=this;t.sample=e,this.getTsneShow()},changedShowSample2:function(e){var t=this;t.sample2=e,this.getFeaturePlot(this.series,this.source2,e,this.feature_name)},changedViewMethod:function(e){this.if3D=e,this.getTsneShow()},changedPlotSize:function(e){this.plotSize=e,this.getTsneShow()},changedPlotSize2:function(e){this.plotSize2=e,this.getFeaturePlot(this.series,this.source2,this.sample2,this.feature_name)},changedVisaulMethod:function(e){this.VisaulMethod=e,this.getTsneShow()},changedShowGroup2:function(e){this.source2=e,this.getGroupSampleData2(this.series,e),this.getFeaturePlot(this.series,this.source2,this.sample2,this.feature_name)},changedGroup:function(e){console.log(e),this.group=e,this.getTsneShow()},getTsneShow:function(){this.getTsneChart(this.series,this.source,this.sample,this.group,this.if3D,this.VisaulMethod)},getDataSourceList:function(e){var t=this;Object(l["E"])(this.series).then((function(e){var a=t,n=e.data;console.log(),console.log(n);var o=n;n.forEach((function(e){a.data_source_list.push({name:e.source_g})})),n.forEach((function(e){"yes"===e.if_anal&&(console.log(e.source_g),a.data_source_listF.push({name:e.source_g}))})),t.source=n[0].source_g,t.getGroupSampleData(t.series,t.source),t.getGroupSampleData2(t.series,t.source),t.if3D="2D",t.group="celltype",t.VisaulMethod="UMAP",t.getTsneChart(t.series,o[0].source_g,t.sample,"celltype","2D","UMAP"),t.source2=n[0].source_g,t.getAllscFeatureSplitCell(t.series,n[0].source_g),t.getFeaturePlot(t.series,n[0].source_g,t.sample2,"needFind")}))},getGroupSampleData:function(e,t){var a=this;a.sample="All",a.group_sample_list=[],a.group_sample_list.push({name:"All"}),Object(l["p"])(e,t).then((function(e){var t=e.data;console.log(),console.log(t),t.forEach((function(e){a.group_sample_list.push({name:e.sample})}))}))},getGroupSampleData2:function(e,t){var a=this;a.sample2="All",a.group_sample_list2=[],a.group_sample_list2.push({name:"All"}),Object(l["p"])(e,t).then((function(e){var t=e.data;console.log(),console.log(t),t.forEach((function(e){a.group_sample_list2.push({name:e.sample})}))}))}},mounted:function(){this.getDataSourceList(this.series)}},h=u,p=(a("71a4"),a("2877")),d=Object(p["a"])(h,n,o,!1,null,null,null);t["default"]=d.exports},5606:function(e,t,a){e.exports=a.p+"img/development1 (2).43fb77e1.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],r=(a("e9c4"),{name:"App",created:function(){var e=this;sessionStorage.getItem("store")&&this.$store.replaceState(Object.assign({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),window.addEventListener("beforeunload",(function(){sessionStorage.setItem("store",JSON.stringify(e.$store.state))}))}}),s=r,l=(a("a191"),a("2877")),c=Object(l["a"])(s,o,i,!1,null,null,null),u=c.exports,h=a("4360"),p=a("a18c"),d=a("e069"),m=a.n(d),g=a("a925"),f=(a("c276"),{home:"首页",login:"登录",components:"组件",count_to_page:"数字渐变",tables_page:"多功能表格",split_pane_page:"分割窗口",markdown_page:"Markdown编辑器",editor_page:"富文本编辑器",icons_page:"自定义图标",img_cropper_page:"图片编辑器",update:"上传数据",join_page:"QQ群",doc:"文档",update_table_page:"上传CSV文件",update_paste_page:"粘贴表格数据",multilevel:"多级菜单",directive_page:"指令",level_1:"Level-1",level_2:"Level-2",level_2_1:"Level-2-1",level_2_3:"Level-2-3",level_2_2:"Level-2-2",level_2_2_1:"Level-2-2-1",level_2_2_2:"Level-2-2-2",excel:"Excel","upload-excel":"上传excel","export-excel":"导出excel",tools_methods_page:"工具函数",drag_list_page:"拖拽列表",i18n_page:"多语言",modalTitle:"模态框题目",content:"这是模态框内容",buttonText:"显示模态框","i18n-tip":"注：仅此页做了多语言，其他页面没有在多语言包中添加语言内容",error_store_page:"错误收集",error_logger_page:"错误日志",query:"带参路由",params:"动态路由",cropper_page:"图片裁剪",message_page:"消息中心",tree_table_page:"树状表格",org_tree_page:"组织结构树",drag_drawer_page:"可拖动抽屉",tree_select_page:"树状下拉选择器",Eryth_index:"红系分化数据集",Erythropoiesis:"红系分化",Dataset_service:"数据分析"}),_={home:"首頁",login:"登錄",components:"组件",count_to_page:"数字渐变",tables_page:"多功能表格",split_pane_page:"分割窗口",markdown_page:"Markdown編輯器",editor_page:"富文本編輯器",icons_page:"自定義圖標",img_cropper_page:"圖片編輯器",update:"上傳數據",join_page:"QQ群",doc:"文檔",update_table_page:"上傳CSV文件",update_paste_page:"粘貼表格數據",multilevel:"多级菜单",directive_page:"指令",level_1:"Level-1",level_2:"Level-2",level_2_1:"Level-2-1",level_2_3:"Level-2-3",level_2_2:"Level-2-2",level_2_2_1:"Level-2-2-1",level_2_2_2:"Level-2-2-2",excel:"Excel","upload-excel":"上傳excel","export-excel":"導出excel",tools_methods_page:"工具函數",drag_list_page:"拖拽列表",i18n_page:"多語言",modalTitle:"模態框題目",content:"這是模態框內容",buttonText:"顯示模態框","i18n-tip":"注：僅此頁做了多語言，其他頁面沒有在多語言包中添加語言內容",error_store_page:"錯誤收集",error_logger_page:"錯誤日誌",query:"帶參路由",params:"動態路由",cropper_page:"圖片裁剪",message_page:"消息中心",tree_table_page:"樹狀表格",org_tree_page:"組織結構樹",drag_drawer_page:"可拖動抽屜",tree_select_page:"樹狀下拉選擇器"},v={home:"Home",login:"Login",components:"Components",count_to_page:"Count-to",tables_page:"Table",split_pane_page:"Split-pane",markdown_page:"Markdown-editor",editor_page:"Rich-Text-Editor",icons_page:"Custom-icon",img_cropper_page:"Image-editor",update:"Update",doc:"Document",join_page:"QQ Group",update_table_page:"Update .CSV",update_paste_page:"Paste Table Data",multilevel:"multilevel",directive_page:"Directive",level_1:"Level-1",level_2:"Level-2",level_2_1:"Level-2-1",level_2_3:"Level-2-3",level_2_2:"Level-2-2",level_2_2_1:"Level-2-2-1",level_2_2_2:"Level-2-2-2",excel:"Excel","upload-excel":"Upload Excel","export-excel":"Export Excel",tools_methods_page:"Tools Methods",drag_list_page:"Drag-list",i18n_page:"Internationalization",modalTitle:"Modal Title",content:"This is the modal box content.",buttonText:"Show Modal","i18n-tip":"Note: Only this page is multi-language, other pages do not add language content to the multi-language package.",error_store_page:"Error Collection",error_logger_page:"Error Logger",query:"Query",params:"Params",cropper_page:"Cropper",message_page:"Message Center",tree_table_page:"Tree Table",org_tree_page:"Org Tree",drag_drawer_page:"Draggable Drawer",tree_select_page:"Tree Selector",Eryth_index:"Erythropoiesis-index",Erythropoiesis:"Erythropoiesis",Dataset_service:"Dataset-service"},b=a("cea3"),y=a("641c"),C=a("97b7");n["default"].use(g["a"]);navigator.language;var S="en-US";n["default"].config.lang=S,n["default"].locale=function(){};var w={"zh-CN":Object.assign(b["a"],f),"zh-TW":Object.assign(C["a"],_),"en-US":Object.assign(y["a"],v)},x=new g["a"]({locale:S,messages:w}),k=x,P=(a("dcad"),a("f121")),D=a("313e"),O=a("ea7f"),T=a("56e0"),E=a("4452"),G=a.n(E),z=a("4523"),B=a.n(z),M=a("b6d1"),A=a.n(M),j=a("0319"),R=a.n(j),I=a("33c6"),F=a.n(I);T(O),n["default"].prototype.$echarts=D,F()(O),B()(O),A()(O),R()(O),n["default"].use(G.a),n["default"].use(m.a,{i18n:function(e,t){return k.t(e,t)},transfer:!0,size:"large",select:{arrow:"md-arrow-dropdown",arrowSize:20}}),n["default"].config.lang="en-US",n["default"].locale("en-US",y["a"]),n["default"].config.productionTip=!1,n["default"].prototype.$config=P["a"],new n["default"]({el:"#app",router:p["a"],store:h["a"],i18n:k,components:{App:u},render:function(e){return e(u)}})},5716:function(e,t,a){"use strict";a("a90d")},"574e":function(e,t,a){e.exports=a.p+"img/help_datasetDetial.f68305de.png"},"58cc":function(e,t,a){e.exports=a.p+"img/help_downloadAnalData.a4d39d26.png"},"58de":function(e,t,a){e.exports=a.p+"img/help_scDiffer.64d7e65f.png"},"5aa8":function(e,t,a){"use strict";a("e7c7")},"5b59":function(e,t,a){"use strict";a("a968")},6072:function(e,t,a){e.exports=a.p+"img/help_scFeature.32e6544d.png"},6389:function(e,t,a){},"64a5":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("custom-bread-crumb",{staticClass:"header-bar",attrs:{"show-icon":"",list:e.breadCrumbList}})],1)},o=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",[e._l(e.list.slice(0,e.list.length-1),(function(t){return a("BreadcrumbItem",{key:"bread-crumb-"+t.name,staticClass:"breadCru",attrs:{to:t.to}},[a("Icon",{attrs:{type:t.icon||""}}),e._v(" "+e._s(e.showTitle(t))+" ")],1)})),e._l(e.list.slice(e.list.length-1,e.list.length),(function(t){return a("BreadcrumbItem",{key:"bread-crumb-"+t.name,staticClass:"breadCru"},[a("Icon",{attrs:{type:t.icon||""}}),e._v(" "+e._s(e.showTitle(t))+" ")],1)}))],2)],1)},r=[],s=a("c276"),l={name:"customBreadCrumb",props:{list:{type:Array,default:function(){return[]}}},computed:{seeList:function(){alert(this.list)}},methods:{showTitle:function(e){return Object(s["g"])(e,this)}}},c=l,u=(a("b324"),a("2877")),h=Object(u["a"])(c,i,r,!1,null,null,null),p=h.exports,d=p,m={name:"HeaderBar",components:{customBreadCrumb:d},props:{collapsed:Boolean},computed:{breadCrumbList:function(){return this.$store.state.app.breadCrumbList}},methods:{}},g=m,f=(a("0337"),Object(u["a"])(g,n,o,!1,null,null,null)),_=f.exports;t["a"]=_},"66df":function(e,t,a){"use strict";var n=a("d4ec"),o=a("bee2"),i=(a("caad"),a("2532"),a("b64b"),a("d3b7"),a("e9c4"),a("bc3a")),r=a.n(i),s=a("4360"),l=a("c276"),c=function(e){var t=e.statusText,a=e.status,n=e.request.responseURL,o={type:"ajax",code:a,mes:t,url:n};n.includes("save_error_logger")||s["a"].dispatch("addErrorLog",o)},u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:baseURL;Object(n["a"])(this,e),this.baseUrl=t,this.queue={}}return Object(o["a"])(e,[{key:"getInsideConfig",value:function(){var e={baseURL:this.baseUrl,headers:{}};return e}},{key:"destroy",value:function(e){delete this.queue[e],Object.keys(this.queue).length}},{key:"interceptors",value:function(e,t){var a=this;e.interceptors.request.use((function(e){return Object.keys(a.queue).length,a.queue[t]=!0,e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){a.destroy(t);var n=e.data,o=e.status;return{data:n,status:o}}),(function(e){a.destroy(t),console.log(e);var n=e.response;if(Object(l["a"])(e.response.status),!n){var o=JSON.parse(JSON.stringify(e)),i=o.request,r=i.statusText,s=i.status,u=o.config;n={statusText:r,status:s,request:{responseURL:u.url}}}return c(n),Promise.reject(e)}))}},{key:"request",value:function(e){var t=r.a.create();return e=Object.assign(this.getInsideConfig(),e),this.interceptors(t,e.url),t(e)}}]),e}(),h=u,p=a("f121"),d=p["a"].baseUrl.pro,m=new h(d);t["a"]=m},"6c9c":function(e,t,a){"use strict";a.d(t,"f",(function(){return o})),a.d(t,"r",(function(){return i})),a.d(t,"l",(function(){return r})),a.d(t,"g",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"x",(function(){return c})),a.d(t,"z",(function(){return u})),a.d(t,"m",(function(){return h})),a.d(t,"q",(function(){return p})),a.d(t,"F",(function(){return d})),a.d(t,"E",(function(){return m})),a.d(t,"p",(function(){return g})),a.d(t,"y",(function(){return f})),a.d(t,"D",(function(){return _})),a.d(t,"j",(function(){return v})),a.d(t,"B",(function(){return b})),a.d(t,"C",(function(){return y})),a.d(t,"A",(function(){return C})),a.d(t,"o",(function(){return S})),a.d(t,"s",(function(){return w})),a.d(t,"n",(function(){return x})),a.d(t,"e",(function(){return k})),a.d(t,"c",(function(){return P})),a.d(t,"d",(function(){return D})),a.d(t,"u",(function(){return O})),a.d(t,"v",(function(){return T})),a.d(t,"t",(function(){return E})),a.d(t,"w",(function(){return G})),a.d(t,"i",(function(){return z})),a.d(t,"k",(function(){return B})),a.d(t,"G",(function(){return M})),a.d(t,"h",(function(){return A}));var n=a("66df"),o=function(e){return n["a"].request({url:"public/getDatasetByDateset",data:{dataset:e},method:"post"})},i=function(e){return n["a"].request({url:"public/getPCAData",data:{dataset:e},method:"post",contentType:"application/octet-stream",responseType:"arraybuffer"})},r=function(e,t,a){return n["a"].request({url:"public/getExportEnrichData",data:{series:e,diff_group:t,goType:a},method:"post",contentType:"application/octet-stream",responseType:"arraybuffer"})},s=function(e){return n["a"].request({url:"public/getDatasetGroup",data:{dataset:e},method:"post"})},l=function(e,t){return n["a"].request({url:"public/getAllExpreStack",data:{dataset:e,tableTypes:t},method:"post"})},c=function(e,t){return n["a"].request({url:"public/getSequenceEchartByTabletype",data:{dataset:e,tableType:t},method:"post"})},u=function(e,t,a){return n["a"].request({url:"public/getSpecifExpreOptionsByName",data:{series:e,tableType:t,specif_name:a},method:"post"})},h=function(e,t){return n["a"].request({url:"public/getExpreRange",data:{dataset:e,tableType:t},method:"post"})},p=function(e,t){return n["a"].request({url:"public/getMicroInfo",data:{micType:e,value:t},method:"post"})},d=function(e){return n["a"].request({url:"public/getDiffGroup",data:{table_name:e},method:"post"})},m=function(e){return n["a"].request({url:"public/getTsneGroup",data:{series:e},method:"post"})},g=function(e,t){return n["a"].request({url:"public/getSCGroupSample",data:{series:e,group:t},method:"post"})},f=function(e,t){return n["a"].request({url:"public/getSigName",data:{series:e,source:t},method:"post"})},_=function(e,t){return n["a"].request({url:"public/getTsneDataCol",data:{series:e,group:t},method:"post"})},v=function(e,t,a){return n["a"].request({url:"public/getEachSig",data:{series:e,source:t,sigName:a},method:"post"})},b=function(e,t){return n["a"].request({url:"public/getTraDataCol",data:{series:e,group:t},method:"post"})},y=function(e,t,a,o,i,r){return n["a"].request({url:"public/getTsneData",data:{series:e,source:t,sample:a,col:o,if3D:i,VisualM:r},method:"post"})},C=function(e,t,a){return n["a"].request({url:"public/getTraData",data:{series:e,source:t,col:a},method:"post"})},S=function(e,t,a,o){return n["a"].request({url:"public/getFeaturePlot",data:{series:e,source:t,sample:a,featurename:o},method:"post"})},w=function(e,t){return n["a"].request({url:"public/getPseudo",data:{series:e,source:t},method:"post"})},x=function(e,t,a,o){return n["a"].request({url:"public/getFeatureBygroup",data:{series:e,source:t,feature_name:a,cluster_list:o},method:"post"})},k=function(e,t){return n["a"].request({url:"public/getClusterMarker",data:{series:e,source:t},method:"post"})},P=function(e,t){return n["a"].request({url:"public/getClusterEncihGroup",data:{series:e,source:t},method:"post"})},D=function(e,t,a,o){return n["a"].request({url:"public/getClusterEnrich",data:{series:e,source:t,group:a,enrichType:o},method:"post"})},O=function(e){return n["a"].request({url:"public/getSCDiffContrastGroup",data:{series:e},method:"post"})},T=function(e){return n["a"].request({url:"public/getSCEnrichContrastGroup",data:{series:e},method:"post"})},E=function(e,t,a,o){return n["a"].request({url:"public/getSCClusterDiff",data:{series:e,group:t,foldChange:a,Pvalue:o},method:"post"})},G=function(e,t,a){return n["a"].request({url:"public/getScDiffEnrich",data:{series:e,group:t,enrichType:a},method:"post"})},z=function(e,t,a,o){return n["a"].request({url:"public/getDiffData",data:{series:e,diff_group:t,foldChange:a,Pvalue:o},method:"post"})},B=function(e,t,a){return n["a"].request({url:"public/getEnrichData",data:{series:e,contrGroupOfEnrich:t,goType:a},method:"post"})},M=function(e){return n["a"].request({url:"public/getsimData",data:{series:e},method:"post"})},A=function(e){return n["a"].request({url:"public/getDatasetSourceInfoData",data:{series:e},method:"post"})}},"71a4":function(e,t,a){"use strict";a("6389")},"76d7":function(e,t,a){e.exports=a.p+"img/gene.03d89c7b.png"},7887:function(e,t,a){e.exports=a.p+"img/help_scContribution.303d7a5b.png"},7951:function(e,t,a){"use strict";a("229f")},"7bd8":function(e,t,a){"use strict";a("531b")},"806e":function(e,t,a){},"80eb":function(e,t,a){e.exports=a.p+"img/help_homePage.svg.c2a86303.png"},8184:function(e,t,a){"use strict";a("ecdb")},"84dc":function(e,t,a){e.exports=a.p+"img/help_BulkPCA.3ac7ab65.png"},8586:function(e,t,a){e.exports=a.p+"img/help_scPseu.0e59ba30.png"},8641:function(e,t,a){},"888d":function(e,t,a){},"8f69":function(e,t,a){e.exports=a.p+"img/help_downloadData.272a76ae.png"},"8f72":function(e,t,a){e.exports=a.p+"img/help_BulkEnrich.4af4bfa6.png"},9072:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lay_out"},[a("Row",[a("h1",{staticClass:"my_h1"},[e._v("Single Cell Interaction Atlas")]),a("br"),a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"10"}},[a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{staticStyle:{width:"80%"},attrs:{placeholder:"Select cell source",clearable:"",filterable:""},on:{"on-change":e.changedSourceGroup},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"10"}},[a("Form-item",{attrs:{label:"Communication type: "}},[a("i-select",{attrs:{placeholder:"Select communication type",clearable:"",filterable:""},on:{"on-change":e.changedCommType},model:{value:e.comm_type,callback:function(t){e.comm_type=t},expression:"comm_type"}},e._l(e.comm_type_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)],1),a("br"),a("br")],1),a("br"),a("Row",[a("div",[a("div",{staticStyle:{width:"100%",height:"300%","text-aglign":"center",margin:"0 auto"},attrs:{id:"Net_view"}})])]),a("br"),a("br")],1)},o=[],i=a("ade3"),r=(a("d3b7"),a("159b"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("99af"),a("b0c0"),a("d81d"),a("6c9c")),s=a("e6ca"),l=(a("313e"),a("43e0")),c=a.n(l),u={name:"ScInterraction",components:{VuePlotly:c.a},data:function(){var e;return e={dataset_name:this.$store.state.app.CurrentPageToken,comm_type:"",comm_type2:"",enrichGO_layout:{},enrichGO_options:{responsive:!0},contrasts_group:[],contrastsGroup:"",source:"",source2:"",contrGroupOfEnrich:"",GOformItem:{},spinShow2:"true",series:this.$store.state.app.CurrentPageToken,enrichGroup:""},Object(i["a"])(e,"contrasts_group",[]),Object(i["a"])(e,"enrichGroupList",[]),Object(i["a"])(e,"table_name","all_rna_dev_bulk_vivo"),Object(i["a"])(e,"data_source_list",[]),Object(i["a"])(e,"data_source_list2",[]),Object(i["a"])(e,"comm_type_list",[{name:"all"},{name:"growth factor"},{name:"other"},{name:"cytokine"},{name:"checkpoint"}]),e},methods:{getDataSourceList:function(e){var t=this;Object(r["E"])(this.series).then((function(e){var a=t,n=e.data;console.log(n);var o=n;t.source=o[0].source_g,n.forEach((function(e){console.log(e.source_g),a.data_source_list.push({name:e.source_g}),a.data_source_list2.push({name:e.source_g})}));var i=t.series;t.comm_type="all",t.getNetView(i,t.source,"all")}))},download:function(){var e=window.document.querySelector("#download");e.addEventListener("click",(function(){var t=document.querySelector("svg").outerHTML,a=new Blob([t],{type:"xml/svg"});e.href=URL.createObjectURL(a),e.download="test.svg"}))},getCellSource:function(){Object(s["g"])().then((function(e){for(var t=e.data.dev_types,a=0;a<t.length;a++);}))},getNetView:function(e,t,a){var n=this,o=this.$echarts.init(document.getElementById("Net_view"),null,{renderer:"svg"});o.showLoading(),Object(s["i"])(e,t,a).then((function(e){o.hideLoading();var t=e.data;console.log(t);for(var i=t.nodes,r=t.links,s=t.categories,l=[],c=[],u=0;u<s.length;u++){l[u]={name:s[u]};for(var h=[],p=0;p<i.length;p++)s[u]===i[p].category&&0===i[p].c_f&&h.push(i[p]);for(p=0;p<i.length;p++)s[u]===i[p].category&&1===i[p].c_f&&h.push(i[p]);console.log(h),c=c.concat(h)}console.log(c),c.forEach((function(e){e.id=e.id,e.value=e.symbolSize,e.symbolSize/=1.5,e.label={normal:{show:e.name}},e.category=e.category}));var d={title:{text:"Top 40 ligand-receptor pairs of "+a+" ("+n.series+"; Group: "+n.source+")",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0,excludeComponents:["toolbox"],pixelRatio:2,name:"inter_image"}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:[{data:l.map((function(e){return e.name})),bottom:"0px"}],animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{name:"Top 40 "+a+" factor("+n.series+")",type:"graph",layout:"circular",circular:{rotateLabel:!0},data:c,links:r,categories:l,roam:!0,label:{position:"right",formatter:"{b}"},edgeSymbol:["no","arrow"],edgeSymbolSize:[.4,10]}]};o.setOption(d)}))},getLRPlot_chart:function(e,t,a){var n=this.$echarts.init(document.getElementById("LRPlot_view"));n.showLoading(),alert(t),Object(s["i"])(e,t,a).then((function(e){n.hideLoading();var t=e.data;console.log(t);for(var o=t.nodes,i=t.links,r=t.categories,s=[],l=[],c=0;c<r.length;c++){s[c]={name:r[c]};for(var u=[],h=0;h<o.length;h++)r[c]===o[h].category&&0===o[h].c_f&&u.push(o[h]);for(h=0;h<o.length;h++)r[c]===o[h].category&&1===o[h].c_f&&u.push(o[h]);console.log(u),l=l.concat(u)}console.log(l),l.forEach((function(e){e.id=e.id,e.value=e.symbolSize,e.symbolSize/=1.5,e.label={normal:{show:e.name}},e.category=e.category}));var p={title:{text:"Top 40 "+a+" factor",subtext:"Circular layout",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},feature:{saveAsImage:{}},legend:[{data:s.map((function(e){return e.name})),bottom:"0px"}],animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{name:"Top 40 ligand-receptor pairs of "+a,type:"graph",layout:"circular",circular:{rotateLabel:!0},data:l,links:i,categories:s,roam:!0,label:{position:"right",formatter:"{b}"},edgeSymbol:["no","arrow"],edgeSymbolSize:[.4,10]}]};n.setOption(p)}))},changedContrGroupOfEnrich:function(e){var t=[],a=this,n=e.split("-");n.forEach((function(e){return t.push({name:e})})),a.enrichGroupList=t,this.contrGroupOfEnrich=e},changeGoType:function(e){this.goType=e},changenrichType:function(e){this.enrichGroup=e},changedCommType:function(e){this.comm_type=e;var t=this.series;this.getNetView(t,this.source,e)},changedCommType2:function(e){this.comm_type2=e;var t=this.series;this.getLRPlot_chart(t,this.source,e)},changedSourceGroup:function(e){this.source=e;var t=this.series;this.getNetView(t,this.source,this.comm_type)},changedSourceGroup2:function(e){this.source2=e}},mounted:function(){this.getDataSourceList(this.series);var e=document.getElementById("Net_view"),t=function(){e.style.height=.8*window.innerHeight+"px",e.style.width=.7*window.innerWidth+"px"};t();var a=this.$echarts.init(e),n={};a.setOption(n),window.onresize=function(){t(),console.log("=="),a.resize()}}},h=u,p=(a("2be6"),a("2877")),d=Object(p["a"])(h,n,o,!1,null,null,null);t["default"]=d.exports},9144:function(e,t,a){"use strict";a("27d5")},"924a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("br"),a("h1",{staticClass:"my_h1"},[e._v("Differential Analysis")]),a("br"),a("div",[a("Row",[a("Col",{attrs:{span:"16"}},[e.spinShow1?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{data:e.diff_data,layout:e.diff_layout,options:e.diff_options}})],1),a("Col",{attrs:{span:"8"}},[a("i-form",{attrs:{"label-width":120}},[a("Form-item",{attrs:{label:"Comparsion group: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select contrasts group"},on:{"on-change":e.changedContrGroup},model:{value:e.contrastsGroup,callback:function(t){e.contrastsGroup=t},expression:"contrastsGroup"}},e._l(e.contrasts_group,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1),a("span",[e._v(" e.g, late_basoE-orthoE means the late_basoE group versus the orthoE group ")])],1),a("Form-item",{attrs:{label:"Absolute Fold Change: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select change fold"},on:{"on-change":e.changedFoldChange},model:{value:e.foldChange,callback:function(t){e.foldChange=t},expression:"foldChange"}},e._l(e.fold_change,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"P value: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select change fold"},on:{"on-change":e.changedPvalue},model:{value:e.Pvalue,callback:function(t){e.Pvalue=t},expression:"Pvalue"}},e._l(e.PValue_change,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("span",[e._v("Input gene symbol:")]),a("Input",{attrs:{search:"","enter-button":"Search",placeholder:e.search_placeholder},on:{"on-search":function(t){return e.searchDiffDataSetByKeyName(t)}}})],1)],1),a("br"),a("Row",[a("Table",{ref:"table",attrs:{columns:e.diffCols,data:e.diffData,size:"small"},on:{"on-sort-change":e.onSortTable}}),e.spinShowTypeSource?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.totalRow,current:e.currentPage,"page-size":e.pageSize,"show-total":"","show-sizer":""},on:{"on-change":e.handleCurrentChange,"on-page-size-change":e.handleSizeChange}})],1)])],1),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){return e.exportData(1)}}},[a("Icon",{attrs:{type:"ios-download-outline"}}),e._v("Download Data")],1)],1)])},o=[],i=(a("4de4"),a("d3b7"),a("159b"),a("fb6a"),a("ddd7")),r=a("43e0"),s=a.n(r),l=a("6c9c"),c=a("39b2"),u={0:{value:">0.05",name:">0.05"},1:{value:"=<0.05",name:"=<0.05"}},h={name:"Diff_analysis",components:{VuePlotly:s.a,FilterTable:i["a"]},data:function(){return{series:this.$store.state.app.CurrentPageToken,spinShow1:"true",search_placeholder:"Please input gene symbol",Dsource:"",Dgrowth_mode:"",spinShowTypeSource:!0,inputGenePat:"",diff_data:[],diff_layout:{},contrasts_group:[],foldChange:0,Pvalue:.05,fold_change:[{name:">=0",value:"0"},{name:">=0.5",value:"0.5"},{name:">=1",value:"1"},{name:">=1.5",value:"1.5"},{name:">=2",value:"2"},{name:">=2.5",value:"2.5"},{name:">=3",value:"3"}],PValue_change:[{name:"=<0.05",value:"0.05"},{name:"=<0.01",value:"0.01"},{name:"=<0.001",value:"0.05"},{name:"=<0.0001",value:"0.0001"},{name:"=<0.00001",value:"0.00001"}],diff_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"diff_image",height:500,scale:1}},diffData:[],contrastsGroup:"",totalRow:400,currentPage:1,pageSize:10,table_name:"all_rna_dev_bulk_vivo",diffCols:[{title:"Symbol",key:"SYMBOL",fixed:"left"},{title:"logFC",key:"logFC",sortable:"custom",filter:{type:"Input"}},{title:"logCPM",key:"logCPM",sortable:"custom",filter:{type:"Input"}},{title:"FDR",key:"FDR",sortable:"custom",filter:{type:"Input"}},{title:"P.value",key:"P.Value",sortable:"custom",filter:{type:"Select",option:u}}],sortableKey:"",sortableOrder:""}},methods:{onSortTable:function(e){e.column;var t=e.key,a=e.order;this.sortableKey=t,this.sortableOrder=a,this.handleSortTable()},exportData:function(e){1===e?this.$refs.table.exportCsv({filename:"diff_data"}):2===e?this.$refs.table.exportCsv({filename:"排序和过滤后的数据",original:!1}):3===e&&this.$refs.table.exportCsv({filename:"自定义数据",columns:this.columns8.filter((function(e,t){return t<4})),data:this.data7.filter((function(e,t){return t<4}))})},handleCurrentChange:function(e){this.currentPage=e,this.mockTableData(this.series,this.currentPage,this.pageSize,this.contrastsGroup)},handleSizeChange:function(e){this.pageSize=e,this.mockTableData(this.series,this.currentPage,this.pageSize,this.contrastsGroup)},mockTableData:function(e,t,a,n){var o=this;o.spinShowTypeSource=!0,Object(c["o"])(e,t,a,n).then((function(e){o.spinShowTypeSource=!1;var t=e.data;1==t.signal&&(o.diffData=t.list,o.totalRow=t.total)}))},handleSortTable:function(){if("normal"!==this.sortableOrder){var e=this;e.spinShowTypeSource=!0,""==this.inputGenePat?Object(c["q"])(this.sortableKey,this.sortableOrder,this.series,this.currentPage,this.pageSize,this.contrastsGroup).then((function(t){e.spinShowTypeSource=!1;var a=t.data;1==a.signal&&(e.diffData=a.list,e.totalRow=a.total)})):Object(c["r"])(this.inputGenePat,this.sortableKey,this.sortableOrder,this.series,this.currentPage,this.pageSize,this.contrastsGroup).then((function(t){e.spinShowTypeSource=!1;var a=t.data;1==a.signal&&(e.diffData=a.list,e.totalRow=a.total)}))}},searchDiffDataSetByKeyName:function(e){var t=this;if(""==e)return t.inputGenePat="",this.$Message.info("Please input gene symbol",10),void this.mockTableData(this.series,this.currentPage,this.pageSize,this.contrastsGroup);t.spinShowTypeSource=!0,t.inputGenePat=e,Object(c["p"])(e,this.series,this.currentPage,this.pageSize,this.contrastsGroup).then((function(e){t.spinShowTypeSource=!1;var a=e.data;1==a.signal&&(t.diffData=a.list,t.totalRow=a.total)}))},getdiff_group:function(e){var t=this,a=[];Object(l["F"])(e).then((function(e){var n=e.data;n.forEach((function(e){return a.push({name:e})})),t.contrasts_group=a,t.getdiff_chart(t.series,n[0],t.foldChange,t.Pvalue),t.foldChange=">0",t.Pvalue="=<0.05",t.contrastsGroup=n[0],t.mockTableData(t.series,t.currentPage,t.pageSize,n[0])}))},getdiff_chart:function(e,t,a,n){var o=this,i=this;i.spinShow1=!0,Object(l["i"])(this.series,t,a,n).then((function(e){var a=e.data,n=[{x:a.no_signifcant.logFC,y:a.no_signifcant.adj_P_Val,mode:"markers",type:"scatter",name:"Not signifcant",text:a.no_signifcant.genes,marker:{size:4}},{x:a.signifcant.logFC,y:a.signifcant.adj_P_Val,mode:"markers",type:"scatter",name:"Signifcant",text:a.signifcant.genes,marker:{size:4}}];o.diff_data=n;var r=o.Dgrowth_mode[0].toUpperCase(),s=o.Dgrowth_mode.slice(1),l=r+s,c={title:"Differential analysis of "+t+" ("+o.series+"; Experiment type: "+l+")",xaxis:{title:"Log2(FC)"},yaxis:{title:"-Log10(P value)"}};o.diff_layout=c,i.spinShow1=!1}))},changedContrGroup:function(e){var t=this;t.contrastsGroup=e,this.getdiff_chart(this.series,e,this.foldChange,this.Pvalue),this.contrastsGroup=e,this.mockTableData(this.series,this.currentPage,this.pageSize,e)},changedFoldChange:function(e){var t=this;t.foldChange=e,this.getdiff_chart(this.series,this.contrastsGroup,t.foldChange,this.Pvalue)},changedPvalue:function(e){var t=this;t.Pvalue=e,this.getdiff_chart(this.series,this.contrastsGroup,this.foldChange,t.Pvalue)},getDatasetSourceInfo:function(e){var t=this;Object(l["h"])(this.series).then((function(e){var a=e.data;t.Dsource=a.source,t.Dgrowth_mode=a.growth_mode}))}},mounted:function(){this.getDatasetSourceInfo(this.series),this.getdiff_group(this.series)}},p=h,d=(a("8184"),a("2877")),m=Object(d["a"])(p,n,o,!1,null,null,null);t["default"]=m.exports},"960d":function(e,t,a){e.exports=a.p+"img/help_homeGenes.dcd2b98e.png"},9920:function(e,t,a){e.exports=a.p+"img/help_BulkDiffTable.8a6706fc.png"},"9a13":function(e,t,a){"use strict";a("aa92")},"9b18":function(e,t,a){},"9b41":function(e,t,a){},"9e25":function(e,t,a){},a0ee:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lay_out"},[a("h1",{staticClass:"my_h1"},[e._v("Single Cell Communication Pattern")]),a("br"),a("div",[a("Row",[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{staticStyle:{width:"80%"},attrs:{placeholder:"Select cell source",clearable:"",filterable:""},on:{"on-change":e.changedSourceGroup},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Signal pattern: "}},[a("i-select",{attrs:{model:e.contrastsGroup,clearable:"",placeholder:"Please select signal pattern",filterable:""},on:{"update:model":function(t){e.contrastsGroup=t},"on-change":e.changedSigPattern},model:{value:e.sigPattern,callback:function(t){e.sigPattern=t},expression:"sigPattern"}},e._l(e.sigPattern_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",{attrs:{gutter:4}},[a("Col",{attrs:{span:"8"}},[a("highcharts",{staticClass:"river_container",attrs:{options:e.Cell_Chart_RiverCell}})],1),a("Col",{attrs:{span:"16"}},[a("div",[a("highcharts",{staticClass:"river_container",attrs:{options:e.Cell_Chart_RiverPath}})],1)])],1)],1),a("br"),a("br"),a("div",{staticClass:"pathway_info"},[a("br"),a("Row",[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"10"}},[a("Form-item",{attrs:{label:"Signal name: "}},[a("i-select",{attrs:{model:e.contrastsGroup,clearable:"",placeholder:"Please select signal name",filterable:""},on:{"update:model":function(t){e.contrastsGroup=t},"on-change":e.changedSigName},model:{value:e.siName,callback:function(t){e.siName=t},expression:"siName"}},e._l(e.sigName_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",[a("vue-plotly",{attrs:{watchShallow:e.ifResize,autoResize:e.ifResize,data:e.CellChartHotMap_data,layout:e.CellChartHotMap_layout,options:e.CellChartHotMap_options}})],1),a("br"),a("br"),a("Row",[a("div",[a("highcharts",{staticClass:"Rcontri_container",attrs:{options:e.Cell_Chart_Rcontri}})],1)])],1),a("br")])},o=[],i=a("ade3"),r=(a("d3b7"),a("159b"),a("ac1f"),a("5319"),a("b0c0"),a("99af"),a("d81d"),a("6c9c")),s=a("e6ca"),l=a("43e0"),c=a.n(l),u={name:"ScCommunication",components:{VuePlotly:c.a},data:function(){var e;return e={sigPattern_list:[{name:"incoming"},{name:"outgoing"}],sigName_list:[],sigPattern:"",data_source_list:[],Cell_Chart_RiverCell:{credits:{enabled:!1}},Cell_Chart_RiverPath:{},Cell_Chart_Rcontri:{},ifResize:!0,CellChartHotMap_layout:{},CellChartHotMap_data:[],CellChartHotMap_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_sigRole_image",height:500,width:700,scale:1}},dataset_name:"erthy",comm_type:"all",enrichGO_layout:{},enrichGO_options:{responsive:!0},contrasts_group:[],contrastsGroup:"",source:"",contrGroupOfEnrich:"",GOformItem:{},spinShow2:"true",series:this.$store.state.app.CurrentPageToken,enrichGroup:""},Object(i["a"])(e,"contrasts_group",[]),Object(i["a"])(e,"enrichGroupList",[]),e},methods:{getDataSourceList:function(e){var t=this;Object(r["E"])(e).then((function(a){var n=t,o=a.data;console.log(o);var i=o;t.source=i[0].source_g,o.forEach((function(e){console.log(e.source_g),n.data_source_list.push({name:e.source_g})}));var r="incoming";t.sigPattern=r,t.getCellChartView(i[0].source_g,r),t.getSigNameList(e,i[0].source_g)}))},getSigNameList:function(e,t){var a=this;this.sigName_list=[],Object(r["y"])(e,t).then((function(e){var t=e.data;console.log(t);t.forEach((function(e){return a.sigName_list.push({name:e.replace("TGFb","TGFβ")})})),a.siName=a.sigName_list[0].name,a.getCellChartHotMap(a.series,a.source,t[0]),a.getCellChartRcontri(a.series,a.source,t[0])}))},geteSigPathNet_chart:function(e,t,a){var n=this,o=this.$echarts.init(document.getElementById("eSigPathNet"));o.showLoading(),this.spinShow2=!0,Object(s["k"])(e,t,a).then((function(e){o.hideLoading();var i=e.data;console.log(i);for(var r=i.nodes,s=i.links,l=i.categories,c=[],u=[],h=0;h<l.length;h++){c[h]={name:l[h]};for(var p=[],d=0;d<r.length;d++)l[h]===r[d].category&&0===r[d].c_f&&p.push(r[d]);for(d=0;d<r.length;d++)l[h]===r[d].category&&1===r[d].c_f&&p.push(r[d]);console.log(p),u=u.concat(p)}console.log(u),u.forEach((function(e){e.id=e.id,e.value=e.symbolSize,e.symbolSize=e.symbolSize,e.label={normal:{show:e.name}},e.category=e.category}));var m={title:{text:a.replace("TGFb","TGFβ")+" signaling pathway",subtext:n.series+" "+t,top:"top"},tooltip:{},legend:[{data:c.map((function(e){return e.name})),top:"bottom"}],animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{name:"Les Miserables",type:"graph",layout:"circular",circular:{rotateLabel:!0},data:u,links:s,categories:c,roam:!0,label:{position:"right",formatter:"{b}"},edgeSymbol:["no","arrow"],edgeSymbolSize:[.4,10]}]};o.setOption(m)}))},getCellChartHotMap:function(e,t,a){var n=this;Object(r["j"])(e,t,a).then((function(e){var o=e.data;console.log("I am query"),console.log(o);var i=[{z:o.zData,x:o.xData,y:["Sender","Receiver","Mediator","Influencer"],type:"heatmap",hoverongaps:!1}],r={title:a.replace("TGFb","TGFβ")+" signaling pathway ("+n.series+"; Group: "+t+")",xaxis:{title:"Cell type",tickmode:"array",automargin:!0,titlefont:{size:15}},yaxis:{title:"Signal role name",tickmode:"array",automargin:!0,titlefont:{size:15}}};n.CellChartHotMap_data=i,n.CellChartHotMap_layout=r}))},getCellChartView:function(e,t){var a=this,n=t;Object(s["f"])(this.series,e,n).then((function(n){console.log("back sig pattern");var o=n.data;console.log(o.netSigCell);var i={title:{text:"Communication ("+t+") patterns ("+a.series+"; Group: "+e+")"},credits:{enabled:!1},series:[{keys:["from","to","weight"],data:o.netSigCell,type:"sankey",name:e}]};a.Cell_Chart_RiverCell=i,console.log("test"),console.log(o.netSigPath);var r={title:{text:"Communication ("+t+") signals ("+a.series+"; Group: "+e+")"},credits:{enabled:!1},series:[{keys:["from","to","weight"],data:o.netSigPath,type:"sankey",name:e}]};a.Cell_Chart_RiverPath=r}))},getCellChartRcontri:function(e,t,a){var n=this;Object(s["e"])(e,t,a).then((function(e){console.log(e.data);var o=e.data,i={chart:{type:"bar"},title:{text:"Contribution of each L-R pair ("+n.series+"; Group: "+t+")"},subtitle:{},credits:{enabled:!1},xAxis:{categories:o.cate,title:{text:null}},yAxis:{min:0,title:{text:"",align:"high"},labels:{overflow:"justify"}},tooltip:{},plotOptions:{bar:{dataLabels:{enabled:!0,allowOverlap:!0}}},legend:{layout:"vertical",align:"left",verticalAlign:"bottom",x:0,y:1,floating:!0,borderWidth:1,shadow:!0},series:[{name:a.replace("TGFb","TGFβ")+" pathway ",data:o.seriData}]};n.Cell_Chart_Rcontri=i}))},changedContrGroupOfEnrich:function(e){var t=[],a=this,n=e.split("-");n.forEach((function(e){return t.push({name:e})})),a.enrichGroupList=t,this.contrGroupOfEnrich=e},changeGoType:function(e){this.goType=e},changenrichType:function(e){this.enrichGroup=e},getdiff_group:function(e){var t=this,a=[];getdiffGroup(e).then((function(e){var n=e.data;console.log(n),n.forEach((function(e){return a.push({name:e})})),t.contrasts_group=a,t.contrastsGroup=n[0],t.getLRPlot_chart(t.table_name,t.contrastsGroup)}))},changedSigPattern:function(e){this.sigPattern=e,this.getCellChartView(this.source,e)},changedSigName:function(e){this.siName=e,e.indexOf("TGFβ")>-1&&(e=e.replace("TGFβ","TGFb")),this.getCellChartHotMap(this.series,this.source,e),this.getCellChartRcontri(this.series,this.source,e)},changedSourceGroup:function(e){this.source=e,this.getSigNameList(this.series,this.source);var t="incoming";this.getCellChartView(e,t)}},mounted:function(){this.getDataSourceList(this.series);var e=document.getElementById("eSigPathNet"),t=function(){e.style.height=.85*window.innerHeight+"px",e.style.width=.75*window.innerWidth+"px"};t();var a=this.$echarts.init(e),n={};a.setOption(n),window.onresize=function(){t(),console.log("=="),a.resize()}}},h=u,p=(a("da39"),a("2877")),d=Object(p["a"])(h,n,o,!1,null,null,null);t["default"]=d.exports},a18c:function(e,t,a){"use strict";var n=a("2b0e"),o=a("8c4f"),i=a("ddb9"),r=a("c276"),s=a("e069"),l=a.n(s);n["default"].use(o["a"]);var c=new o["a"]({mode:"history",base:"/EryDB/",routes:i["a"]});c.afterEach((function(e){Object(r["f"])(e,c.app),l.a.LoadingBar.finish(),window.scrollTo(0,0)})),t["a"]=c},a191:function(e,t,a){"use strict";a("9e25")},a278:function(e,t,a){"use strict";a("4ee7")},a2fb:function(e,t,a){},a47c:function(e,t,a){"use strict";a("9b18")},a4d9:function(e,t,a){e.exports=a.p+"img/help_scDifferenceTra.d485f1c0.png"},a5af:function(e,t,a){e.exports=a.p+"img/help_datasetDetial_test.117ae4b6.png"},a81b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lay_out"},[a("h1",{staticClass:"my_h1"},[e._v("Differential Analysis (Organism: "+e._s(e.orga_name)+")")]),a("Br"),a("div",[a("Row",[a("Col",{attrs:{span:"16"}},[e.spinShow1?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{autoResize:e.ifResize,data:e.diff_data,layout:e.diff_layout,options:e.diff_options}})],1),a("Col",{attrs:{span:"8"}},[a("i-form",{attrs:{"label-width":120}},[a("Form-item",{attrs:{label:"Comparsion group: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select/input contrasts group",filterable:""},on:{"on-change":e.changedContrGroup},model:{value:e.contrastsGroup,callback:function(t){e.contrastsGroup=t},expression:"contrastsGroup"}},e._l(e.contrasts_group,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1),a("span",[e._v(" e.g, late_basoE-orthoE means the late_basoE group versus the orthoE group ")])],1),a("Form-item",{attrs:{label:"Absolute Fold Change: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select change fold"},on:{"on-change":e.changedFoldChange},model:{value:e.foldChange,callback:function(t){e.foldChange=t},expression:"foldChange"}},e._l(e.fold_change,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"P value: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select change fold"},on:{"on-change":e.changedPvalue},model:{value:e.Pvalue,callback:function(t){e.Pvalue=t},expression:"Pvalue"}},e._l(e.PValue_change,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Br"),a("Br"),a("Row",[a("Col",{attrs:{span:"12"}},[a("span",[e._v("Input gene symbol:")]),a("Input",{attrs:{search:"","enter-button":"Search",placeholder:e.search_placeholder},on:{"on-search":function(t){return e.searchDiffDataSetByKeyName(t)}}})],1)],1),a("br"),a("Row",[e.spinShowTypeSource?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("Table",{ref:"table",attrs:{data:e.diffData,columns:e.diffCols},on:{"on-sort-change":e.onSortTable}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.totalRow,current:e.currentPage,"page-size":e.pageSize,"show-total":"","show-sizer":""},on:{"on-change":e.handleCurrentChange,"on-page-size-change":e.handleSizeChange}})],1)]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:e.exportExcel}},[a("Icon",{attrs:{type:"ios-download-outline"}}),e._v("Download")],1),a("Br")],1)],1)],1)},o=[],i=(a("d81d"),a("d3b7"),a("159b"),a("b0c0"),a("ddd7")),r=a("43e0"),s=a.n(r),l=a("6c9c"),c=a("39b2"),u=a("376b"),h={0:{value:">0.05",name:">0.05"},1:{value:"=<0.05",name:"=<0.05"}},p={name:"all_Diffanal",components:{VuePlotly:s.a,FilterTable:i["a"]},props:{selectList:{type:Array,default:function(){return[]}}},data:function(){return{orga_name:"",spinShowTypeSource:"true",ifResize:!0,spinShow1:"true",diff_data:[],diff_layout:{},contrasts_group:[],source_group:[{name:"vivo",value:"vivo"},{name:"vitro",value:"vitro"},{name:"same cell's stage(over source)",value:"samec"}],foldChange:0,Pvalue:.05,fold_change:[{name:"0",value:"0"},{name:">=0.5",value:"0.5"},{name:">=1",value:"1"},{name:">=1.5",value:"1.5"},{name:">=2",value:"2"},{name:">=2.5",value:"2.5"},{name:">=3",value:"3"}],PValue_change:[{name:"=<0.05",value:"0.05"},{name:"=<0.01",value:"0.01"},{name:"=<0.001",value:"0.05"},{name:"=<0.0001",value:"0.0001"},{name:"=<0.00001",value:"0.00001"}],currentPage:1,pageSize:10,totalRow:400,diff_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"all_diff",height:500,width:700,scale:1}},contrastsGroup:"",sourceGroup:"vivo",table_name:"all_rna_dev_bulk_vivo",diffData:[],diffCols:[{title:"Symbol",key:"SYMBOL",filter:{type:"Input"},fixed:"left"},{title:"logFC",key:"logFC",sortable:!0},{title:"AveExpr",key:"logCPM",sortable:!0},{title:"adj.P.value",key:"FDR",sortable:!0},{title:"P.value",key:"P.Value",sortable:!0,filter:{type:"Select",option:h}}],orga:this.$route.params.orga,sequ_type:this.$route.params.sequ_type,sortableKey:"",sortableOrder:"",inputGenePat:""}},watch:{selectList:{handler:function(e){var t="all_"+e[0].orga+"_ep_"+e[0].sequnceType;this.table_name=t,this.getdiff_group(t),"hs"==e[0].orga&&(this.orga_name="Homo sapiens"),"mm"==e[0].orga&&(this.orga_name="Mus musculus"),"dr"==e[0].orga&&(this.orga_name="Danio rerio")},immediate:!0}},methods:{searchDiffDataSetByKeyName:function(e){var t=this;if(""==e)return this.$Message.info("Please input gene symbol",10),void this.mockTableData(this.table_name,this.currentPage,this.pageSize,this.contrastsGroup);t.spinShowTypeSource=!0,t.inputGenePat=e,Object(c["p"])(e,this.table_name,this.currentPage,this.pageSize,this.contrastsGroup).then((function(e){t.spinShowTypeSource=!1;var a=e.data;1==a.signal&&(t.diffData=a.list,t.totalRow=a.total)}))},changedFoldChange:function(e){var t=this;t.foldChange=e,this.getdiff_chart(this.table_name,this.contrastsGroup,t.foldChange,this.Pvalue)},changedPvalue:function(e){var t=this;t.Pvalue=e,this.getdiff_chart(this.table_name,this.contrastsGroup,this.foldChange,this.Pvalue)},onSortTable:function(e){e.column;var t=e.key,a=e.order;this.sortableKey=t,this.sortableOrder=a,this.handleSortTable()},handleSortTable:function(){if("normal"!==this.sortableOrder){var e=this;e.spinShowTypeSource=!0,""==this.inputGenePat?Object(c["q"])(this.sortableKey,this.sortableOrder,this.table_name,this.currentPage,this.pageSize,this.contrastsGroup).then((function(t){e.spinShowTypeSource=!1;var a=t.data;1==a.signal&&(e.diffData=a.list,e.totalRow=a.total)})):Object(c["r"])(this.inputGenePat,this.sortableKey,this.sortableOrder,this.table_name,this.currentPage,this.pageSize,this.contrastsGroup).then((function(t){e.spinShowTypeSource=!1;var a=t.data;1==a.signal&&(e.diffData=a.list,e.totalRow=a.total)}))}},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},exportExcel:function(){var e=["Symbol","logFC","AveExpr","adj.P.Val","P.Value"],t=["SYMBOL","logFC","logCPM","FDR","P.Value"],a="diff-data",n=this.formatJson(t,this.diffData);Object(u["a"])({header:e,data:n,filename:a})},getdiff_group:function(e){var t=this,a=[];Object(l["F"])(e).then((function(n){var o=n.data;o.forEach((function(e){return a.push({name:e})})),t.contrasts_group=a,t.foldChange=0,t.Pvalue=.05,t.getdiff_chart(e,o[0],t.foldChange,t.Pvalue),t.contrastsGroup=o[0],t.mockTableData(e,t.currentPage,t.pageSize,o[0])}))},getdiff_chart:function(e,t,a,n){var o=this,i=this;i.spinShow1=!0,Object(l["i"])(e,t,a,n).then((function(e){var a=e.data;console.log(a);var n=[{x:a.no_signifcant.logFC,y:a.no_signifcant.adj_P_Val,mode:"markers",type:"scatter",name:"Not signifcant",text:a.no_signifcant.genes,marker:{size:4}},{x:a.signifcant.logFC,y:a.signifcant.adj_P_Val,mode:"markers",type:"scatter",name:"Signifcant",text:a.signifcant.genes,marker:{size:4}}];o.diff_data=n;var r={title:"Differential Analysis "+t,xaxis:{title:"Log2(FC)"},yaxis:{title:"-Log10(P value)"}};o.diff_layout=r,i.spinShow1=!1}))},changedContrGroup:function(e){var t=this;t.contrastsGroup=e,this.getdiff_chart(this.table_name,e,this.foldChange,this.Pvalue),this.mockTableData(this.table_name,this.currentPage,this.pageSize,e)},changedSourceGroup:function(e){var t=this;this.source_group.forEach((function(a){a.name==e&&(t.sourceGroup=a.value)})),this.getdiff_group(table_name)},mockTableData:function(e,t,a,n){var o=this;o.spinShowTypeSource=!0,console.log("start_table_mode"),Object(c["o"])(e,t,a,n).then((function(e){o.spinShowTypeSource=!1;var t=e.data;console.log(t),1==t.signal&&(console.info(t.list),o.diffData=t.list,o.totalRow=t.total)}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.pageSize=e,this.mockTableData(this.table_name,this.currentPage,this.pageSize,this.contrastsGroup)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.mockTableData(this.table_name,this.currentPage,this.pageSize,this.contrastsGroup)}},mounted:function(){}},d=p,m=(a("d590"),a("2877")),g=Object(m["a"])(d,n,o,!1,null,null,null);t["default"]=g.exports},a836:function(e,t,a){},a90d:function(e,t,a){},a968:function(e,t,a){},aa92:function(e,t,a){},ad24:function(e,t,a){},af30:function(e,t,a){e.exports=a.p+"img/help_downloadChart.a161fa09.png"},b001:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("br"),a("h1",{staticClass:"my_h1"},[e._v("Enrichment Analysis")]),a("br"),a("Row",[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"8"}},[a("Form-item",{attrs:{label:"Comparison group:"}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select contrasts group",filterable:""},on:{"on-change":e.changedContrGroup},model:{value:e.contrGroupOfEnrich,callback:function(t){e.contrGroupOfEnrich=t},expression:"contrGroupOfEnrich"}},e._l(e.contrasts_group,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),e._v("    "),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Type: "}},[a("i-select",{attrs:{model:e.enrichGroup,clearable:"",placeholder:"Pleace select GO Type",filterable:""},on:{"update:model":function(t){e.enrichGroup=t},"on-change":e.changeGoType},model:{value:e.goType,callback:function(t){e.goType=t},expression:"goType"}},e._l(e.goTypeList,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row"),a("Row",[e.spinShow2?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{autoResize:e.ifResize,data:e.enrichGO_data,layout:e.enrichGO_layout,options:e.enrichGO_options}}),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){return e.exportEnrichData()}}},[a("Icon",{attrs:{type:"ios-download-outline"}}),e._v("Download Data")],1)],1)],1)},o=[],i=(a("d3b7"),a("159b"),a("fb6a"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("6c9c")),r=a("43e0"),s=a.n(r),l={name:"EnrichGO",components:{VuePlotly:s.a},data:function(){return{contrGroupOfEnrich:"",GOformItem:{},spinShow2:"true",series:this.$store.state.app.CurrentPageToken,enrichShow:!1,enrichGroup:"",contrasts_group:[],enrichGroupList:[],goTypeList:[{name:"GO-CC",value:"CC"},{name:"GO-MF",value:"MF"},{name:"GO-BP",value:"BP"},{name:"KEGG",value:"KEGG"}],ifResize:!0,enrichGO_data:[],enrichGO_layout:{},enrichGO_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"enrich_image",scale:1}}}},methods:{getdiff_group:function(){var e=this,t=[];Object(i["F"])(this.series).then((function(a){var n=a.data;console.log(n),n.forEach((function(e){return t.push({name:e})})),e.contrasts_group=t,e.contrGroupOfEnrich=n[0],e.enrichGroup=n[0].split("-")[0],e.goType="CC",e.getenrich_chart(e.series,n[0])}))},getenrich_chart:function(){var e=this,t=this;this.enrichShow=!0,""==this.contrGroupOfEnrich&&this.$Message.info("please select contrasts group",10),""==this.enrichGroup&&this.$Message.info("please select enrich group",10),""==this.goType&&this.$Message.info("please select GO type",10),t.spinShow2=!0,Object(i["k"])(this.series,this.contrGroupOfEnrich,this.goType).then((function(a){var n=a.data,o=n.xData,i=n.yData,r=n.nData;n.tData;e.enrichGO_data=[];for(var s=0;s<o.length;s++){var l={x:o[s],y:i[s],name:r[s],type:"bar",orientation:"h"};e.enrichGO_data.push(l)}var c=e.Dgrowth_mode[0].toUpperCase(),u=e.Dgrowth_mode.slice(1),h=c+u,p={title:e.goType+" enrichment of "+e.contrGroupOfEnrich+"\n ("+e.series+"; Experiment type: "+h+")",xaxis:{title:"-Log10(P value)",gridcolor:"rgb(243, 243, 243)",gridwidth:1},yaxis:{title:{text:"Pathway term",position:"top",standoff:40,yanchor:"top"},automargin:!0,gridcolor:"rgb(243, 243, 243)",gridwidth:1,rangemode:"normal",dtick:1,exponentformat:function(e){return e.length>30?e.substring(0,30)+"...":e}},margin:{l:100}};e.enrichGO_layout=p,t.spinShow2=!1}))},changedContrGroupOfEnrich:function(e){var t=[],a=this,n=e.split("-");n.forEach((function(e){return t.push({name:e})})),a.enrichGroupList=t,this.contrGroupOfEnrich=e},changeGoType:function(e){this.goType=e,this.getenrich_chart()},changedContrGroup:function(e){this.contrGroupOfEnrich=e,this.getenrich_chart()},changenrichType:function(e){this.enrichGroup=e},getDatasetSampleGroup:function(){var e=this;Object(i["g"])(this.$store.state.app.CurrentPageToken).then((function(t){var a=t.data;console.log(a);a.sample;var n=a.source;e.source=n}))},getDatasetSourceInfo:function(e){var t=this;Object(i["h"])(this.series).then((function(e){var a=e.data;console.log(a),t.Dsource=a.source,t.Dgrowth_mode=a.growth_mode}))},exportEnrichData:function(){var e=this;this.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","Dowloding")])}}),Object(i["l"])(this.series,this.contrGroupOfEnrich,this.goType).then((function(t){var a=new Blob([t.data],{type:"application/vnd.ms-excel"}),n=e.series+"_enrich_data.xls";if("msSaveOrOpenBlob"in navigator)window.navigator.msSaveOrOpenBlob(a,n);else{var o=document.createElement("a");o.download=n,o.style.display="none",o.href=URL.createObjectURL(a),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}e.$Spin.hide()})),this.$Loading.finish()}},mounted:function(){this.getDatasetSampleGroup(),this.getdiff_group(),this.getDatasetSourceInfo(this.series)}},c=l,u=(a("e3ba"),a("2877")),h=Object(u["a"])(c,n,o,!1,null,null,null);t["default"]=h.exports},b02c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lay_out"},[a("h1",{staticClass:"my_h1"},[e._v("Single Cell Cluster's Differential Analysis")]),a("br"),a("div",[a("Row",[a("Col",{attrs:{span:"16"}},[e.spinShow1?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{autoResize:e.ifResize,data:e.diff_data,layout:e.diff_layout,options:e.diff_options}})],1),a("Col",{attrs:{span:"8"}},[a("i-form",{attrs:{"label-width":120}},[a("Form-item",{attrs:{label:"Comparison cluster: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select cluster group",filterable:""},on:{"on-change":e.changedDiffChart},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.group_type_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1),a("span",[e._v(" e.g, late_basoE-orthoE means the late_basoE group versus the orthoE group ")])],1),a("Form-item",{attrs:{label:"Absolute Fold Change: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select change fold"},on:{"on-change":e.changedFoldChange},model:{value:e.foldChange,callback:function(t){e.foldChange=t},expression:"foldChange"}},e._l(e.fold_change,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1),a("span",[e._v(" Default value: >= 0 ")])],1),a("Form-item",{attrs:{label:"P value: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select change fold"},on:{"on-change":e.changedPvalue},model:{value:e.Pvalue,callback:function(t){e.Pvalue=t},expression:"Pvalue"}},e._l(e.PValue_change,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1),a("span",[e._v(" Default value: =< 0.05 ")])],1)],1)],1)],1),a("Br"),a("Row",[a("Col",{attrs:{span:"12"}},[a("span",[e._v("Input gene symbol:")]),a("Input",{attrs:{search:"","enter-button":"Search",placeholder:e.search_placeholder},on:{"on-search":function(t){return e.searchSCDiffDataSetByKeyName(t)}}})],1)],1),a("br"),a("Row",[a("Table",{ref:"table",attrs:{columns:e.diffCols,data:e.diffData,size:"small"},on:{"on-sort-change":e.onSortTable}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.totalRow,current:e.currentPage,"page-size":e.pageSize,"show-total":"","show-sizer":""},on:{"on-change":e.handleCurrentChange,"on-page-size-change":e.handleSizeChange}})],1)]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){return e.exportData(1)}}},[a("Icon",{attrs:{type:"ios-download-outline"}}),e._v("Download")],1)],1)],1),a("br"),a("div",[a("h1",{staticClass:"my_h1"},[e._v("Single Cell Cluster's Enrichment Analysis")]),a("br"),a("Row",[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Comparison cluster: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select cluster group",filterable:""},on:{"on-change":e.changedDiffChart2}},e._l(e.group_type_list2,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Enrichment type: "}},[a("i-select",{attrs:{model:e.enrichGroup,clearable:"",placeholder:"Pleace select Enrichment Type",filterable:""},on:{"update:model":function(t){e.enrichGroup=t},"on-change":e.changeEnrichType}},e._l(e.goTypeList,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",[e.spinShow2?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{autoResize:e.ifResize,data:e.enrichGO_data,layout:e.enrichGO_layout,options:e.enrichGO_options}})],1)],1)])},o=[],i=a("53ca"),r=(a("d3b7"),a("159b"),a("4de4"),a("ac1f"),a("5319"),a("ddd7")),s=a("43e0"),l=a.n(s),c=a("6c9c"),u=a("39b2"),h={0:{value:">0.05",name:">0.05"},1:{value:"=<0.05",name:"=<0.05"}},p={name:"sc_Diffanal",components:{VuePlotly:l.a,FilterTable:r["a"]},data:function(){return{enrichGroup:"",search_placeholder:"Please input gene symbol",goTypeList:[{name:"GO-CC",value:"CC"},{name:"GO-MF",value:"MF"},{name:"GO-BP",value:"BP"},{name:"KEGG",value:"KEGG"}],foldChange:0,Pvalue:.05,fold_change:[{name:"0",value:"0"},{name:">=0.5",value:"0.5"},{name:">=1",value:"1"},{name:">=1.5",value:"1.5"},{name:">=2",value:"2"},{name:">=2.5",value:"2.5"},{name:">=3",value:"3"}],PValue_change:[{name:"=<0.05",value:"0.05"},{name:"=<0.01",value:"0.01"},{name:"=<0.001",value:"0.05"},{name:"=<0.0001",value:"0.0001"},{name:"=<0.00001",value:"0.00001"}],series:this.$store.state.app.CurrentPageToken,ifResize:!0,spinShow1:"true",spinShow2:"true",diff_data:[],diff_layout:{},contrasts_group:[],enrichGO_layout:{},data_source_list:[],source:"",source2:"",currentPage:1,pageSize:10,totalRow:400,diff_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_diff_image",height:500,width:700,scale:1}},sourceGroup:"vivo",diffData:[],diffCols:[{title:"Symbol",key:"symbol",filter:{type:"Input"},fixed:"left"},{title:"P-value",key:"p_val",sortable:"custom",filter:{type:"Input"}},{title:"avLogFC",key:"avg_logFC",sortable:"custom",filter:{type:"Input"}},{title:"P-adj.val",key:"p_val_adj",sortable:"custom",filter:{type:"Select",option:h}}],sortableKey:"",sortableOrder:"",inputGenePat:"",group_type_list:["all"],group_type_list2:[],group:"",gorup2:"",enrichGO_data:[],enrichType:"CC",enrichGO_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_diff_enrich_image",height:500,width:700,scale:1}}}},methods:{onSortTable:function(e){e.column;var t=e.key,a=e.order;console.log(t),console.log(a),this.sortableKey=t,this.sortableOrder=a,this.handleSortTable()},getDataSourceList:function(e){var t=this;Object(c["E"])(this.series).then((function(e){var a=t,n=e.data,o=n;t.source=o[0].source_g,t.source2=o[0].source_g,n.forEach((function(e){console.log(e.source_g),a.data_source_list.push({name:e.source_g})})),t.getContrastGroup(t.series,o[0].source_g),t.getContrastGroup2(t.series,o[0].source_g)}))},exportData:function(e){1===e?this.$refs.table.exportCsv({filename:"diff_data"}):2===e?this.$refs.table.exportCsv({filename:"排序和过滤后的数据",original:!1}):3===e&&this.$refs.table.exportCsv({filename:"自定义数据",columns:this.columns8.filter((function(e,t){return t<4})),data:this.data7.filter((function(e,t){return t<4}))})},changedDiffChart:function(e){if(console.log(e),this.group=e,"undefined"===typeof e)this.group=e;else{this.group=e,this.getdiff_chart(this.series,this.group,this.foldChange,this.Pvalue);var t=this.series;this.mockTableData(t,this.currentPage,this.pageSize,e)}},changedFoldChange:function(e){var t=this;t.foldChange=e,this.getdiff_chart(this.series,this.group,t.foldChange,this.Pvalue)},changedPvalue:function(e){var t=this;t.Pvalue=e,this.getdiff_chart(this.series,this.group,this.foldChange,t.Pvalue)},changedDiffChart2:function(e){console.log(e),this.group2=e,this.getdiffEnrich_chart(this.series,e,this.enrichType)},changeEnrichType:function(e){this.enrichType=e,this.getdiffEnrich_chart(this.series,this.group2,e)},changedDataSource:function(e){this.source=e,this.getContrastGroup(this.series,e)},changedDataSource2:function(e){this.source2=e,this.getContrastGroup2(this.series,e)},getdiffEnrich_chart:function(e,t,a){var n=this,o=this;o.spinShow2=!0,Object(c["w"])(e,t,a).then((function(e){var a=e.data;console.log("enrich data "),console.log(a);var i=a.xData,r=a.yData,s=a.nData;a.tData;n.enrichGO_data=[];for(var l=0;l<i.length;l++){var c={x:i[l],y:r[l],name:s[l],type:"bar",orientation:"h"};n.enrichGO_data.push(c)}var u={title:"Enrichment ("+n.enrichType+") of "+t+"("+n.series+")",xaxis:{title:"-Log10(P value)",gridcolor:"rgb(243, 243, 243)",gridwidth:1},yaxis:{title:{text:"Pathway term",position:"top",standoff:40,yanchor:"top"},automargin:!0,gridcolor:"rgb(243, 243, 243)",gridwidth:1,rangemode:"normal",dtick:1,exponentformat:function(e){return e.length>30?e.substring(0,30)+"...":e}},margin:{l:300}};n.enrichGO_layout=u,o.spinShow2=!1}))},getDiffContrastGroup:function(e){var t=this;Object(c["u"])(e).then((function(a){var n=t,o=a.data;console.log(o);n.group=o[0],n.group_type_list=[],o.forEach((function(e){return n.group_type_list.push({name:e})}));var i=e;t.getdiff_chart(t.series,t.group,t.foldChange,t.Pvalue),t.mockTableData(i,t.currentPage,t.pageSize,o[0])}))},getEnrichContrastGroup2:function(){var e=this;Object(c["v"])(this.series,this.source2).then((function(t){var a=t.data;console.log(a);e.group_type_list2=[],a.forEach((function(t){return e.group_type_list2.push({name:t})})),e.group2=a[0],e.getdiffEnrich_chart(e.series,a[0],e.enrichType)}))},onSearch_diff:function(e){var t=this,a=this;for(var n in e){var o=e[n];if("object"===Object(i["a"])(o))return void this.$Message.info("Please check your input of  "+n,15);if(0===o.replace(/\s*/g,"").length.length)return this.$Message.info("Please check your input of  "+n,15),void this.load()}searchDatasetByParms(e,a.currentPage,a.pageSize).then((function(e){a.spinShowTypeSource=!1;var n=e.data;1===n.signal?t.$Message.info("No related datasets",15):(a.datasets=n.list,a.total=n.total)}))},getdiff_chart:function(e,t,a,n){var o=this,i=this;i.spinShow1=!0,Object(c["t"])(this.series,this.group,a,n).then((function(e){var t=e.data;console.log(t);var a=[{x:t.no_signifcant.logFC,y:t.no_signifcant.adj_P_Val,mode:"markers",type:"scatter",name:"Not signifcant",text:t.no_signifcant.genes,marker:{size:4}},{x:t.signifcant.logFC,y:t.signifcant.adj_P_Val,mode:"markers",type:"scatter",name:"Signifcant",text:t.signifcant.genes,marker:{size:4}}];o.diff_data=a;var n={title:"Differential Analysis  <br />"+o.group+" ("+o.series+")",subtitle:{text:"Data Souce:"+o.series},xaxis:{title:"Log2(FC)"},yaxis:{title:"-Log10(P value)"}};o.diff_layout=n,i.spinShow1=!1}))},mockTableData:function(e,t,a,n){var o=this;o.spinShowTypeSource=!0,Object(u["v"])(e,t,a,n).then((function(e){o.spinShowTypeSource=!1;var t=e.data;console.log(t),1==t.signal&&(console.info(t.list),o.diffData=t.list,o.totalRow=t.total)}))},handleSortTable:function(){if("normal"!==this.sortableOrder){var e=this;e.spinShowTypeSource=!0,""==this.inputGenePat?Object(u["x"])(this.sortableKey,this.sortableOrder,this.series,this.currentPage,this.pageSize,this.group).then((function(t){e.spinShowTypeSource=!1;var a=t.data;1==a.signal&&(e.diffData=a.list,e.totalRow=a.total)})):Object(u["y"])(this.inputGenePat,this.sortableKey,this.sortableOrder,this.series,this.currentPage,this.pageSize,this.group).then((function(t){e.spinShowTypeSource=!1;var a=t.data;1==a.signal&&(e.diffData=a.list,e.totalRow=a.total)}))}},searchSCDiffDataSetByKeyName:function(e){var t=this;if(""==e)return this.$Message.info("Please input gene symbol",10),void this.mockTableData(this.series,this.currentPage,this.pageSize,this.group);var a=this;a.spinShowTypeSource=!0,a.inputGenePat=e,Object(u["w"])(e,this.series,this.currentPage,this.pageSize,this.group).then((function(e){a.spinShowTypeSource=!1;var n=e.data;console.log(n),1==n.signal?(console.info(n.list),a.diffData=n.list,a.totalRow=n.total):t.$Message.info("No related datasets",15)}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.pageSize=e;var t=this.series;this.mockTableData(t,this.currentPage,this.pageSize,this.group)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e;var t=this.series;this.mockTableData(t,this.currentPage,this.pageSize,this.group)}},mounted:function(){this.getDiffContrastGroup(this.series),this.getEnrichContrastGroup2(this.series)}},d=p,m=(a("7bd8"),a("2877")),g=Object(m["a"])(d,n,o,!1,null,null,null);t["default"]=g.exports},b1e7:function(e,t,a){},b324:function(e,t,a){"use strict";a("c376")},b368:function(e,t,a){"use strict";a("9b41")},b74e:function(e,t,a){e.exports=a.p+"img/help_datasetCellAnnotation.fd8c7fd3.png"},b7cd:function(e,t,a){"use strict";a("e293")},b967:function(e,t,a){var n={"./aboutSBySpecies.png":"d490","./address.png":"c542","./development1 (2).png":"5606","./development_test.png":"1ddc","./disease_home.png":"c38b","./gene.png":"76d7","./help_BulkDiff.png":"bc04","./help_BulkDiffTable.png":"9920","./help_BulkEnrich.png":"8f72","./help_BulkPCA.png":"84dc","./help_about.png":"f1a7","./help_datasetAnalBulk.png":"cd22","./help_datasetAnalSC.png":"c0eb","./help_datasetCellAnnotation.png":"b74e","./help_datasetDetial.png":"574e","./help_datasetDetial_test.png":"a5af","./help_datasetOtherInfo.png":"fd4a","./help_datasetSample.png":"fa8d","./help_downloadAnalData.png":"58cc","./help_downloadChart.png":"af30","./help_downloadData.png":"8f69","./help_eryAtlaCellAnno.png":"118f","./help_eryAtlaSample.png":"f8e0","./help_eryAtlas.png":"0dba","./help_eryAtlas1.png":"3047","./help_expPro.png":"cb09","./help_homeCompounds.png":"0b5e","./help_homeDiffer.png":"c9da","./help_homeDiffer.svg.png":"26b6","./help_homeDiseases.png":"17997","./help_homeGenes.png":"960d","./help_homePage.png":"c308","./help_homePage.svg.png":"80eb","./help_homePage2.png":"f093","./help_scCommu.png":"f3ce","./help_scCommuNetP.png":"06fb","./help_scContribution.png":"7887","./help_scDiffer.png":"58de","./help_scDifferEnrich.png":"354a","./help_scDifferTable.png":"5352","./help_scDifferenceTra.png":"a4d9","./help_scFeature.png":"6072","./help_scInter.png":"0672","./help_scMarker.png":"ead9","./help_scMarkerEnrich.png":"c29f","./help_scPCA.png":"318a","./help_scPseu.png":"8586","./help_search.png":"d72e","./image-20220310215336566.png":"23db","./image-20220310215903098.png":"ef491","./subredcell_test.png":"ec80","./test_home.png":"4c81"};function o(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id="b967"},bc04:function(e,t,a){e.exports=a.p+"img/help_BulkDiff.aec9a535.png"},be2d:function(e,t,a){"use strict";a("1bb8")},c0eb:function(e,t,a){e.exports=a.p+"img/help_datasetAnalSC.f4f8eb76.png"},c276:function(e,t,a){"use strict";a.d(t,"g",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return p})),a.d(t,"f",(function(){return m})),a.d(t,"a",(function(){return g})),a.d(t,"d",(function(){return f}));var n=a("2909"),o=a("5530"),i=(a("caad"),a("2532"),a("ac1f"),a("5319"),a("498a"),a("b0c0"),a("d3b7"),a("d81d"),a("4de4"),a("99af"),a("f121")),r=a("a18c"),s=i["a"].title,l=i["a"].useI18n,c=function(e,t){var a=e.meta,n=a.title,o=a.__titleIsFunction__;if(n)return n=l?n.includes("{{")&&n.includes("}}")&&l?n.replace(/({{[\s\S]+?}})/,(function(e,a){return a.replace(/{{([\s\S]*)}}/,(function(e,a){return t.$t(a.trim())}))})):o?e.meta.title:t.$t(e.name):e.meta&&e.meta.title||e.name,n},u=function(e,t){localStorage.setItem(e,t)},h=function(e,t){var a=Object(o["a"])(Object(o["a"])({},t),{},{icon:t.meta.icon}),i=e.matched;if(i.some((function(e){return e.name===t.name})))return[a];var r=i.filter((function(e){return void 0===e.meta||!e.meta.hideInBread})).map((function(t){var a=Object(o["a"])({},t.meta);a.title&&"function"===typeof a.title&&(a.__titleIsFunction__=!0,a.title=a.title(e));var n={icon:t.meta&&t.meta.icon||"",name:t.name,meta:a,to:t.path};return n}));return r=r.filter((function(e){return!e.meta.hideInMenu})),[Object(o["a"])(Object(o["a"])({},a),{},{to:t.path})].concat(Object(n["a"])(r))},p=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"home",n=-1,o=t.length,i={};while(++n<o){var r=t[n];if(r.children&&r.children.length){var s=e(r.children,a);if(s.name)return s}else r.name===a&&(i=r)}return i},d=function(e){var t=Object(o["a"])({},e),a=Object(o["a"])({},e.meta),n="";return a.title&&("function"===typeof a.title?(a.__titleIsFunction__=!0,n=a.title(t)):n=a.title),a.title=n,t.meta=a,t},m=function(e,t){var a=d(e),n=c(a,t),o=n?"".concat(s," - ").concat(n):s;window.document.title=o},g=function(e){return 404===e&&r["a"].push({name:"error_404"}),e},f=function(e){return localStorage.getItem(e)||""}},c29f:function(e,t,a){e.exports=a.p+"img/help_scMarkerEnrich.1f8911c8.png"},c308:function(e,t,a){e.exports=a.p+"img/help_homePage.5a52cfd3.png"},c376:function(e,t,a){},c38b:function(e,t,a){e.exports=a.p+"img/disease_home.6928e824.png"},c542:function(e,t,a){e.exports=a.p+"img/address.73a7c256.png"},c8d4:function(e,t,a){},c9da:function(e,t,a){e.exports=a.p+"img/help_homeDiffer.e5180c8a.png"},cb09:function(e,t,a){e.exports=a.p+"img/help_expPro.3fb47332.png"},cb0f:function(e,t,a){"use strict";a("f1fd")},cd22:function(e,t,a){e.exports=a.p+"img/help_datasetAnalBulk.d60d0a7e.png"},d32b:function(e,t,a){"use strict";a("b1e7")},d490:function(e,t,a){e.exports=a.p+"img/aboutSBySpecies.18cff991.png"},d58f3:function(e,t,a){"use strict";a("888d")},d590:function(e,t,a){"use strict";a("381e")},d72e:function(e,t,a){e.exports=a.p+"img/help_search.3a7d37c7.png"},da39:function(e,t,a){"use strict";a("c8d4")},ddb9:function(e,t,a){"use strict";a("d3b7"),a("3ca3"),a("ddb0");var n,o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Header"),e.ifshow_bread?a("body",[a("div",{staticClass:"bigd-container bodyStyle"},[a("div",{staticClass:"layout"},[a("Content",{staticClass:"my_content"},[a("header-bar"),a("Content",[a("Card",[a("div",[a("router-view"),a("Back-top")],1)])],1),a("br"),a("Footer",{staticClass:"layout-footer-center"})],1)],1)]),e._m(0)]):e._e(),e.ifshow_content?a("Content",{staticClass:"my_content"},[a("header-bar"),a("Content",[a("div",[a("router-view"),a("Back-top")],1)])],1):e._e()],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"bigd-footer",staticStyle:{"font-family":"Arial"}},[a("div",{staticClass:"bigd-container"},[a("div",{staticClass:"bigd-panel bigd-panel-default"},[a("div",{staticClass:"bigd-panel-body"},[a("div",{staticClass:"bigd-row"},[a("div",{staticClass:"bigd-col-md-2"},[a("a",{attrs:{href:"https://bigd.big.ac.cn/"}},[a("img",{staticClass:"bigd-img-responsive",staticStyle:{"margin-top":"calc((15/1920) * 100vw)"},attrs:{src:"https://bigd.big.ac.cn/cdn/image/CNCB-NGDC.png"}})]),a("ul",{staticClass:"bigd-list-unstyled"},[a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/about"}},[e._v("About NGDC")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/people"}},[e._v("People")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/mission"}},[e._v("Mission")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/board"}},[e._v("Advisory Board")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/structure"}},[e._v("Organizational Structure")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/history"}},[e._v("History")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/annual-report"}},[e._v("Annual Reports")])])])]),a("div",{staticClass:"bigd-col-md-2"},[a("h3",[e._v("Research & Resources")]),a("ul",{staticClass:"bigd-list-unstyled"},[a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/databases"}},[e._v("Databases")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/tools"}},[e._v("Tools")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/standards"}},[e._v("Standards")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/research"}},[e._v("Topics & Projects")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/publications"}},[e._v("Publications")])])])]),a("div",{staticClass:"bigd-col-md-2"},[a("h3",[e._v("Featured")]),a("ul",{staticClass:"bigd-list-unstyled"},[a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/databasecommons",target:"_blank"}},[e._v("Database Commons")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/ewas",target:"_blank"}},[e._v("EWAS Atlas")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/gsa",target:"_blank",title:"Genome Sequence Archive"}},[e._v("GSA")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/gvm",target:"_blank",title:"Genome Variation Map"}},[e._v("GVM")])]),a("li",[a("a",{attrs:{href:"http://ic4r.org",target:"_blank",title:"Information Commons for Rice"}},[e._v("IC4R")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/idog",target:"_blank"}},[e._v("iDog")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/methbank",target:"_blank",title:"Methylation DataBank"}},[e._v("MethBank")])])])]),a("div",{staticClass:"bigd-col-md-2"},[a("h3",[e._v("Conferences & Education")]),a("ul",{staticClass:"bigd-list-unstyled"},[a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/conference"}},[e._v("Conferences")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/education"}},[e._v("Education")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/training"}},[e._v("Training")])])])]),a("div",{staticClass:"bigd-col-md-2"},[a("h3",[e._v("Alliance & Collaboration")]),a("ul",{staticClass:"bigd-list-unstyled"},[a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/bhbd-alliance"}},[e._v("BHBD")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/partners"}},[e._v("Partners")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/collaborations"}},[e._v("Collaborations")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/funding"}},[e._v("Funding")])]),a("li",[a("a",{attrs:{href:"https://bigd.big.ac.cn/contact"}},[e._v("Contact Us")])])])])]),a("hr",{staticClass:"footer-hr"}),a("div",{staticClass:"bigd-row"},[a("div",{staticClass:"bigd-col-md-7"},[a("p",{staticClass:"bigd-text-muted"},[e._v(" © year National Genomics Data Center, "),a("span",[a("a",{attrs:{href:"http://english.big.cas.cn",target:"_blank"}},[e._v("China National Center for Bioinformation / Beijing Institute of Genomics")])]),e._v(", "),a("span",[a("a",{attrs:{href:"http://english.cas.cn",target:"_blank"}},[e._v("Chinese Academy of Sciences")])]),a("br"),e._v(" No.1 Beichen West Road, Chaoyang District, Beijing 100101, China"),a("br"),a("span",[a("a",{attrs:{href:"bigd_sitepolicies"}},[e._v("Policies and Disclaimers")])])]),a("p",{staticClass:"bigd-text-muted"},[a("span",[a("a",{attrs:{rel:"license",target:"_blank",href:"http://creativecommons.org/licenses/by/3.0/cn/"}},[a("img",{staticStyle:{"border-width":"0",height:"calc((15/1920) * 100vw)"},attrs:{alt:"Creative Commons License",src:"https://bigd.big.ac.cn/static/image/cc.png"}})])]),e._v(" This work is licensed under a "),a("span",[a("a",{attrs:{rel:"license",href:"http://creativecommons.org/licenses/by/3.0/cn/",target:"_blank"}},[e._v("Creative Commons Attribution 3.0 China Mainland License")]),a("br"),a("a",{attrs:{href:"http://www.beian.miit.gov.cn",target:"_blank"}},[e._v("京ICP备10050270号")])])])]),a("div",{staticClass:"bigd-col-md-5"},[a("div",{staticClass:"pull-right"},[a("ul",{staticClass:"bigd-list-inline"},[a("li",[a("a",{attrs:{href:"http://english.big.cas.cn",target:"_blank"}},[a("img",{staticStyle:{width:"calc((32/1920) * 100vw)"},attrs:{src:"https://bigd.big.ac.cn/static/image/big_logo.png"}})])]),a("li",[a("a",{attrs:{href:"http://www.picb.ac.cn/picb",target:"_blank"}},[a("img",{staticStyle:{height:"calc((32/1920) * 100vw)"},attrs:{src:"https://bigd.big.ac.cn/static/image/picb.png"}})])]),a("li",[a("a",{attrs:{href:"http://english.ibp.cas.cn/",target:"_blank"}},[a("img",{staticStyle:{height:"calc((32/1920) * 100vw)"},attrs:{src:"https://bigd.big.ac.cn/static/image/ibp.png"}})])]),a("li",[a("a",{attrs:{href:"http://english.cas.cn/",target:"_blank"}},[a("img",{staticStyle:{height:"calc((32/1920) * 100vw)"},attrs:{src:"https://bigd.big.ac.cn/static/image/cas.png"}})])])])])])])])])])])}],r=a("5530"),s=(a("b0c0"),a("2f62")),l=a("64a5"),c=a("de34"),u={name:"App",components:{HeaderBar:l["a"],Header:c["a"]},data:function(){return{values:[{id:1,name:"Home",link:"/",type:"ios-home"},{id:0,name:"Search",link:"/Search",type:"ios-search"},{id:2,name:"Erythroid Atlas",link:"/Erythroid_Atlas",type:"ios-analytics"},{id:3,name:"Help",link:"/help",type:"ios-paper"},{id:4,name:"About",link:"/about",type:"ios-navigate"}],current_index:-1,ifshow_bread:!0,ifshow_content:!1}},computed:{local:function(){return this.$store.state.app.local}},methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])(["setLocal","setBreadCrumb","setHomeRoute","setNewRouteName"])),{},{getCurentStyle:function(e){"main_sub"==e?(this.ifshow_bread=!1,this.ifshow_content=!0):(this.ifshow_bread=!0,this.ifshow_content=!1)},cg_current_index:function(e){this.current_index=e},openWindow:function(e){window.open(e)}}),watch:{$route:function(e){this.setNewRouteName(e.name),"main_sub"==e.name?(this.ifshow_bread=!1,this.ifshow_content=!0):(this.ifshow_bread=!0,this.ifshow_content=!1),this.setBreadCrumb(e)}},mounted:function(){this.setLocal("en-US"),this.setHomeRoute(De);var e=this.$route;e.name,e.params,e.query,e.meta;this.setBreadCrumb(this.$route),this.setNewRouteName(this.$route.name),"main_sub"==this.$route.name?(this.ifshow_bread=!1,this.ifshow_content=!0):(this.ifshow_bread=!0,this.ifshow_content=!1),this.getCurentStyle(this.$store.state.app.NewRouteName)}},h=u,p=(a("5aa8"),a("2877")),d=Object(p["a"])(h,o,i,!1,null,null,null),m=d.exports,g=m,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Col",[a("h1",{staticClass:"h1_title"},[e._v(e._s(e.dataset_title))]),a("p")])],1),a("br"),a("Row",{staticClass:"detail_style"},[a("Col",[a("Row",[a("Col",{attrs:{span:"5"}},[a("strong",[e._v("Dataset ID:")])]),a("Col",{attrs:{span:"19"}},[a("a",{attrs:{href:e.getSeriHref(),target:"_blank"}},[e._v(e._s(e.EryID))])])],1),a("Row",[a("Col",{attrs:{span:"5"}},[a("strong",[e._v("Dataset source:")])]),a("Col",{attrs:{span:"19"}},[a("a",{attrs:{href:e.getSeriHref(),target:"_blank"}},[e._v(e._s(e.dataset))])])],1),a("Row",[a("Col",{attrs:{span:"5"}},[a("strong",[e._v("Organism:")])]),a("Col",{staticStyle:{"font-style":"italic"},attrs:{span:"19"}},[e._v(e._s(e.organism))])],1),a("Row",[a("Col",{attrs:{span:"5"}},[a("strong",[e._v("Tissue:")])]),a("Col",{attrs:{span:"19"}},[e._v(e._s(e.tissue))])],1),a("Row",[a("Col",{attrs:{span:"5"}},[a("strong",[e._v("Experiment type:")])]),a("Col",{staticStyle:{"font-style":"italic"},attrs:{span:"19"}},[e._v(e._s(e.myCagrowth_type))])],1),a("Row",[a("Col",{attrs:{span:"5"}},[a("strong",[e._v("Omics type:")])]),a("Col",{attrs:{span:"19"}},[e._v(e._s(e.experiment_type))])],1),a("Row",[a("Col",{attrs:{span:"5"}},[a("strong",[e._v("Status:")])]),a("Col",{attrs:{span:"19"}},[e._v(e._s(e.status))])],1),a("Row",[a("Col",{attrs:{span:"5"}},[a("strong",[e._v("Summary:")])]),a("Col",{staticClass:"text_p",attrs:{span:"19"}},[e._v(e._s(e.summary))])],1),a("Row",[a("Col",{attrs:{span:"5"}},[a("strong",[e._v("Organization name:")])]),a("Col",{attrs:{span:"19"}},[e._v(e._s(e.organization_name))])],1),a("Row",[a("Col",{attrs:{span:"5"}},[a("strong",[e._v("Platforms:")])]),a("Col",{attrs:{span:"19"},domProps:{innerHTML:e._s(e.platforms)}})],1),a("Row",[a("Col",{attrs:{span:"5"}},[a("strong",[e._v("Citation(s):")])]),a("Col",{attrs:{span:"19"},domProps:{innerHTML:e._s(e.citations)}})],1),a("Row",[a("strong",[e._v(" Samples ("+e._s(e.totalRow)+") and group:")])]),a("Row",[a("Table",{ref:"table",staticClass:"my-tableStyle",attrs:{columns:e.sampleCols,data:e.sampleData,size:"small","disabled-hover":"true"}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.totalRow,current:e.currentPage,"page-size":e.pageSize,"show-total":"","show-sizer":""},on:{"on-change":e.handleCurrentChange,"on-page-size-change":e.handleSizeChange}})],1)])],1),a("Content",[a("Card",[a("div",[a("DatasetService")],1)])],1),a("Content",[a("Card",[a("div",{staticClass:"row_choice"},[a("h3",{staticClass:"h3_title"},[e._v("Download： ")]),a("br"),a("Row",[a("Col",{attrs:{span:"8"}},[a("button",{staticClass:"my_button_download",on:{click:function(t){return e.downloadExpression()}}},[a("Icon",{attrs:{type:"ios-download-outline"}}),e._v(" Expression")],1),a("i-progress",{attrs:{percent:e.fileDown.percentage,status:e.fileDown.loadDialogStatus,width:"40"}})],1),a("Col",{attrs:{span:"8"}},[a("button",{staticClass:"my_button_download",on:{click:function(t){return e.downloadMetaInfo()}}},[a("Icon",{attrs:{type:"ios-download-outline"}}),e._v(" Meta information")],1),a("i-progress",{attrs:{percent:e.fileDown2.percentage,status:e.fileDown2.loadDialogStatus,width:"40"}})],1)],1)],1)])],1),a("Row",[a("Collapse",[a("Panel",{attrs:{name:"0"}},[e._v(" Data processing "),a("p",{staticClass:"text_p",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.data_processing))])]),a("Panel",{attrs:{name:"_0"}},[e._v(" Normalization method "),a("p",{staticClass:"text_p",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.normalization_method))])]),a("Panel",{attrs:{name:"1"}},[e._v(" Overall design "),a("p",{staticClass:"text_p",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.overall_design))])]),a("Panel",{attrs:{name:"2"}},[e._v(" Contributor(s) "),a("p",{staticClass:"text_p",attrs:{slot:"content"},domProps:{innerHTML:e._s(e.contributors)},slot:"content"})]),a("Panel",{attrs:{name:"3"}},[e._v(" Submission date "),a("p",{staticClass:"text_p",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.submission_date))])]),a("Panel",{attrs:{name:"4"}},[e._v(" Contact name "),a("p",{staticClass:"text_p",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.contact_name))])]),a("Panel",{attrs:{name:"5"}},[e._v(" E-mails "),a("p",{staticClass:"text_p",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.e_mails))])]),a("Panel",{attrs:{name:"6"}},[e._v(" Organization name "),a("p",{staticClass:"text_p",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.organization_name))])]),a("Panel",{attrs:{name:"7"}},[e._v(" Country "),a("p",{staticClass:"text_p",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.country))])]),a("Panel",{attrs:{name:"8"}},[e._v(" City "),a("p",{staticClass:"text_p",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.city))])]),e.ifSub?a("Panel",{attrs:{name:"9"}},[e._v(" Subseries "),a("p",{staticClass:"text_p",attrs:{slot:"content"},domProps:{innerHTML:e._s(e.subseries)},slot:"content"})]):e._e()],1)],1)],1)],1),a("Row",[a("Col")],1)],1)},_=[],v=a("ade3"),b=(a("2b3d"),a("9861"),a("fb6a"),a("ac1f"),a("841c"),a("d81d"),a("159b"),a("a18c")),y=(a("313e"),a("0d16")),C=a("6c9c"),S=a("66df"),w=a("39b2"),x=a("4644"),k={name:"DatasetDetail",components:{DatasetService:x["default"]},data:function(){var e;return e={sampleCols:[{title:"Accession No",key:"gid",sortable:!0,filter:{type:"Input"},fixed:"left",width:130,render:function(e,t){return t.row.gid.indexOf("GSM")>-1?e("div",[e("a",{attrs:{href:"https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+t.row.gid,target:"_blank"}},t.row.gid)]):t.row.gid.indexOf("EGAD")>-1?e("div",[e("a",{attrs:{href:"https://web2.ega-archive.org/datasets/"+t.row.gid.split("_")[0],target:"_blank"}},t.row.gid)]):e("div",t.row.gid)}},{title:"Sample name",key:"sample",sortable:!0,filter:{type:"Input"}},{title:"Organism",key:"organism",width:120,sortable:!0,filter:{type:"Input"},className:"table_Orga"},{title:"Tissue",key:"tissue",sortable:!0,filter:{type:"Input"}},{title:"Cell type",key:"cell_type",sortable:!0},{title:"Source",key:"source",sortable:!0},{title:"Experiment type",key:"growth_mode",width:102,filter:{type:"Input"},className:"table_Orga"},{title:"Group",key:"group",width:90,sortable:!0}],fileDown:{loadDialogStatus:!1,percentage:0,source:{}},fileDown2:{loadDialogStatus:!1,percentage:0,source:{}},sampleData:[],source:"",spinShowSampleSource:!0,totalRow:40,currentPage:1,pageSize:10,enrich_data:[],enrich_layout:{},enrich_options:{},enrichGroup:"",publicPath:"/EryDB/",EryID:"",series:"",organism:"",tissue:"",growth_type:"",myCagrowth_type:"",development_type:"",sample_numbers:"",organization_name:"",country:"",city:"",experiment_type:"",sequencing_type:"",status:"",summary:"",cell_types:"",samples:"",samples_count:"",ifSub:!1,subseries:"",platforms:"",citations:"",contributors:"",data_processing:"",normalization_method:"",overall_design:"",submission_date:"",contact_name:"",e_mails:""},Object(v["a"])(e,"sequencing_type",""),Object(v["a"])(e,"standardized_mode",""),Object(v["a"])(e,"experimental_materials",""),Object(v["a"])(e,"laboratory_reagents",""),Object(v["a"])(e,"sequencing_process",""),Object(v["a"])(e,"reference",""),Object(v["a"])(e,"href",""),Object(v["a"])(e,"dataset",this.$store.state.app.CurrentPageToken),Object(v["a"])(e,"dataset_title",""),Object(v["a"])(e,"search_placeholder",""),Object(v["a"])(e,"self",this),Object(v["a"])(e,"all_sample_tableData",[]),Object(v["a"])(e,"diff_tableData",[]),Object(v["a"])(e,"all_sample_tableColumns",[]),Object(v["a"])(e,"diff_tableColumns",[]),Object(v["a"])(e,"diff_exTbColums",[]),Object(v["a"])(e,"contrGroupOfEnrich",""),Object(v["a"])(e,"enrichGroup",""),Object(v["a"])(e,"goType",""),Object(v["a"])(e,"tableColumnsChecked",[]),Object(v["a"])(e,"tableColumnsData",[]),Object(v["a"])(e,"tableType",""),Object(v["a"])(e,"chartOptionsEL",{}),Object(v["a"])(e,"enrichGoOptions",{}),Object(v["a"])(e,"chartOptionsELbubble",{}),Object(v["a"])(e,"chartOptionsBoxPlot",{}),Object(v["a"])(e,"chartOptionsAllStack",{}),Object(v["a"])(e,"itemInfoTip",""),Object(v["a"])(e,"searchMicName",""),Object(v["a"])(e,"SpecifExpreTip",""),Object(v["a"])(e,"specif_name",""),e},methods:{intoClustGram:function(){b["a"].push({name:"ClustGram",params:{dataset:this.dataset}})},downloadExpression:function(){var e=this,t=this;t.fileDown.percentage=0;var a="Bulk";Object(y["b"])(this.dataset).then((function(e){var t=e.data;console.log("data:"),console.log(t),a=t.sequencing_type})),S["a"].request({url:"public/getDatasetExpression",data:{dataset:this.dataset},method:"post",contentType:"application/octet-stream",responseType:"blob",params:{},onDownloadProgress:function(e){if(e.lengthComputable){var a=Math.round(e.loaded/e.total*100);t.fileDown.percentage=a>=99?99:a}}}).then((function(n){if(a.indexOf("Single Cell")>-1){var o=e.dataset+".sce.rds";if(e.dataset.indexOf("FLB000005")>-1)o="FLB000005.h5ad";var i=new Blob([n.data],{type:"application/octet-stream"});if("msSaveOrOpenBlob"in navigator)window.navigator.msSaveOrOpenBlob(i,o);else{var r=document.createElement("a");r.download=o,r.style.display="none",r.href=URL.createObjectURL(i),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}}else{var s=new Blob([n.data],{type:"application/vnd.ms-excel"}),l=e.dataset+"_norm_expression.xls";if("msSaveOrOpenBlob"in navigator)window.navigator.msSaveOrOpenBlob(s,l);else{var c=document.createElement("a");c.download=l,c.style.display="none",c.href=URL.createObjectURL(s),document.body.appendChild(c),c.click(),URL.revokeObjectURL(c.href),document.body.removeChild(c)}}t.fileDown.percentage=100,t.fileDown.loadDialogStatus="success"}))},downloadMetaInfo:function(){var e=this,t=this.dataset;e.fileDown2.percentage=0,S["a"].request({url:"public/getDatasetMetaInfo",data:{dataset:this.dataset},method:"post",contentType:"application/octet-stream",responseType:"blob",params:{},onDownloadProgress:function(t){if(t.lengthComputable){var a=Math.round(t.loaded/t.total*100);e.fileDown2.percentage=a>=99?99:a}}}).then((function(a){var n=new Blob([a.data],{type:"application/vnd.ms-excel"}),o=t+"_sample_metaInfo.xls";if("msSaveOrOpenBlob"in navigator)window.navigator.msSaveOrOpenBlob(n,o),e.fileDown.percentage=100,e.fileDown.loadDialogStatus="success";else{var i=document.createElement("a");i.download=o,i.style.display="none",i.href=URL.createObjectURL(n),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}e.fileDown2.percentage=100,e.fileDown2.loadDialogStatus="success"}))},mockTableData:function(e,t,a){var n=this;n.spinShowTypeSource=!0,Object(w["z"])(e,t,a).then((function(e){n.spinShowTypeSource=!1;var t=e.data;console.log("getSampleGroupPageDataset"),console.log(t),1==t.signal&&(n.sampleData=t.list,n.totalRow=t.total)}))},getImgURL:function(){this.dataset;return a("b967")("./"+this.dataset+".png")},getHref:function(){if("Fang's Lab"==this.source)return"http://sourcedb.big.cas.cn/zw/zjrc/yjy/201311/t20131116_3979427.html"},getSeriHref:function(){if(this.dataset.indexOf("GSE")>-1){if(this.dataset.indexOf("_")>-1){var e=this.dataset.split("_")[0];return"https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+e}return"https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+this.dataset}if(this.dataset.indexOf("PMID")>-1){e=this.dataset.split("PMID")[1];return"https://pubmed.ncbi.nlm.nih.gov/"+e}return this.dataset.indexOf("CRA")>-1?"https://ngdc.cncb.ac.cn/gsa/browse/"+this.dataset:"#"},getDatasetDetail:function(){var e=this,t=this;Object(C["f"])(this.$store.state.app.CurrentPageToken).then((function(a){var n=a.data;t.EryID=n.EryID,t.series=n.series,t.organism=n.organism;var o=n.growth_type[0].toUpperCase(),i=n.growth_type.slice(1),r=o+i;t.myCagrowth_type=r,t.growth_type=r,t.tissue=n.tissue,t.dataset_title=n.title,t.development_type=n.development_type,t.sample_numbers=n.sample_numbers,t.organization_name=n.organization_name,t.country=n.country,t.city=n.city,t.experiment_type=n.experiment_type,t.sequencing_type=n.sequencing_type,t.status=n.status,t.summary=n.summary;var s=n.samples,l="GSM   Sample Group<br/>";if(null!=s)for(var c=s.split(","),u=0;u<c.length;u++){var h=c[u].split(" ");h[0].indexOf("GSM")>-1&&(l=l+"<a href=https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+h[0]+">"+c[u]+"</a><br/>")}t.samples=l,t.data_processing=n.data_processing,t.normalization_method=n.normalization_method,t.overall_design=n.overall_design,t.samples_count=n.samples_count,t.submission_date=n.submission_date,t.contact_name=n.contact_name,t.e_mails=n.e_mails;var p=n.platforms,d="";if(null!=p)if(e.dataset.indexOf("GSE")>-1)if(p.indexOf(",")>-1){var m=p.split(",");for(u=0;u<m.length;u++){var g=m[u].split(" ");g[0].indexOf("GPL")>-1&&(d=d+"<a target=_blank href=https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+g[0]+">"+m[u]+"</a>&nbsp;&nbsp;")}}else{var f=p.split(" ");d=d+"<a target=_blank href=https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+f[0]+">"+p+"</a>"}else d=p;t.platforms=d;var _=n.subseries,v="";if(null===_)t.ifSub=!1;else{if(t.ifSub=!0,_.indexOf(",")>-1){var b=_.split(",");for(u=0;u<b.length;u++)v=v+"<a href=https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+b[u]+">"+b[u]+"</a><br/>"}else{var y=_;v="<a href=https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+y+">"+y+"</a>"}t.subseries=v}var C=n.citations,S="";if(null!=C)if(C.indexOf(",")>-1){var w=C.split(",");for(u=0;u<w.length;u++)S=S+"<a target=_blank href=https://pubmed.ncbi.nlm.nih.gov/"+w[u]+">"+w[u]+"</a>&nbsp;&nbsp;"}else{var x=C;S="<a target=_blank href=https://pubmed.ncbi.nlm.nih.gov/"+x+">"+x+"</a>"}t.citations=S;var k=n.contributors,P="";if(null!=k)if(k.indexOf(",")>-1){var D=k.split(",");for(u=0;u<D.length;u++)P=P+'<a href="https://www.ncbi.nlm.nih.gov/pubmed/?term='+D[u]+'[Author]">'+D[u]+"</a>&nbsp;&nbsp;"}else{var O=k;P='<a href="https://www.ncbi.nlm.nih.gov/pubmed/?term='+O+'[Author]">'+O+"</a>"}t.contributors=P;var T=n.series,E="";if(null!=T){var G=T.split(",");for(u=0;u<G.length;u++)E=E+"<a href=https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+G[u]+">"+G[u]+"</a>,"}t.experimental_materials=n.experimental_materials,t.laboratory_reagents=n.laboratory_reagents,t.sequencing_process=n.sequencing_process,t.reference=n.reference,t.href=n.href,t.sequencing_type=n.sequencing_type;null!=n.experiment_type&&"Expression profiling by array"==n.experiment_type&&(t.search_placeholder="Symbol, eg: A1BG,A1BG",t.searchMicName="mrna",t.tableType="expre",t.standardized_mode="normalized gene level expression values")})),Object(C["g"])(this.$store.state.app.CurrentPageToken).then((function(e){var a=e.data,n=a.sample,o=a.source;t.source=o;var i=a.gse,r=a.group,s="sid   sample group<br/>";if(null!=n)for(var l=0;l<n.length;l++)s=i[l].indexOf("SAMC")>-1?s+"<a href=https://bigd.big.ac.cn/gsa/s/sample/"+i[l]+"/brFIwkBd >"+i[l]+"</a> "+n[l]+"    "+r[l]+"<br/>":i[l].indexOf("GSM")>-1?s+"<a href=https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+i[l]+">"+i[l]+"</a> "+n[l]+"    "+r[l]+"<br/>":s+"<a>"+i[l]+"</a> "+n[l]+"    "+r[l]+"<br/>";t.samples=s}))},setsearch_placeholder:function(e){var t=this;t.search_placeholder="Enter "+e.split("-")[0]+" name...",t.search_datatype=e.split("-")[0]},setOthersearchItems:function(e){var t=this,a=e.split("-")[0],n=[];-1!=a.search("mRNA")&&n.push({name:"GeneCards",link:"http://www.genecards.org/cgi-bin/carddisp.pl?gene="+t.specif_name},{name:"NCBI",link:"https://www.ncbi.nlm.nih.gov/gene/?term=ENSG00000125148"},{name:"Ensembl",link:"http://www.ensembl.org/Homo_sapiens/Gene/Summary?g="+t.specif_name},{name:"OMIM",link:"https://omim.org/search/?search="+t.specif_name},{name:"COSMIC",link:"http://cancer.sanger.ac.uk/cosmic/gene/analysis?ln="+t.specif_name},{name:"DrugBank",link:"https://go.drugbank.com/unearth/q?searcher=bio_entities&query="+t.specif_name}),-1!=a.search("miRNA")&&n.push({name:"GeneCards",link:"http://www.genecards.org/cgi-bin/carddisp.pl?gene="+t.specif_name},{name:"NCBI",link:"https://www.ncbi.nlm.nih.gov/gene/?term=ENSG00000125148"},{name:"Ensembl",link:"http://www.ensembl.org/Homo_sapiens/Gene/Summary?g="+t.specif_name},{name:"OMIM",link:"https://omim.org/search/?search="+t.specif_name},{name:"COSMIC",link:"http://cancer.sanger.ac.uk/cosmic/gene/analysis?ln="+t.specif_name},{name:"DrugBank",link:"https://go.drugbank.com/unearth/q?searcher=bio_entities&query="+t.specif_name}),-1!=a.search("lncRNA")&&n.push({name:"GeneCards",link:"http://www.genecards.org/cgi-bin/carddisp.pl?gene="+t.specif_name},{name:"NCBI",link:"https://www.ncbi.nlm.nih.gov/gene/?term=ENSG00000125148"},{name:"Ensembl",link:"http://www.ensembl.org/Homo_sapiens/Gene/Summary?g="+t.specif_name},{name:"OMIM",link:"https://omim.org/search/?search="+t.specif_name},{name:"COSMIC",link:"http://cancer.sanger.ac.uk/cosmic/gene/analysis?ln="+t.specif_name},{name:"DrugBank",link:"https://go.drugbank.com/unearth/q?searcher=bio_entities&query="+t.specif_name}),t.othersearch_items=[],t.othersearch_items=n},drawSequenceEchartByTabletype:function(e){var t=this,a=this.$echarts.init(document.getElementById("expression_sequence"));Object(C["x"])(t.dataset,e).then((function(n){var o=n.data;t.spinShow2=!1;var i=o.axisData,r=o.data,s=r.map((function(e,t){return{source:t,target:t+1}}));s.pop();var l={title:{text:"The expression of "+e+" all samples during "+t.dataset,x:"center",y:"top",textAlign:"center"},tooltip:{},xAxis:{type:"category",boundaryGap:!1,data:i},yAxis:{type:"value"},series:[{type:"graph",layout:"none",coordinateSystem:"cartesian2d",symbolSize:40,label:{normal:{show:!0}},edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,10],data:r,links:s,lineStyle:{normal:{color:"#2f4554"}}}]};a.setOption(l)}))},getChartExpreRange:function(e){var t=this;Object(C["m"])(t.dataset,e).then((function(a){var n=a.data;t.spinShow3=!1,t.chartOptionsEL={chart:{type:"column"},title:{text:e+" expression levels"},subtitle:{text:"Data Souce:"+t.source},loading:{hideDuration:1e3,showDuration:1e3},xAxis:{categories:["0-5","5-10","10-20","20-30","30-40","40-50","50-60","60-70","70-80","80-90","90-100","100-1000",">1000"],title:{text:t.standardized_mode+" Range"},crosshair:!0},yAxis:{min:0,title:{text:"Sum"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},credits:{enabled:!1},plotOptions:{column:{borderWidth:0}},series:n,exporting:{}}}))},getchartOptionsAllStack:function(){var e=this;Object(C["a"])(e.dataset,e.sequencing_type).then((function(t){var a=t.data;e.spinShow1=!1,e.chartOptionsAllStack={chart:{type:"column"},title:{text:"The expression distribution of  all samples during the red line differentiation stage"},xAxis:{categories:a.categories},yAxis:{min:0,title:{text:"Total proportion"}},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',shared:!0},plotOptions:{column:{stacking:"percent"}},credits:{enabled:!1},series:a.series}}))},getTable2Columns:function(){var e=this,t=[];return e.tableColumnsChecked.forEach((function(e){return t.push({title:e,key:e,width:150,sortable:!0})})),t},changeTableColumns:function(){var e=this;e.all_sample_tableColumns=e.getTable2Columns()},handleCurrentChange:function(e,t){var a=this;this.currentPage=e,a.mockTableData(this.dataset,this.currentPage,this.pageSize)},handleSizeChange:function(e,t){var a=this;this.pageSize=e,a.mockTableData(this.dataset,this.currentPage,this.pageSize)},changedataType_getMicInfo:function(e){var t=this;t.setsearch_placeholder(e),t.setOthersearchItems(e)},changeExpreRange:function(e){var t=this;t.getChartExpreRange(e)}},mounted:function(){this.getDatasetDetail(),this.mockTableData(this.dataset,this.currentPage,this.pageSize)},watch:{$route:"getParams"}},P=k,D=(a("be2d"),Object(p["a"])(P,f,_,!1,null,null,null)),O=D.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout"},[a("div",{staticClass:"my_layout-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{id:"chart_choice"}},[a("div",{staticClass:"row_choice"},[a("span",{staticClass:"h4_title"},[e._v("Organism: ")]),a("RadioGroup",{staticClass:"myOption",on:{"on-change":function(t){return e.changeOrgaType(t)}},model:{value:e.Orga_val,callback:function(t){e.Orga_val=t},expression:"Orga_val"}},e._l(e.OrgaList,(function(t,n){return a("Radio",{key:n,staticClass:"myOption",staticStyle:{"font-style":"italic"},attrs:{label:t.value}},[a("span",{staticClass:"myOption"},[e._v(e._s(t.label))])])})),1)],1),a("div",{staticClass:"row_choice"},[a("span",{staticClass:"h4_title"},[e._v("Experiment type: ")]),a("RadioGroup",{staticClass:"myOption",on:{"on-change":function(t){return e.changeExperimentType(t)}},model:{value:e.DataType_val,callback:function(t){e.DataType_val=t},expression:"DataType_val"}},e._l(e.DataTypeList,(function(t,n){return a("Radio",{key:n,staticClass:"myOption",attrs:{label:t.value}},[a("span",{staticClass:"myOption"},[e._v(e._s(t.label))])])})),1)],1),a("div",{staticClass:"row_choice"},[a("span",{staticClass:"h4_title"},[e._v("Sequence type:  ")]),a("RadioGroup",{staticClass:"myOption",on:{"on-change":function(t){return e.changeSequnceType(t)}},model:{value:e.SequType_val,callback:function(t){e.SequType_val=t},expression:"SequType_val"}},e._l(e.typeList,(function(t,n){return a("Radio",{key:n,staticClass:"myOption",attrs:{label:t.value}},[a("span",{staticClass:"myOption"},[e._v(e._s(t.label))])])})),1)],1)]),a("div"),a("div",{staticClass:"row_choice"},[a("span",[e._v("*Tip: After reselecting the above options, analysis needs to be reselected as well.")]),a("Row",{staticStyle:{background:"#eee",padding:"20px"},attrs:{gutter:16}},[a("h3",{staticClass:"h3_title"},[e._v("Analysis:")])]),a("br"),e._l(e.analList,(function(t,n){return a("div",{key:n,staticClass:"anal_div",class:{myactive:e.currentAnalIndex===t.value},on:{click:function(a){return e.analClick(t)}}},[a("div",{on:{click:function(a){return e.changeDom(t.value)}}},[a("span",{staticClass:"servetitle"},[e._v(e._s(t.label))])])])}))],2),a("div",{staticClass:"layout-header"})]),a("div",{staticClass:"layout-content-main"},["all_Expression"==e.dom?a("All",{attrs:{"select-list":e.selectList}}):e._e(),"all_Clutser"==e.dom?a("AllClutser",{attrs:{"select-list":e.selectList}}):e._e(),"all_Diff"==e.dom?a("AllDiff",{attrs:{"select-list":e.selectList}}):e._e(),"all_Enrich"==e.dom?a("AllEnrich",{attrs:{"select-list":e.selectList}}):e._e(),"scPCA"==e.dom?a("ScPCA",{attrs:{"select-list":e.selectList}}):e._e(),"FeaturePlot"==e.dom?a("FeaturePlot",{attrs:{"select-list":e.selectList}}):e._e(),"Diffanal"==e.dom?a("Diffanal",{attrs:{"select-list":e.selectList}}):e._e(),"ClusterDiffTrajectory"==e.dom?a("ClusterDiffTrajectory",{attrs:{"select-list":e.selectList}}):e._e(),"ScInterraction"==e.dom?a("ScInterraction",{attrs:{"select-list":e.selectList}}):e._e(),"ScCommunication"==e.dom?a("ScCommunication",{attrs:{"select-list":e.selectList}}):e._e()],1),a("div",{staticClass:"row_choice"},[a("h3",{staticClass:"h3_title"},[e._v("Download： ")]),a("br"),a("Row",[a("Col",{attrs:{span:"8"}},[a("button",{staticClass:"my_button_download",on:{click:function(t){return e.downloadAtlasExpression()}}},[a("Icon",{attrs:{type:"ios-download-outline"}}),e._v(" Expression")],1),a("i-progress",{attrs:{percent:e.fileDown.percentage,status:e.fileDown.loadDialogStatus,width:"40"}})],1),a("Col",{attrs:{span:"8"}},[a("button",{staticClass:"my_button_download",on:{click:function(t){return e.downloadAtlasMetaInfo()}}},[a("Icon",{attrs:{type:"ios-download-outline"}}),e._v(" Meta information")],1),a("i-progress",{attrs:{percent:e.fileDown2.percentage,status:e.fileDown2.loadDialogStatus,width:"40"}})],1)],1)],1),a("br"),e.ifcellAnno?a("div",{staticClass:"row_choice"},[a("h3",{staticClass:"h3_title"},[e._v("Cell annotation information： ")]),a("br"),a("Row",[a("Table",{ref:"table",staticClass:"my-tableStyle",attrs:{columns:e.cellAnnoCols,data:e.cellAnnoData,size:"small","disabled-hover":"True"}})],1)],1):e._e(),a("div",{staticClass:"row_choice"},[a("h3",{staticClass:"h3_title"},[e._v("Samples ("+e._s(e.totalRow)+") and group:")]),a("br"),a("Table",{attrs:{stripe:"",type:!0,model:e.search,"v-model":e.search,data:e.sgroupData,columns:e.sgroupCols},on:{"update:model":function(t){e.search=t},"on-search":e.onSearch_Allsample}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.totalRow,current:e.currentPage,"page-size":e.pageSize,"show-total":"","show-sizer":""},on:{"on-change":e.handleCurrentChange,"on-page-size-change":e.handleSizeChange}})],1)])],1)])},E=[],G=a("ddd7"),z=a("e6ca"),B=a("2644"),M=a("2b3f"),A=a("4f76"),j=a("a81b"),R=a("fa49"),I=a("080f"),F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("br"),a("h1",{staticClass:"my_h1"},[e._v("Cell Cluster Marker Heatmap")]),a("br"),a("Row",{attrs:{gutter:16}},[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"8"}},[a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedShowGroup},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Add feature: "}},[a("i-select",{staticStyle:{width:"80%"},attrs:{"enter-button":"Search",placeholder:"Please input gene symbol",filterable:""},on:{"on-search":function(t){return e.addFeatureByName(t)},"on-change":function(t){return e.addFeatureByName(t)}},model:{value:e.InputKeyName,callback:function(t){e.InputKeyName=t},expression:"InputKeyName"}},e._l(e.keyWords_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"3"}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.reFeatureByName(t)}}},[e._v("Remove")])],1)],1)],1),a("Row",[a("div",[e.spinShow1?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{data:e.ClusterHotMapMarkerdata,layout:e.ClusterHotMapMarker_layout,options:e.ClusterHotMapMarker_option}})],1)])],1),a("div",[a("br"),a("h1",{staticClass:"my_h1"},[e._v("Cluster's Enrichment Analysis")]),a("br"),a("Row",{attrs:{gutter:16}},[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"10"}},[a("Form-item",{attrs:{label:"Enrichment cluster: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cluster group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedEnrichChart},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.group_type_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"10"}},[a("Form-item",{attrs:{label:"Enrichment type: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select Enrichment Type",filterable:""},on:{"on-change":e.changeEnrichType},model:{value:e.enrichType,callback:function(t){e.enrichType=t},expression:"enrichType"}},e._l(e.goTypeList,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",[a("div",[e.spinShow2?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{watchShallow:e.ifResize,autoResize:e.ifResize,data:e.enrich_data,layout:e.enrich_layout,options:e.enrich_option}})],1)])],1)])},L=[],N=a("43e0"),q=a.n(N),$={name:"sc_all_ClusterMarker",components:{VuePlotly:q.a},props:{selectList:{type:Array,default:function(){return[]}}},data:function(){return{keyWords_list:[],ifResize:!0,ClusterHotMapMarkerdata:[],enrich_data:[],enrichType:"CC",goTypeList:[{name:"GO-CC",value:"CC"},{name:"GO-MF",value:"MF"},{name:"GO-BP",value:"BP"},{name:"KEGG",value:"KEGG"}],ClusterHotMapMarker_option:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_cluster_image",scale:1}},ClusterMarkerBubbles_option:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_cluster_image",scale:1}},enrich_option:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_cluster_image",scale:1}},ClusterHotMapMarker_layout:{title:"Identity features for each cluster (Organism: "+this.orga_name+"; Group: "+this.source+")",xaxis:{title:"Cell cluster",tickmode:"array",automargin:!0,titlefont:{size:15}},yaxis:{title:"Feature name",tickmode:"array",automargin:!0,titlefont:{size:15}}},enrich_layout:{},spinShow2:"true",enrichShow:!1,spinShow1:"true",TSNE_data:[],TSNE_layout:{},contrasts_group:[],TSNE_options:{responsive:!0},showByGroup:"",series:this.$store.state.app.CurrentPageToken,data_source_list:[],source:"",source2:"",group_type_list:[],z_list:[],y_list:[],x_list:[],feature_list:[{name:"C1QC"},{name:"HIST1H4C"}]}},watch:{selectList:{handler:function(e){var t="all_"+e[0].orga+"_ep_"+e[0].sequnceType;this.table_name=t,t.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),t.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),"dr"==e[0].orga&&(this.orga_name="Danio rerio"),"hs"==e[0].orga&&(this.orga_name="Homo sapiens"),"mm"==e[0].orga&&(this.orga_name="Mus musculus")},immediate:!0}},methods:{getAllscFeature:function(e,t){var a=this;Object(w["a"])(e,t).then((function(e){var t=e.data.keywords;a.keyWords_list=t}))},addFeatureByName:function(e){var t=this,a=this;console.log("feature_name"),console.log(e),"undefined"==typeof this.source?this.$Message.info("Please select data source firstly",10):"undefined"==typeof e||null==e?this.$Message.info("Please input gene name ",10):(a.spinShow1=!0,Object(C["n"])(this.table_name,this.source,e,this.x_list).then((function(e){var n=e.data;if(console.log(n.col_list),0===n.col_list){var o;t.$Message.info("no data about this feature",10);var i=t.z_list,r=t.y_list,s=t.x_list,l=[{z:i,x:s,y:r,type:"heatmap",colorscale:"YlGnBu",textposition:"outside",cliponaxis:FALSE,hoverongaps:!1}],c=(o={title:"Identity features for each cluster",autosize:!1,xaxis:{title:"Cell cluster",tickmode:"array",automargin:!0,titlefont:{size:40}},yaxis:{title:"Feature name"}},Object(v["a"])(o,"title","Identity features for each cluster"),Object(v["a"])(o,"xaxis",{title:"Cell cluster",tickmode:"array",automargin:!0,titlefont:{size:15}}),Object(v["a"])(o,"yaxis",{title:"Feature name",tickmode:"array",automargin:!0,titlefont:{size:15}}),o);a.ClusterHotMapMarker_layout=c,t.ClusterHotMapMarkerdata=l,a.spinShow1=!1}else{t.z_list.push(n.col_list);i=t.z_list;t.y_list.push(n.feature_name);r=t.y_list,s=t.x_list,l=[{z:i,x:s,y:r,type:"heatmap",colorscale:"YlGnBu",hoverongaps:!1}],c={title:"Identity features for each cluster",xaxis:{title:"Cell cluster",tickmode:"array",automargin:!0,titlefont:{size:15}},yaxis:{title:"Feature name",tickmode:"array",automargin:!0,titlefont:{size:15}}};t.ClusterHotMapMarker_layout=c,t.ClusterHotMapMarkerdata=l,a.spinShow1=!1}})))},reFeatureByName:function(){console.log("feature_name");this.z_list.pop();var e=this.z_list;this.y_list.pop();var t=this.y_list,a=this.x_list;console.log(this.y_list),console.log(this.z_list);var n=[{z:e,x:a,y:t,type:"heatmap",colorscale:"YlGnBu",hoverongaps:!1}],o={title:"Identity features for each cluster",xaxis:{title:"Cell cluster",tickmode:"array",automargin:!0,titlefont:{size:15}},yaxis:{title:"Feature name",tickmode:"array",automargin:!0,titlefont:{size:15}}};this.ClusterHotMapMarker_layout=o,this.ClusterHotMapMarkerdata=n},changeEnrichType:function(e){this.enrichType=e,this.getEnrichChart()},changedEnrichChart:function(e){console.log(e),"undefined"===typeof e?this.group=e:(this.group=e,this.getEnrichChart(this.table_name,this.source,e))},getEnrichChart:function(){var e=this;this.enrichShow=!0,""==this.source2&&this.$Message.info("please select data source",10),""==this.group&&this.$Message.info("please select enrich group",10),this.spinShow2=!0,Object(C["d"])(this.table_name,this.source,this.group,this.enrichType).then((function(t){var a=t.data;console.log("===="),console.log(a.log_p_adjust),console.log(a.Description);var n=[{x:a.log_p_adjust,y:a.Description,type:"bar",orientation:"h"}],o={title:"Enrichment ("+e.enrichType+") of  (Organism: "+e.orga_name+"; Group: "+e.source+")",xaxis:{title:"-Log10(P value)",showgrid:!1,zeroline:!1},yaxis:{title:"Pathway term",showline:!1,tickmode:"array",automargin:!0,titlefont:{size:15}}};e.enrich_layout=o,e.enrich_data=n,e.spinShow2=!1}))},changedDataSource:function(e){this.source2=e,this.getEnrichGroup(this.table_name,e)},getEnrichGroup:function(e,t){var a=this;Object(C["c"])(e,t).then((function(e){console.log("enrich group");var t=e.data;console.log(t),a.group_type_list=[],a.group=t[0],t.forEach((function(e){return a.group_type_list.push({name:e})})),a.getEnrichChart()}))},pcaMeta:function(e,t){var a=this,n=this;Object(C["D"])(e,t).then((function(e){var t=e.data;console.log(t),n.colnames=t,a.group_type_list=[],t.forEach((function(e){return a.group_type_list.push({name:e})}))}))},changedShowGroup:function(e){if("undefined"===typeof e)this.source=e;else{this.source=e,this.source2=e,this.getMarkerChart(this.table_name,this.source),this.getEnrichGroup(this.table_name,this.source)}},changedMarkerChart:function(e){this.getMarkerChart(this.table_name,this.source)},getMarkerChart:function(e,t){var a=this,n=this;n.spinShow1=!0,Object(C["e"])(e,t).then((function(e){var o=e.data,i=o.d_res;a.z_list=o.d_res,a.y_list=o.col_list,a.x_list=o.group;var r=o.group,s=o.col_list,l=[{z:i,x:r,y:s,type:"heatmap",colorscale:"YlGnBu"}],c={title:"Identity features for each cluster (Organism: "+a.orga_name+"; Group: "+t+")",xaxis:{title:"Cell cluster",tickmode:"array",automargin:!0,titlefont:{size:15}},yaxis:{title:"Feature name",tickmode:"array",automargin:!0,titlefont:{size:15}}};a.ClusterHotMapMarker_layout=c,a.ClusterHotMapMarkerdata=l,n.spinShow1=!1}))},changedFeatureName:function(e){this.getFeaturePlot(this.table_name,e)},getFeatureByName:function(e){this.getFeaturePlot(this.table_name,this.source,e)},getDataSourceList:function(e){var t=this;Object(C["E"])(e).then((function(e){var a=t,n=e.data;console.log(n);var o=n;t.source=o[0].source_g,t.source2=o[0].source_g,n.forEach((function(e){console.log(e.source_g),a.data_source_list.push({name:e.source_g})})),t.getAllscFeature(t.table_name,o[0].source_g),t.getMarkerChart(t.table_name,o[0].source_g),t.getEnrichGroup(t.table_name,o[0].source_g)}))}},mounted:function(){this.getDataSourceList(this.table_name)}},V=$,H=(a("1378"),Object(p["a"])(V,F,L,!1,null,"dda2a088",null)),U=H.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lay_out"},[a("h1",{staticClass:"my_h1"},[e._v("Single Cell Cluster's Differential Analysis")]),a("br"),a("div",[a("Row",[a("Col",{attrs:{span:"16"}},[e.spinShow1?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{autoResize:e.ifResize,data:e.diff_data,layout:e.diff_layout,options:e.diff_options}})],1),a("Col",{attrs:{span:"8"}},[a("i-form",{attrs:{"label-width":120}},[a("Form-item",{attrs:{label:"Comparison cluster: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select cluster group",filterable:""},on:{"on-change":e.changedDiffChart},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.group_type_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"Absolute Fold Change: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select change fold"},on:{"on-change":e.changedFoldChange},model:{value:e.foldChange,callback:function(t){e.foldChange=t},expression:"foldChange"}},e._l(e.fold_change,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1),a("Form-item",{attrs:{label:"P value: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select change fold"},on:{"on-change":e.changedPvalue},model:{value:e.Pvalue,callback:function(t){e.Pvalue=t},expression:"Pvalue"}},e._l(e.PValue_change,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Br"),a("Row",[a("filter-table",{ref:"table",attrs:{id:"outExcel",columns:e.diffCols,data:e.diffData,size:"small"},on:{"on-search":e.onSearch_diff}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.totalRow,current:e.currentPage,"page-size":e.pageSize,"show-total":"","show-sizer":""},on:{"on-change":e.handleCurrentChange,"on-page-size-change":e.handleSizeChange}})],1)]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:e.exportExcel}},[a("Icon",{attrs:{type:"ios-download-outline"}}),e._v("Download")],1)],1)],1),a("br"),a("div",[a("h1",{staticClass:"my_h1"},[e._v("Single Cell Cluster's Enrichment Analysis")]),a("br"),a("Row",[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Comparison cluster: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select cluster group",filterable:""},on:{"on-change":e.changedDiffChart2},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.group_type_list2,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Enrichment type: "}},[a("i-select",{attrs:{model:e.enrichGroup,clearable:"",placeholder:"Pleace select Enrichment Type",filterable:""},on:{"update:model":function(t){e.enrichGroup=t},"on-change":e.changeEnrichType},model:{value:e.enrichType,callback:function(t){e.enrichType=t},expression:"enrichType"}},e._l(e.goTypeList,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",[e.spinShow2?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{autoResize:e.ifResize,data:e.enrichGO_data,layout:e.enrichGO_layout,options:e.enrichGO_options}})],1)],1)])},W=[],Y=a("53ca"),J=(a("5319"),a("376b")),Q={0:{value:">0.05",name:">0.05"},1:{value:"=<0.05",name:"=<0.05"}},X={name:"sc_all_Diffanal",components:{VuePlotly:q.a,FilterTable:G["a"]},props:{selectList:{type:Array,default:function(){return[]}}},data:function(){return{enrichGroup:"",goTypeList:[{name:"GO-CC",value:"CC"},{name:"GO-MF",value:"MF"},{name:"GO-BP",value:"BP"},{name:"KEGG",value:"KEGG"}],series:this.$store.state.app.CurrentPageToken,ifResize:!0,spinShow1:"true",spinShow2:"true",diff_data:[],foldChange:0,Pvalue:.05,fold_change:[{name:">=0",value:"0"},{name:">=0.5",value:"0.5"},{name:">=1",value:"1"},{name:">=1.5",value:"1.5"},{name:">=2",value:"2"},{name:">=2.5",value:"2.5"},{name:">=3",value:"3"}],PValue_change:[{name:"=<0.05",value:"0.05"},{name:"=<0.01",value:"0.01"},{name:"=<0.001",value:"0.05"},{name:"=<0.0001",value:"0.0001"},{name:"=<0.00001",value:"0.00001"}],diff_layout:{},contrasts_group:[],enrichGO_layout:{},data_source_list:[],source:"",source2:"",currentPage:1,pageSize:10,totalRow:400,diff_options:{responsive:!0},sourceGroup:"vivo",diffData:[],diffCols:[{title:"Symbol",key:"symbol",sortable:!0,filter:{type:"Input"},fixed:"left"},{title:"P.val",key:"p_val",sortable:!0},{title:"avgLogFC",key:"avg_logFC",sortable:!0},{title:"P.val.adj",key:"p_val_adj",sortable:!0,filter:{type:"Select",option:Q}}],group_type_list:[],group_type_list2:[],group:"",gorup2:"",enrichGO_data:[],enrichType:"CC",enrichGO_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_all_diff",scale:1}}}},watch:{selectList:{handler:function(e){var t="all_"+e[0].orga+"_ep_"+e[0].sequnceType;this.table_name=t,t.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),t.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),"dr"==e[0].orga&&(this.orga_name="Danio rerio"),"hs"==e[0].orga&&(this.orga_name="Homo sapiens"),"mm"==e[0].orga&&(this.orga_name="Mus musculus")},immediate:!0}},methods:{getDataSourceList:function(e){var t=this;Object(C["E"])(this.table_name).then((function(e){var a=t,n=e.data,o=n;t.source=o[0].source_g,t.source2=o[0].source_g,n.forEach((function(e){console.log(e.source_g),a.data_source_list.push({name:e.source_g})})),t.getContrastGroup(t.table_name,o[0].source_g),t.getContrastGroup2(t.table_name,o[0].source_g)}))},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},exportExcel:function(){var e=["Symbol","P.val","avgLogFC","P.val.adj"],t=["symbol","p_val","avg_logFC","p_val_adj"],a="diff-data";console.log("exportExcell"),console.log(this.diffData);var n=this.formatJson(t,this.diffData);console.log(n),Object(J["a"])({header:e,data:n,filename:a})},changedDiffChart:function(e){if(console.log(e),this.group=e,"undefined"===typeof e)this.group=e;else{this.group=e,this.getdiff_chart(this.table_name,e,this.foldChange,this.Pvalue);var t=this.table_name;this.mockTableData(t,this.currentPage,this.pageSize,e)}},changedDiffChart2:function(e){console.log(e),this.group2=e,this.getdiffEnrich_chart(this.table_name,e,this.enrichType)},changeEnrichType:function(e){this.enrichType=e,this.getdiffEnrich_chart(this.table_name,this.group2,e)},changedDataSource:function(e){this.source=e,this.getContrastGroup(this.table_name,e)},changedDataSource2:function(e){this.source2=e,this.getContrastGroup2(this.table_name,e)},getdiffEnrich_chart:function(e,t,a){var n=this,o=this;o.spinShow2=!0,Object(C["w"])(e,t,a).then((function(e){var a=e.data;console.log("enrich data "),console.log(a);var i=a.xData,r=a.yData,s=a.nData;a.tData;n.enrichGO_data=[];for(var l=0;l<i.length;l++){var c={x:i[l],y:r[l],name:s[l],type:"bar",orientation:"h"};n.enrichGO_data.push(c)}var u={title:"Enrichment ("+n.enrichType+") of "+t+" (Organism: "+n.orga_name+")",xaxis:{title:"-Log10(P value)"},yaxis:{title:{text:" Pathway term",position:"top",standoff:40,yanchor:"top"},automargin:!0,rangemode:"normal",dtick:1,exponentformat:function(e){return e.length>30?e.substring(0,30)+"...":e}},margin:{l:300}};n.enrichGO_layout=u,o.spinShow2=!1}))},getDiffContrastGroup:function(e){var t=this;Object(C["u"])(e).then((function(a){var n=t,o=a.data;console.log(o);n.group=o[0],n.group_type_list=[],o.forEach((function(e){return n.group_type_list.push({name:e})}));var i=e;t.getdiff_chart(t.table_name,t.group,t.foldChange,t.Pvalue),t.mockTableData(i,t.currentPage,t.pageSize,o[0])}))},getEnrichContrastGroup2:function(){var e=this;Object(C["v"])(this.table_name,this.source2).then((function(t){var a=t.data;console.log(a);e.group_type_list2=[],a.forEach((function(t){return e.group_type_list2.push({name:t})})),e.group2=a[0],e.getdiffEnrich_chart(e.table_name,a[0],e.enrichType)}))},onSearch_diff:function(e){var t=this,a=this;for(var n in e){var o=e[n];if("object"===Object(Y["a"])(o))return void this.$Message.info("Please check your input of  "+n,15);if(0===o.replace(/\s*/g,"").length.length)return this.$Message.info("Please check your input of  "+n,15),void this.load()}Object(w["C"])(this.table_name,e,a.currentPage,a.pageSize,this.group).then((function(e){a.spinShowTypeSource=!1;var n=e.data;console.log("searchDiffDatasetByParms"),console.log(n),1===n.signal?(a.diffData=n.list,a.totalRow=n.total):t.$Message.info("No related datasets",15)}))},getdiff_chart:function(e,t,a,n){var o=this,i=this;i.spinShow1=!0,Object(C["t"])(this.table_name,this.group,this.foldChange,this.Pvalue).then((function(e){var t=e.data;console.log(t);var a=[{x:t.no_signifcant.logFC,y:t.no_signifcant.adj_P_Val,mode:"markers",type:"scatter",name:"Not signifcant",text:t.no_signifcant.genes,marker:{size:4}},{x:t.signifcant.logFC,y:t.signifcant.adj_P_Val,mode:"markers",type:"scatter",name:"Signifcant",text:t.signifcant.genes,marker:{size:4}}];o.diff_data=a;var n={title:"Differential analysis of "+o.group+" (Organism: "+o.orga_name+")",subtitle:{text:"Data Souce:"+o.table_name},xaxis:{title:"Log2(FC)"},yaxis:{title:"-Log10(P value)"}};o.diff_layout=n,i.spinShow1=!1}))},changedContrGroup:function(e){this.getdiff_chart(this.series,e,this.foldChange,this.Pvalue);var t=this.table_name;this.mockTableData(t,this.currentPage,this.pageSize,e)},changedFoldChange:function(e){var t=this;t.foldChange=e,this.getdiff_chart(this.table_name,this.group,t.foldChange,this.Pvalue)},changedPvalue:function(e){var t=this;t.Pvalue=e,this.getdiff_chart(this.table_name,this.group,this.foldChange,t.Pvalue)},changedSourceGroup:function(e){this.table_name="all_rna_dev_bulk_"+e,this.sourceGroup=e},mockTableData:function(e,t,a,n){var o=this;o.spinShowTypeSource=!0,Object(w["v"])(e,t,a,n).then((function(e){o.spinShowTypeSource=!1;var t=e.data;console.log(t),1==t.signal&&(console.info(t.list),o.diffData=t.list,o.totalRow=t.total)}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.pageSize=e;var t=this.table_name;this.mockTableData(t,this.currentPage,this.pageSize,this.group)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e;var t=this.table_name;this.mockTableData(t,this.currentPage,this.pageSize,this.group)}},mounted:function(){this.getDataSourceList(this.table_name),this.getDiffContrastGroup(this.table_name),this.getEnrichContrastGroup2(this.table_name)}},Z=X,ee=(a("b7cd"),Object(p["a"])(Z,K,W,!1,null,null,null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("br"),a("h1",{staticClass:"my_h1"},[e._v("Pseudotime Trajectory")]),a("br"),a("Row",{attrs:{gutter:16}},[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"8"}},[a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedShowGroup2},model:{value:e.source2,callback:function(t){e.source2=t},expression:"source2"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",[e.spinShow2?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{data:e.pseudo_data,layout:e.pseudo_layout,options:e.pseudo_options}})],1)],1),a("div",[a("br"),a("h1",{staticClass:"my_h1"},[e._v("Differentiation Trajectory ")]),a("br"),a("Row",[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"8"}},[a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedShowGroup},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"8"}},[a("Form-item",{attrs:{label:"Color by: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedTraChart},model:{value:e.traCol,callback:function(t){e.traCol=t},expression:"traCol"}},e._l(e.group_type_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",[e.spinShow1?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{data:e.Tra_data,layout:e.Tra_layout,options:e.Tra_options}})],1)],1)])},ne=[],oe={name:"sc_all_ClusterDiffTrajectory",components:{VuePlotly:q.a},props:{selectList:{type:Array,default:function(){return[]}}},data:function(){return{spinShow1:"true",Tra_data:[],Tra_layout:{},contrasts_group:[],pseudo_data:[],pseudo_layout:{},pseudo_options:{responsive:!0},spinShow2:"true",Tra_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_all_Trajectory",scale:1}},showByGroup:"",series:this.$store.state.app.CurrentPageToken,source:"",source2:"",traCol:"",group_type_list:[{id:"0",name:"Original identity",value:"orig.ident"},{id:"1",name:"Cell type",value:"celltype"},{id:"2",name:"Phase",value:"Phase"}],data_source_list:[],colnames:[]}},watch:{selectList:{handler:function(e){var t="all_"+e[0].orga+"_ep_"+e[0].sequnceType;this.table_name=t,t.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),t.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),"dr"==e[0].orga&&(this.orga_name="Danio rerio"),"hs"==e[0].orga&&(this.orga_name="Homo sapiens"),"mm"==e[0].orga&&(this.orga_name="Mus musculus")},immediate:!0}},methods:{getTraChart:function(e,t,a){var n=this,o=this;o.spinShow1=!0,console.log(this.table_name),Object(C["A"])(e,t,a).then((function(e){var t=e.data;console.log(t);for(var a=t.xData,i=t.yData,r=t.gData,s=[],l=0;l<a.length;l++){var c={x:a[l],y:i[l],mode:"markers",type:"scatter",name:r[l],marker:{size:6}};s.push(c)}n.Tra_data=s;var u={title:"Differentiation trajectory  (Organism: "+n.orga_name+"; Group: "+n.source+")",xaxis:{title:"Component 1"},yaxis:{title:"Component 2"}};n.Tra_layout=u,o.spinShow1=!1}))},getTraCol:function(e,t){var a=this;Object(C["B"])(e,t).then((function(e){var t=e.data;console.log(t),a.colnames=t}))},getPseudoPlot:function(e,t){var a=this,n=this;n.spinShow2=!0,console.log(this.table_name),""!=t?Object(C["s"])(e,t).then((function(e){var t=e.data;console.log(t);var o=t;a.pseudo_data=o;var i={title:"Pseudotime trajectory (Organism: "+a.orga_name+"; Group: "+a.source+")",xaxis:{title:"Component 1"},yaxis:{title:"Component 2"},legend:{y:.5,yref:"paper",font:{family:"Arial, sans-serif",size:20,color:"grey"}}};a.pseudo_layout=i,n.spinShow2=!1})):this.$Message.info("please select data source",10)},changedShowGroup:function(e){this.source=e,this.getTraCol(this.table_name,e),this.getTraChart(this.table_name,this.source,this.traCol)},changedShowGroup2:function(e){this.source2=e,this.getPseudoPlot(this.table_name,e)},changedTraChart:function(e){console.log(e),this.traCol=e,this.getTraChart(this.table_name,this.source,e)},getDataSourceList:function(e){var t=this;Object(C["E"])(this.table_name).then((function(e){var a=t,n=e.data;console.log(n);var o=n;t.source=o[0].source_g,t.source2=o[0].source_g,n.forEach((function(e){console.log(e.source_g),a.data_source_list.push({name:e.source_g})})),t.getPseudoPlot(t.table_name,o[0].source_g),t.getTraCol(t.series,o[0].source_g),t.getTraChart(t.table_name,o[0].source_g,"celltype")}))}},mounted:function(){this.getDataSourceList(this.table_name)}},ie=oe,re=Object(p["a"])(ie,ae,ne,!1,null,null,null),se=re.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lay_out"},[a("Row",[a("h1",{staticClass:"my_h1"},[e._v("Single Cell Interaction Atlas")]),a("br"),a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"10"}},[a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{staticStyle:{width:"80%"},attrs:{placeholder:"Select cell source",clearable:"",filterable:""},on:{"on-change":e.changedSourceGroup},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"10"}},[a("Form-item",{attrs:{label:"Communication type: "}},[a("i-select",{attrs:{placeholder:"Select communication type",clearable:"",filterable:""},on:{"on-change":e.changedCommType},model:{value:e.comm_type,callback:function(t){e.comm_type=t},expression:"comm_type"}},e._l(e.comm_type_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)],1),a("br"),a("br")],1),a("br"),a("Row",[a("div",[a("div",{staticStyle:{width:"120%",height:"500%","text-aglign":"center"},attrs:{id:"Net_view"}})])]),a("br"),a("br")],1)},ce=[],ue=(a("99af"),{name:"all_ScInterraction",components:{VuePlotly:q.a},props:{selectList:{type:Array,default:function(){return[]}}},data:function(){var e;return e={dataset_name:this.$store.state.app.CurrentPageToken,comm_type:"",comm_type2:"",enrichGO_layout:{},enrichGO_options:{responsive:!0},contrasts_group:[],contrastsGroup:"",source:"",source2:"",contrGroupOfEnrich:"",GOformItem:{},spinShow2:"true",series:this.$store.state.app.CurrentPageToken,enrichGroup:""},Object(v["a"])(e,"contrasts_group",[]),Object(v["a"])(e,"enrichGroupList",[]),Object(v["a"])(e,"table_name","all_rna_dev_bulk_vivo"),Object(v["a"])(e,"data_source_list",[]),Object(v["a"])(e,"data_source_list2",[]),Object(v["a"])(e,"comm_type_list",[{name:"all"},{name:"growth factor"},{name:"other"},{name:"cytokine"},{name:"checkpoint"}]),e},watch:{selectList:{handler:function(e){var t="all_"+e[0].orga+"_ep_"+e[0].sequnceType;this.table_name=t,t.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),t.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),"dr"==e[0].orga&&(this.orga_name="Danio rerio"),"hs"==e[0].orga&&(this.orga_name="Homo sapiens"),"mm"==e[0].orga&&(this.orga_name="Mus musculus")},immediate:!0}},methods:{getDataSourceList:function(e){var t=this;Object(C["E"])(this.table_name).then((function(e){var a=t,n=e.data;console.log(n);var o=n;t.source=o[0].source_g,n.forEach((function(e){console.log(e.source_g),a.data_source_list.push({name:e.source_g}),a.data_source_list2.push({name:e.source_g})}));var i=t.table_name;t.comm_type="all",t.getNetView(i,t.source,"all")}))},getCellSource:function(){Object(z["g"])().then((function(e){for(var t=e.data.dev_types,a=0;a<t.length;a++);}))},getNetView:function(e,t,a){var n=this,o=this.$echarts.init(document.getElementById("Net_view"));o.showLoading(),Object(z["i"])(e,t,a).then((function(e){o.hideLoading();var t=e.data;console.log(t);for(var i=t.nodes,r=t.links,s=t.categories,l=[],c=[],u=0;u<s.length;u++){l[u]={name:s[u]};for(var h=[],p=0;p<i.length;p++)s[u]===i[p].category&&0===i[p].c_f&&h.push(i[p]);for(p=0;p<i.length;p++)s[u]===i[p].category&&1===i[p].c_f&&h.push(i[p]);console.log(h),c=c.concat(h)}console.log(c),c.forEach((function(e){e.id=e.id,e.value=e.symbolSize,e.symbolSize/=1.5,e.label={normal:{show:e.name}},e.category=e.category}));var d={title:{text:"Top 40 ligand-receptor of "+a+" (Organism: "+n.orga_name+"; Group: "+n.source+")",subtext:"Circular layout",top:"bottom",left:"left"},tooltip:{},legend:[{data:l.map((function(e){return e.name}))}],animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{name:"Top 40 "+a+" factor",type:"graph",layout:"circular",circular:{rotateLabel:!0},radius:"0",center:["80%","60%"],data:c,links:r,categories:l,roam:!0,label:{position:"right",formatter:"{b}"},edgeSymbol:["no","arrow"],edgeSymbolSize:[.4,10]}]};o.setOption(d)}))},getLRPlot_chart:function(e,t,a){var n=this.$echarts.init(document.getElementById("LRPlot_view"));n.showLoading(),alert(t),Object(z["i"])(e,t,a).then((function(e){n.hideLoading();var t=e.data;console.log(t);for(var o=t.nodes,i=t.links,r=t.categories,s=[],l=[],c=0;c<r.length;c++){s[c]={name:r[c]};for(var u=[],h=0;h<o.length;h++)r[c]===o[h].category&&0===o[h].c_f&&u.push(o[h]);for(h=0;h<o.length;h++)r[c]===o[h].category&&1===o[h].c_f&&u.push(o[h]);console.log(u),l=l.concat(u)}console.log(l),l.forEach((function(e){e.id=e.id,e.value=e.symbolSize,e.symbolSize/=1.5,e.label={normal:{show:e.name}},e.category=e.category}));var p={title:{text:"Top 40 "+a+" factor",subtext:"Circular layout",top:"bottom",left:"right"},tooltip:{},legend:[{data:s.map((function(e){return e.name}))}],animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{name:"Top 40 ligand-receptor of "+a,type:"graph",layout:"circular",circular:{rotateLabel:!0},data:l,links:i,categories:s,roam:!0,label:{position:"right",formatter:"{b}"},edgeSymbol:["no","arrow"],edgeSymbolSize:[.4,10]}]};n.setOption(p)}))},changedContrGroupOfEnrich:function(e){var t=[],a=this,n=e.split("-");n.forEach((function(e){return t.push({name:e})})),a.enrichGroupList=t,this.contrGroupOfEnrich=e},changeGoType:function(e){this.goType=e},changenrichType:function(e){this.enrichGroup=e},changedCommType:function(e){this.comm_type=e;var t=this.table_name;this.getNetView(t,this.source,e)},changedCommType2:function(e){this.comm_type2=e;var t=this.table_name;this.getLRPlot_chart(t,this.source,e)},changedSourceGroup:function(e){this.source=e,this.getNetView(this.table_name,e,this.comm_type)},changedSourceGroup2:function(e){this.source2=e}},mounted:function(){this.getDataSourceList(this.table_name);var e=document.getElementById("Net_view"),t=function(){e.style.height=.85*window.innerHeight+"px",e.style.width=.75*window.innerWidth+"px"};t();var a=this.$echarts.init(e),n={};a.setOption(n),window.onresize=function(){t(),console.log("=="),a.resize()}}}),he=ue,pe=(a("d32b"),Object(p["a"])(he,le,ce,!1,null,null,null)),de=pe.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lay_out"},[a("h1",{staticClass:"my_h1"},[e._v("Single Cell Communication Pattern")]),a("br"),a("div",[a("Row",[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{staticStyle:{width:"80%"},attrs:{placeholder:"Select cell source",clearable:"",filterable:""},on:{"on-change":e.changedSourceGroup},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Signal pattern: "}},[a("i-select",{attrs:{model:e.contrastsGroup,clearable:"",placeholder:"Please select signal pattern",filterable:""},on:{"update:model":function(t){e.contrastsGroup=t},"on-change":e.changedSigPattern},model:{value:e.sigPattern,callback:function(t){e.sigPattern=t},expression:"sigPattern"}},e._l(e.sigPattern_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",{attrs:{gutter:4}},[a("Col",{attrs:{span:"8"}},[a("highcharts",{staticClass:"river_container",attrs:{options:e.Cell_Chart_RiverCell}})],1),a("Col",{attrs:{span:"16"}},[a("div",[a("highcharts",{staticClass:"river_container",attrs:{options:e.Cell_Chart_RiverPath}})],1)])],1)],1),a("br"),a("br"),a("div",{staticClass:"pathway_info"},[a("br"),a("Row",[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"10"}},[a("Form-item",{attrs:{label:"Signal name: "}},[a("i-select",{attrs:{model:e.contrastsGroup,clearable:"",placeholder:"Please select signal name",filterable:""},on:{"update:model":function(t){e.contrastsGroup=t},"on-change":e.changedSigName},model:{value:e.siName,callback:function(t){e.siName=t},expression:"siName"}},e._l(e.sigName_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",[a("vue-plotly",{attrs:{watchShallow:e.ifResize,autoResize:e.ifResize,data:e.CellChartHotMap_data,layout:e.CellChartHotMap_layout,options:e.CellChartHotMap_options}})],1),a("br"),a("br"),a("Row",[a("div",[a("highcharts",{staticClass:"Rcontri_container",attrs:{options:e.Cell_Chart_Rcontri}})],1)])],1),a("br")])},ge=[],fe={name:"all_ScCommunication",components:{VuePlotly:q.a},props:{selectList:{type:Array,default:function(){return[]}}},data:function(){var e;return e={sigPattern_list:[{name:"incoming"},{name:"outgoing"}],sigName_list:[],sigPattern:"",data_source_list:[],Cell_Chart_RiverCell:{credits:{enabled:!1}},Cell_Chart_RiverPath:{credits:{enabled:!1}},Cell_Chart_Rcontri:{credits:{enabled:!1}},ifResize:!0,CellChartHotMap_layout:{},CellChartHotMap_data:[],CellChartHotMap_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_cellchart_hopMap",height:500,width:700,scale:1}},dataset_name:"erthy",comm_type:"all",enrichGO_layout:{},enrichGO_options:{responsive:!0},contrasts_group:[],contrastsGroup:"",source:"",contrGroupOfEnrich:"",GOformItem:{},spinShow2:"true",series:this.$store.state.app.CurrentPageToken,enrichGroup:""},Object(v["a"])(e,"contrasts_group",[]),Object(v["a"])(e,"enrichGroupList",[]),e},watch:{selectList:{handler:function(e){var t="all_"+e[0].orga+"_ep_"+e[0].sequnceType;this.table_name=t,t.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),t.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),"dr"==e[0].orga&&(this.orga_name="Danio rerio"),"hs"==e[0].orga&&(this.orga_name="Homo sapiens"),"mm"==e[0].orga&&(this.orga_name="Mus musculus")},immediate:!0}},methods:{getDataSourceList:function(e){var t=this;Object(C["E"])(e).then((function(a){var n=t,o=a.data;console.log(o);var i=o;t.source=i[0].source_g,o.forEach((function(e){var t=e.source_g;0!=t.indexOf("PBMC")&&(console.log(e.source_g),n.data_source_list.push({name:e.source_g}))}));var r="incoming";t.sigPattern=r,t.getCellChartView(i[0].source_g,r),t.getSigNameList(e,i[0].source_g)}))},getSigNameList:function(e,t){var a=this;this.sigName_list=[],Object(C["y"])(e,t).then((function(e){var t=e.data;console.log(t);t.forEach((function(e){return a.sigName_list.push({name:e.replace("TGFb","TGFβ")})})),a.getCellChartHotMap(a.table_name,a.source,t[0]),a.siName=a.sigName_list[0].name,a.getCellChartRcontri(a.table_name,a.source,t[0])}))},geteSigPathNet_chart:function(e,t,a){var n=this,o=this.$echarts.init(document.getElementById("eSigPathNet"));o.showLoading(),this.spinShow2=!0,Object(z["k"])(e,t,a).then((function(e){o.hideLoading();var i=e.data;console.log(i);for(var r=i.nodes,s=i.links,l=i.categories,c=[],u=[],h=0;h<l.length;h++){c[h]={name:l[h]};for(var p=[],d=0;d<r.length;d++)l[h]===r[d].category&&0===r[d].c_f&&p.push(r[d]);for(d=0;d<r.length;d++)l[h]===r[d].category&&1===r[d].c_f&&p.push(r[d]);console.log(p),u=u.concat(p)}console.log(u),u.forEach((function(e){e.id=e.id,e.value=e.symbolSize,e.symbolSize=e.symbolSize,e.label={normal:{show:e.name}},e.category=e.category}));var m={title:{text:a.replace("TGFb","TGFβ")+" signaling pathway (Organism: "+n.orga_name+"; Group: "+n.source+")",subtext:n.table_name+" "+t,top:"top"},tooltip:{},legend:[{data:c.map((function(e){return e.name})),top:"bottom"}],animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{name:"Les Miserables",type:"graph",layout:"circular",circular:{rotateLabel:!0},data:u,links:s,categories:c,roam:!0,label:{position:"right",formatter:"{b}"},edgeSymbol:["no","arrow"],edgeSymbolSize:[.4,10]}]};o.setOption(m)}))},getCellChartHotMap:function(e,t,a){var n=this;Object(C["j"])(e,t,a).then((function(e){var t=e.data;console.log("I am query"),console.log(t);var o=[{z:t.zData,x:t.xData,y:["Sender","Receiver","Mediator","Influencer"],type:"heatmap",hoverongaps:!1}],i={title:a.replace("TGFb","TGFβ")+" signaling pathway (Organism: "+n.orga_name+"; Group: "+n.source+")",xaxis:{title:"Cell type",tickmode:"array",automargin:!0,titlefont:{size:15}},yaxis:{title:"Signal role name",tickmode:"array",automargin:!0,titlefont:{size:15}}};n.CellChartHotMap_data=o,n.CellChartHotMap_layout=i}))},getCellChartView:function(e,t){var a=this,n=t;Object(z["f"])(this.table_name,e,n).then((function(e){console.log(e.data);var n=e.data,o={title:{text:"Communication ("+t+") patterns"},series:[{keys:["from","to","weight"],data:n.netSigCell,type:"sankey",name:"Sankey demo series"}]};a.Cell_Chart_RiverCell=o;var i={title:{text:"Communication ("+t+") signals (Organism: "+a.orga_name+"; Group: "+a.source+")"},series:[{keys:["from","to","weight"],data:n.netSigPath,type:"sankey",name:"Sankey demo series"}]};a.Cell_Chart_RiverPath=i}))},getCellChartRcontri:function(e,t,a){var n=this;Object(z["e"])(e,t,a).then((function(e){console.log(e.data);var t=e.data,o={chart:{type:"bar"},title:{text:"Contribution of each L-R pair  (Organism: "+n.orga_name+"; Group: "+n.source+")"},subtitle:{},xAxis:{categories:t.cate,title:{text:null}},yAxis:{min:0,title:{text:"",align:"high"},labels:{overflow:"justify"}},tooltip:{valueSuffix:" 百万"},plotOptions:{bar:{dataLabels:{enabled:!0,allowOverlap:!0}}},legend:{layout:"vertical",align:"left",verticalAlign:"bottom",x:0,y:1,floating:!0,borderWidth:1,shadow:!0},series:[{name:a.replace("TGFb","TGFβ")+" pathway ",data:t.seriData}]};n.Cell_Chart_Rcontri=o}))},changedContrGroupOfEnrich:function(e){var t=[],a=this,n=e.split("-");n.forEach((function(e){return t.push({name:e})})),a.enrichGroupList=t,this.contrGroupOfEnrich=e},changeGoType:function(e){this.goType=e},changenrichType:function(e){this.enrichGroup=e},getdiff_group:function(e){var t=this,a=[];getdiffGroup(e).then((function(e){var n=e.data;console.log(n),n.forEach((function(e){return a.push({name:e})})),t.contrasts_group=a,t.contrastsGroup=n[0],t.getLRPlot_chart(t.table_name,t.contrastsGroup)}))},changedSigPattern:function(e){this.sigPattern=e,this.getCellChartView(this.source,e)},changedSigName:function(e){this.siName=e,e.indexOf("TGFβ")>0&&e.replace("TGFβ","TGFb"),this.getCellChartHotMap(this.table_name,this.source,e),this.getCellChartRcontri(this.table_name,this.source,e)},changedSourceGroup:function(e){this.source=e,this.getSigNameList(this.table_name,this.source);var t="incoming";this.getCellChartView(e,t)}},mounted:function(){this.getDataSourceList(this.table_name);var e=document.getElementById("eSigPathNet"),t=function(){e.style.height=.85*window.innerHeight+"px",e.style.width=.75*window.innerWidth+"px"};t();var a=this.$echarts.init(e),n={};a.setOption(n),window.onresize=function(){t(),console.log("=="),a.resize()}}},_e=fe,ve=(a("d58f3"),Object(p["a"])(_e,me,ge,!1,null,null,null)),be=ve.exports,ye={0:{value:"1-10",name:"1-10"},1:{value:"10-20",name:"10-20"},2:{value:"20-30",name:"20-30"},3:{value:"30-50",name:"30-50"},4:{value:">50",name:">50"},5:{value:"all",name:"all"}},Ce=[{value:"BM_vitro",name:"Bone Marrow (in vitro)"},{value:"BM_vivo",name:"Bone Marrow (in vivo)"},{value:"CB_vivo",name:"Cord Blood (in vivo)"},{value:"CB_vitro",name:"Cord Blood (in vitro)"},{value:"PB_vitro",name:"Peripheral Blood (in vitro)"},{value:"FL_vitro",name:"Fetal Liver (in vitro)"},{value:"FL_vivo",name:"Fetal Liver (in vivo)"},{value:"PB_vivo",name:"Peripheral Blood (in vivo)"},{value:"iPSC_vitro",name:"Induced Pluripotent Stem Cells (in vitro)"},{value:"Em_vivo",name:"Embryos (in vivo)"}],Se={name:"ErythroidAtlas",components:{FilterTableForAllDateSet:B["a"],All:M["default"],AllClutser:A["default"],AllDiff:j["default"],AllEnrich:R["default"],ScPCA:I["default"],FeaturePlot:U,Diffanal:te,ClusterDiffTrajectory:se,ScInterraction:de,ScCommunication:be},data:function(){var e;return e={tAdatasetTypeSourceColumns:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"Dataset ID",key:"EryID",filter:{type:"Input"},fixed:"left",render:function(e,t){return t.row.dataset_id.indexOf("GSE")>-1?e("div",[e("a",{attrs:{href:"https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+t.row.dataset_id}},t.row.dataset_id)]):e("div",t.row.dataset_id)}},{title:"Species",key:"organism",filter:{type:"Input"},className:"table_Orga"},{title:"Development type",key:"source",filter:{type:"Input"},className:"table_Orga"},{title:"Title",key:"title",filter:{type:"Input"}},{title:"Omics Data Type",key:"experiment_type",filter:{type:"Input"}},{title:"Sequence type",key:"sequence_type",filter:{type:"Input"}},{title:"Sample number",key:"sample_number",filter:{type:"Select",option:ye}}],cellAnnoData:[],cellAnnoCols:[{title:"Cell type abbreviation",key:"refPaper_name",sortable:!0,filter:{type:"Input"}},{title:"Cell name full name",key:"full_cell_name",sortable:!0,width:400}],fileDown:{loadDialogStatus:!1,percentage:0,source:{}},fileDown2:{loadDialogStatus:!1,percentage:0,source:{}},ifcellAnno:!1,anal_value:"",Orga_val:"hs",DataType_val:"ep",SequType_val:"bulk",currentAnalIndex:"all_Expression",search:"",ifShow:!1,currentPage:1,currentPageTypeSource:1,pageSize:10,pageSizeTypeSource:10,totalTypeSource:400,datasetsTypeSource:[],samples_count:"",isShow:!0,spinShowTypeSource:!0,spanLeft:5,spanRight:19,DataTypeList:[{id:0,value:"ep",label:"Expression profiling"}],orga:"hs",exper:"ep",deve:"",OrgaList:[{id:0,value:"hs",label:"Homo sapiens"},{id:1,value:"mm",label:"Mus musculus"},{id:1,value:"dr",label:"Danio rerio"}],curentSequnceType:"bulk",typeList:[{id:0,value:"bulk",label:"Bulk"},{id:1,value:"sc",label:"Single cell"}],ifcompare:"",DevelopmentList:[{value:"vitro",label:"in vitro"},{value:"vivo",label:"in vivo"}],anlType:"",analList:[{label:"Expression Profile",value:"all_Expression"},{label:"Principal Component Analysis",value:"all_Clutser"},{label:"Differential Analysis",value:"all_Diff"},{label:"Enrichment Analysis",value:"all_Enrich"}],ifCompareList:[{value:"1",label:"YES"},{value:"0",label:"NO"}],source:[],cell_type:[]},Object(v["a"])(e,"currentPage",1),Object(v["a"])(e,"pageSize",10),Object(v["a"])(e,"totalRow",400),Object(v["a"])(e,"sgroupCols",[{title:"Dataset ID",filter:{type:"Input"},fixed:"left",width:140,render:function(e,t){return t.row.gid.indexOf("GSE")>-1?e("div",[e("a",{attrs:{href:"https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc="+t.row.gid,target:"_blank"}},t.row.gid)]):e("div",t.row.gid)}},{title:"Sample name",key:"sample_name",width:100,filter:{type:"Input"}},{title:"Organism",key:"organism",width:110,filter:{type:"Input"},className:"table_Orga"},{title:"Cell type",key:"cell_type",filter:{type:"Input"}},{title:"Tissue",width:120,key:"source_cell",filter:{type:"Input"},filterMethod:function(e,t){return t.address.indexOf(e)>-1}},{title:"Experiment type",width:120,key:"growth_mode",filter:{type:"Input"},className:"table_Orga"},{title:"Group",key:"group",filter:{type:"Input"}}]),Object(v["a"])(e,"sgroupData",[]),Object(v["a"])(e,"table_name","all_dataset_source_type"),Object(v["a"])(e,"selectList",[]),Object(v["a"])(e,"Datase2","0"),Object(v["a"])(e,"dom",""),Object(v["a"])(e,"value_anal",""),e},computed:{},methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])(["setCurrentPageToken"])),{},(n={mockScAnnoTableData:function(e){var t=this;Object(w["u"])(e).then((function(e){var a=e.data;t.cellAnnoData=a.list}))},analClick:function(e){this.currentAnalIndex=e.value},changeDom:function(e){var t=this;if(""!=this.orga)if(""!=this.exper)if(""!=this.curentSequnceType){var a="all_"+this.orga+"_ep_"+this.curentSequnceType;this.table_name=a,a.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),a.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),this.mockTableData(this.table_name,this.currentPage,this.pageSize);var n=[];n.push({orga:this.orga,exper:this.exper,deve:this.deve,sequnceType:this.curentSequnceType}),this.selectList=n,t.dom=e}else this.$Message.info("please select sequence type",10);else this.$Message.info("please select experiment type",10);else this.$Message.info("please select Organism",10)},mockTableDataTypeSource:function(){var e=this;e.spinShowTypeSource=!0,Object(w["j"])(e.table_name,e.currentPageTypeSource,e.pageSizeTypeSource).then((function(t){e.spinShowTypeSource=!1;var a=t.data;e.datasetsTypeSource=a.list,e.totalTypeSource=a.total}))},getAllDevType:function(e){var t=this,a=[];Object(z["c"])(e).then((function(e){var n=e.data;n.forEach((function(e){Ce.forEach((function(t){t.value==e&&a.push({value:e,label:t.name})}))})),t.SourceList=a}))},getRandom:function(e,t){return Math.round(Math.random()*(t-e)+e)},downloadAtlasExpression:function(){var e=this,t=this;if(t.fileDown.percentage=0,this.table_name.indexOf("GSE152982")>-1||this.table_name.indexOf("CRA002445")>-1||this.table_name.indexOf("all_hs_ep_sc")>-1){var a=this.table_name+".sce.rds";if(this.table_name.indexOf("GSE152982")>-1)a="all_dr_ep_sc.sce.rds";if(this.table_name.indexOf("CRA002445")>-1)a="all_mm_ep_sc.sce.rds";S["a"].request({url:"public/getDatasetExpression",data:{dataset:this.table_name},method:"post",contentType:"application/octet-stream",responseType:"blob",params:{},onDownloadProgress:function(e){if(e.lengthComputable){var a=Math.round(e.loaded/e.total*100);t.fileDown.percentage=a>=99?99:a}}}).then((function(t){t.data;var n=new Blob([t.data],{type:"application/octet-stream"});if("msSaveOrOpenBlob"in navigator)window.navigator.msSaveOrOpenBlob(n,a);else{var o=document.createElement("a");o.download=a,o.style.display="none",o.href=URL.createObjectURL(n),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o),e.fileDown.percentage=100,e.fileDown.loadDialogStatus="success"}}))}else S["a"].request({url:"public/getDatasetExpression",data:{dataset:this.table_name},method:"post",contentType:"application/octet-stream",responseType:"blob",params:{},onDownloadProgress:function(e){if(e.lengthComputable){var a=Math.round(e.loaded/e.total*100);t.fileDown.percentage=a>=99?99:a}}}).then((function(a){var n=new Blob([a.data],{type:"application/vnd.ms-excel"}),o=e.table_name+"_norm_expression.xls";if("msSaveOrOpenBlob"in navigator)window.navigator.msSaveOrOpenBlob(n,o);else{var i=document.createElement("a");i.download=o,i.style.display="none",i.href=URL.createObjectURL(n),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i),t.fileDown.percentage=100,t.fileDown.loadDialogStatus="success"}}))},downloadAtlasMetaInfo:function(){var e=this,t=this;t.fileDown2.percentage=0,S["a"].request({url:"public/getDatasetMetaInfo",data:{dataset:this.table_name},method:"post",contentType:"application/octet-stream",responseType:"blob",params:{},onDownloadProgress:function(e){if(e.lengthComputable){var a=Math.round(e.loaded/e.total*100);t.fileDown2.percentage=a>=99?99:a}}}).then((function(a){var n=new Blob([a.data],{type:"application/vnd.ms-excel"}),o=e.table_name+"_sample_metaInfo.xls";if(e.table_name.indexOf("GSE152982")>-1)o="all_dr_ep_sc_sample_metaInfo.xls";if(e.table_name.indexOf("CRA002445")>-1)o="all_mm_ep_sc_sample_metaInfo.xls";if("msSaveOrOpenBlob"in navigator)window.navigator.msSaveOrOpenBlob(n,o);else{var i=document.createElement("a");i.download=o,i.style.display="none",i.href=URL.createObjectURL(n),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i),t.fileDown2.percentage=100,t.fileDown2.loadDialogStatus="success"}}))},changePge:function(){mockTableData,this.mockTableData(this.table_name,this.currentPage,this.pageSize)},changeTableColumns:function(){this.tableColumns=this.getTable2Columns()},handleCurrentChange:function(e){this.currentPage=e,this.mockTableData(this.table_name,this.currentPage,this.pageSize)},handleCurrentChangeTypeSource:function(e){this.currentPage=e,this.mockTableDataTypeSource()},handleSizeChange:function(e){this.pageSize=e,this.mockTableData(this.table_name,this.currentPage,this.pageSize)},handleSizeChangeTypeSource:function(e){this.pageSizeTypeSource=e,this.mockTableDataTypeSource},mockTableData:function(e,t,a){var n=this;n.spinShowTypeSource=!0,Object(z["j"])(e,t,a).then((function(e){n.spinShowTypeSource=!1;var t=e.data;console.log(t),1==t.signal&&(n.sgroupData=t.list,n.totalRow=t.total)}))}},Object(v["a"])(n,"handleSizeChange",(function(e){this.pageSize=e,this.mockTableData(this.table_name,this.currentPage,this.pageSize)})),Object(v["a"])(n,"handleCurrentChange",(function(e){this.currentPage=e,this.mockTableData(this.table_name,this.currentPage,this.pageSize)})),Object(v["a"])(n,"toggleClick",(function(){this.isShow=!this.isShow})),Object(v["a"])(n,"changeOrgaType",(function(e){var t=this;if(t.fileDown.percentage=0,this.orga=e,this.currentAnalIndex="",""!=this.orga&""!=this.curentSequnceType){var a="all_"+this.orga+"_ep_"+this.curentSequnceType;this.table_name=a,a.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),a.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),this.mockTableData(this.table_name,this.currentPage,this.pageSize),this.curentSequnceType.indexOf("bulk")>-1?(this.analList=[{label:"Expression Profile",value:"all_Expression"},{label:"Principal Component Analysis",value:"all_Clutser"},{label:"Differential Analysis",value:"all_Diff"},{label:"Enrichment Analysis",value:"all_Enrich"}],this.ifcellAnno=!1):(this.analList=[{label:"Visualization & Feature",value:"scPCA"},{label:"Marker & Enrichment",value:"FeaturePlot"},{label:"Difference & Enrichment",value:"Diffanal"},{label:"Differentiation Trajectory",value:"ClusterDiffTrajectory"},{label:"Cell-Cell Interaction",value:"ScInterraction"},{label:"Cell-Cell Communication",value:"ScCommunication"}],this.ifcellAnno=!0,this.mockScAnnoTableData(this.table_name))}this.dom=""})),Object(v["a"])(n,"changeExperimentType",(function(e){var t=this;if(t.fileDown.percentage=0,this.exper=e,""!=this.orga&""!=this.curentSequnceType){var a="all_"+this.orga+"_ep_"+this.curentSequnceType;this.table_name=a,a.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),a.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),this.mockTableData(this.table_name,this.currentPage,this.pageSize)}})),Object(v["a"])(n,"changeSequnceType",(function(e){var t=this;if(t.curentSequnceType=e,t.fileDown.percentage=0,this.currentAnalIndex="",""!=this.orga&""!=t.curentSequnceType){var a="all_"+this.orga+"_ep_"+this.curentSequnceType;this.table_name=a,a.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),a.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),this.mockTableData(this.table_name,this.currentPage,this.pageSize),this.curentSequnceType.indexOf("bulk")>-1?(this.analList=[{label:"Expression Profile",value:"all_Expression"},{label:"Principal Component Analysis",value:"all_Clutser"},{label:"Differential Analysis",value:"all_Diff"},{label:"Enrichment Analysis",value:"all_Enrich"}],this.ifcellAnno=!1):(this.analList=[{label:"Visualization & Feature",value:"scPCA"},{label:"Marker & Enrichment",value:"FeaturePlot"},{label:"Difference & Enrichment",value:"Diffanal"},{label:"Differentiation Trajectory",value:"ClusterDiffTrajectory"},{label:"Cell-Cell Interaction",value:"ScInterraction"},{label:"Cell-Cell Communication",value:"ScCommunication"}],this.ifcellAnno=!0,this.mockScAnnoTableData(this.table_name))}this.dom=""})),Object(v["a"])(n,"if2compare",(function(e){this.ifcompare=e,this.analList="1"==e?[{label:"Expression Profile",value:"all_Expression"},{label:"Principal Component Analysis",value:"all_Clutser"}]:[{label:"Expression Profile",value:"all_Expression"},{label:"Principal Component Analysis",value:"all_Clutser"},{label:"Differential Analysis",value:"all_Diff"},{label:"Enrichment Analysis",value:"all_Enrich"},{label:"Visualization & Feature",value:"scPCA"},{label:"Marker & Enrichment",value:"FeaturePlot"}]})),Object(v["a"])(n,"changeDevelopmentType",(function(e){if(this.deve=e,""!=this.orga&""!=this.curentSequnceType){var t="all_"+this.orga+"_ep_"+this.curentSequnceType;this.table_name=t,t.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),t.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),this.mockTableData(this.table_name,this.currentPage,this.pageSize)}})),Object(v["a"])(n,"changeAnalType",(function(e){this.anlType=e})),Object(v["a"])(n,"getPlolyByParms",(function(){console.log(this.anlType);var e=[];if(""!=this.orga)if(""!=this.exper)if(""!=this.deve)if(""!=this.curentSequnceType){e.push({orga:this.orga,exper:this.exper,deve:this.deve,sequnceType:this.curentSequnceType});var t="all_"+this.orga+"_ep_"+this.curentSequnceType;this.table_name=t,t.indexOf("all_mm_ep_sc")>-1&&(this.table_name="CRA002445"),t.indexOf("all_dr_ep_sc")>-1&&(this.table_name="GSE152982"),this.mockTableData(this.table_name,this.currentPage,this.pageSize),this.selectList=e,""!=this.anlType?this.dom=this.anlType:this.$Message.info("please select Analysis type",10)}else this.$Message.info("please select sequence type",10);else this.$Message.info("please select development type",10);else this.$Message.info("please select experiment type",10);else this.$Message.info("please select Organism",10)})),n)),mounted:function(){this.anal_value="all_Expression",this.changeDom("all_Expression")},created:function(){}},we=Se,xe=(a("300f"),Object(p["a"])(we,T,E,!1,null,"791d2b2f",null)),ke=xe.exports,Pe=ke,De=(a("14d8"),t["a"]=[{path:"/",name:"_home",redirect:"/home",component:g,meta:{hideInMenu:!0,notCache:!0},children:[{path:"/home",name:"home",meta:{hideInMenu:!0,title:"Home",notCache:!0,icon:"md-home"},component:function(){return a.e("chunk-64f02f4e").then(a.bind(null,"87b8"))}},{path:"/Erythroid_Atlas",name:"Erythroid Atlas",meta:{title:"Erythroid Atlas"},component:Pe,children:[{path:"/all_Expression",name:"all_Expression",meta:{title:"Expression Profiling"},component:function(){return Promise.resolve().then(a.bind(null,"2b3f"))}},{path:"/all_Clutser",name:"all_Clutser",meta:{title:"Unsupervised Clustering"},component:function(){return Promise.resolve().then(a.bind(null,"4f76"))}},{path:"/all_Diff",name:"all_Diff",meta:{title:"Differential analysis"},component:function(){return Promise.resolve().then(a.bind(null,"a81b"))}},{path:"/all_Enrich",name:"all_Enrich",meta:{title:"Enrichment Analysis"},component:function(){return Promise.resolve().then(a.bind(null,"fa49"))}},{path:"/scPCA",name:"scPCA",meta:{title:"Single Cell Visualization"},component:function(){return Promise.resolve().then(a.bind(null,"080f"))}},{path:"/LRPlot",name:"LRPlot",meta:{title:"LRPlot"},component:function(){return a.e("chunk-e9c019d2").then(a.bind(null,"7d51"))}},{path:"/CellChat",name:"CellChat",meta:{title:"CellChat"},component:function(){return a.e("chunk-8b7d4c3a").then(a.bind(null,"8efd"))}}]},{path:"/help",name:"Help",meta:{title:"Help"},component:function(e){return a.e("chunk-12502414").then(function(){var t=[a("91d0")];e.apply(null,t)}.bind(this)).catch(a.oe)}},{path:"/about",name:"About",meta:{title:"About"},component:function(e){return a.e("chunk-16c4f9e9").then(function(){var t=[a("d3e6")];e.apply(null,t)}.bind(this)).catch(a.oe)}}]},{path:"/Search",name:"Search",redirect:"/main_sub",component:g,meta:{title:"Search"},children:[{path:"/main_sub",name:"main_sub",meta:{hideInMenu:!0,title:"main_sub"},component:function(){return Promise.resolve().then(a.bind(null,"14d8"))}}]},{path:"/Dataset-Service",name:"Dataset-Service",component:g,meta:{title:"Dataset Service"},children:[{path:"/Dataset_detai",name:"Dataset_detail",redirect:"/Dataset_service",meta:{hideInMenu:!0,title:"Dataset Detail"},component:O,children:[{path:"/Dataset_service",name:"Dataset_service",meta:{hideInMenu:!0,title:"Dataset Service"},component:function(){return Promise.resolve().then(a.bind(null,"4644"))}},{path:"/PCA",name:"Principal Component Analysis",meta:{title:"Principal Component Analysis"},component:function(){return Promise.resolve().then(a.bind(null,"4784"))}},{path:"/Diff_analysis",name:"Differential analysis",meta:{title:"Differential analysis"},component:function(){return Promise.resolve().then(a.bind(null,"924a"))}},{path:"/EnrichGO",name:"Enrichment Analysis",meta:{title:"Enrichment Analysis"},component:function(){return Promise.resolve().then(a.bind(null,"b001"))}},{path:"/PlotTSNE",name:"Single Cell PCA",meta:{title:"Single Cell PCA"},component:function(){return Promise.resolve().then(a.bind(null,"53b5"))}},{path:"/ClusterMarker",name:"Single Cell Cluster Marker ",meta:{title:"Single Cell Cluster Marker"},component:function(){return Promise.resolve().then(a.bind(null,"f39f"))}},{path:"/ClusterEnrichGO",name:"Single Cell Cluster EnrichGO",meta:{title:"Single Cell Cluster EnrichGO"},component:function(){return a.e("chunk-49d26aee").then(a.bind(null,"b088"))}},{path:"/ClusterDiffAnal",name:"Single Cell Cluster Differential Anlayze",meta:{title:"Single Cell Cluster Differential Anlayze"},component:function(){return Promise.resolve().then(a.bind(null,"b02c"))}},{path:"/ClusterDiffEnrichAnal",name:"Single Cell Cluster Differential Enrich Anlayze",meta:{title:"Single Cell Cluster Differential Enrich Anlayze"},component:function(){return a.e("chunk-f75d2cbc").then(a.bind(null,"bee0"))}},{path:"/ClusterDiffTrajectory",name:"Single Cell Cluster Differentiation Trajectory",meta:{title:"Single Cell Cluster Differentiation Trajectory"},component:function(){return Promise.resolve().then(a.bind(null,"e636"))}},{path:"/ScInterraction",name:"Single Cell Interraction",meta:{title:"Single Cell Interraction"},component:function(){return Promise.resolve().then(a.bind(null,"9072"))}},{path:"/ScCommunication",name:"Single Cell Communication",meta:{title:"Single Cell Communication"},component:function(){return Promise.resolve().then(a.bind(null,"a0ee"))}}]}]},{path:"/Eryth",name:"differentiation",redirect:"/Eryth_index",component:g,meta:{title:"Differentiation"},children:[{path:"/Eryth_index",name:"Eryth_index",meta:{hideInMenu:!0,title:"Erythropoiesis-index"},component:function(){return a.e("chunk-47b34872").then(a.bind(null,"544f"))}}]},{path:"/disease",name:"disease",redirect:"/Disease_index",component:g,meta:{title:"Diseases"},children:[{path:"/Disease_index",name:"Disease_index",meta:{hideInMenu:!0,title:"Disease-index"},component:function(){return a.e("chunk-2d0b2cda").then(a.bind(null,"2655"))}}]},{path:"/gene",name:"genes",redirect:"/gene_index",component:g,meta:{title:"Genes"},children:[{path:"/gene_index",name:"gene_index",meta:{hideInMenu:!0,title:"gene-index"},component:function(){return a.e("chunk-5b7d44c6").then(a.bind(null,"e057"))}}]},{path:"/molecules",name:"molecules",redirect:"/molecules_index",component:g,meta:{title:"Compounds"},children:[{path:"/molecules_index",name:"molecules_index",meta:{hideInMenu:!0,title:"molecules-index"},component:function(){return a.e("chunk-b455608e").then(a.bind(null,"7105"))}}]},{path:"/clustgram",name:"ClustGram",meta:{title:"ClustGram"},component:function(){return Promise.resolve().then(a.bind(null,"02f5"))}},{path:"/401",name:"error_401",meta:{hideInMenu:!0},component:function(){return a.e("chunk-c587d42c").then(a.bind(null,"f94f"))}},{path:"/500",name:"error_500",meta:{hideInMenu:!0},component:function(){return a.e("chunk-9098ce2e").then(a.bind(null,"88b2"))}},{path:"*",name:"error_404",meta:{hideInMenu:!0},component:function(){return a.e("chunk-3597c03e").then(a.bind(null,"35f5"))}}])},ddd7:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Table",{attrs:{border:"",data:e.filters,columns:e.tableColumnsFilters,stripe:""}}),a("Table",{attrs:{height:"500","show-header":!1,border:"",data:e.data,columns:e.columns,stripe:""}})],1)},o=[],i=a("5530"),r=(a("4de4"),a("d3b7"),a("ac1f"),a("841c"),a("a15b"),a("b0c0"),a("a18c")),s=(a("ddb9"),a("2f62")),l={name:"FilterTable",props:{columns:Array,data:Array},data:function(){return{filters:[{title:""}],tableColumnsFilters:[],search:{},dataset_id:""}},created:function(){var e=this,t=function(t){var a={};e.$set(a,"title",e.columns[t].title),e.columns[t].width&&e.$set(a,"width",e.columns[t].width);var n=function(e){};e.columns[t].filter&&(n=e.columns[t].filter.type&&"Select"===e.columns[t].filter.type?function(a){return a(e.columns[t].filter.type,{props:{placeholder:"Choose "+e.columns[t].title,value:0},on:{"on-change":function(a){return 0===a?(e.$delete(e.search,e.columns[t].key),void e.load()):0===a.split(" ").join("").length?(e.$Message.info("Please check your input",15),void e.load()):(e.$set(e.search,e.columns[t].key,a.split(" ").join("")),void e.load())}}},e.createOptionsRender(t,a))}:function(a){var n={};return a(e.columns[t].filter.type,{props:{placeholder:"Input "+e.columns[t].title,icon:"ios-search"},on:{input:function(a){n=a,n||e.validInputValue(t,n)},"on-click":function(){e.validInputValue(t,n)},"on-enter":function(){e.validInputValue(t,n)}}})}),e.$set(a,"render",n),e.tableColumnsFilters.push(a)};for(var a in this.columns)t(a)},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["setCurrentPageToken"])),{},{createOptionsRender:function(e,t){var a=[];if(this.columns[e].filter.option){var n=this.columns[e].filter.option;for(var o in n)a.push(t("Option",{props:{value:n[o].value}},n[o].name))}return a},load:function(){this.$emit("on-search",this.search),this.$emit("on-row-click",this.dataset_id)},validInputValue:function(e,t){if(!t)return this.$delete(this.search,this.columns[e].key),void this.load();this.$set(this.search,this.columns[e].key,t),this.load()},intoDataSet:function(e,t,a){this.setCurrentPageToken(e.dataset_id),r["a"].push({name:"Dataset_detail",params:{dataset:e.dataset_id}})}})},c=l,u=(a("9144"),a("2877")),h=Object(u["a"])(c,n,o,!1,null,"45119730",null);t["a"]=h.exports},de34:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",[a("div",{staticClass:"bigd-container headerStyle"},[a("nav",{staticClass:"bigd-navbar-default bigd-navbar"},[e._m(0),a("div",{staticClass:"bigd-collapse bigd-navbar-collapse",attrs:{id:"bigd-coll"}},[a("ul",{staticClass:"bigd-nav bigd-navbar-nav bigd-navbar-right"},[a("li",{on:{click:function(t){return e.openWindow("https://bigd.big.ac.cn/databases")}}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v(" Databases")])]),a("li",{on:{click:function(t){return e.openWindow("https://bigd.big.ac.cn/tools")}}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("Tools")])]),a("li",{on:{click:function(t){return e.openWindow("https://bigd.big.ac.cn/standards")}}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("Standards")])]),a("li",{on:{click:function(t){return e.openWindow("https://bigd.big.ac.cn/publications")}}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("Publications")])]),a("li",{on:{click:function(t){return e.openWindow("https://bigd.big.ac.cn/about")}}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("About")])])])])]),a("div",{staticClass:"header"},[e._m(1),a("div",{staticClass:"layout-nav"},e._l(e.values,(function(t,n){return a("ul",{key:n,staticClass:" menu  menu-dark menu-horizontal",on:{click:function(a){return e.cg_current_index(t)}}},[a("router-link",{attrs:{to:t.link}},[a("li",{staticClass:"menu-item",class:{bg_color:e.current_index===t.id}},[a("i",{staticClass:"icon icon-ios-navigate"}),a("Icon",{staticClass:"my_icon",attrs:{type:t.type}}),e._v(e._s(t.name)+" ")],1)])],1)})),0)])])])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bigd-navbar-header"},[a("button",{staticClass:"bigd-navbar-toggle bigd-collapsed",attrs:{type:"button"}},[a("span",{staticClass:"bigd-sr-only"},[e._v("Toggle navigation")]),a("span",{staticClass:"bigd-icon-bar"}),a("span",{staticClass:"bigd-icon-bar"}),a("span",{staticClass:"bigd-icon-bar"})]),a("a",{staticClass:"bigd-navbar-brand",attrs:{href:"https://bigd.big.ac.cn/"}},[a("img",{staticClass:"bigd-img-responsive",attrs:{src:"https://bigd.big.ac.cn/cdn/image/CNCB-NGDC-white.png"}})])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout-logo"},[n("img",{staticClass:"moudle_image_header ",attrs:{src:a("1ddc")}}),n("span",[e._v("EryDB v1.00: Erythroid Database")])])}],i={name:"Header",data:function(){return{values:[{id:0,name:"Home",link:"/",type:"ios-home"},{id:1,name:"Search",link:"/Search",type:"ios-search"},{id:2,name:"Erythroid Atlas",link:"/Erythroid_Atlas",type:"ios-analytics"},{id:3,name:"Help",link:"/help",type:"ios-paper"},{id:4,name:"About",link:"/about",type:"ios-navigate"}],current_index:0}},methods:{cg_current_index:function(e){this.current_index=e.id},openWindow:function(e){window.open(e)}}},r=i,s=(a("a278"),a("2877")),l=Object(s["a"])(r,n,o,!1,null,"4ec6722a",null);t["a"]=l.exports},e293:function(e,t,a){},e3ba:function(e,t,a){"use strict";a("806e")},e636:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("h1",{staticClass:"my_h1"},[e._v("Pseudotime Trajectory")]),a("br"),a("Row",{attrs:{gutter:16}},[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"8"}},[a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedShowGroup},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",[e.spinShow2?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{data:e.pseudo_data,layout:e.pseudo_layout,options:e.pseudo_options}})],1)],1),a("div",[a("h1",{staticClass:"my_h1"},[e._v("Differentiation Trajectory")]),a("br"),a("Row",[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"8"}},[a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedShowGroup2},model:{value:e.source2,callback:function(t){e.source2=t},expression:"source2"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"8"}},[a("Form-item",{attrs:{label:"Color by: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedTraChart},model:{value:e.traCol,callback:function(t){e.traCol=t},expression:"traCol"}},e._l(e.group_type_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",[e.spinShow1?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{data:e.Tra_data,layout:e.Tra_layout,options:e.Tra_options}})],1)],1)])},o=[],i=(a("d3b7"),a("159b"),a("43e0")),r=a.n(i),s=a("6c9c"),l={name:"ClusterDiffTrajectory",components:{VuePlotly:r.a},data:function(){return{spinShow1:"true",Tra_data:[],Tra_layout:{},contrasts_group:[],pseudo_data:[],pseudo_layout:{},pseudo_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_traPseu_image",height:500,width:700,scale:1}},spinShow2:"true",Tra_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_tra_image",height:500,width:700,scale:1}},showByGroup:"",series:this.$store.state.app.CurrentPageToken,source:"",source2:"",traCol:"celltype",group_type_list:[{id:"0",name:"Original identity",value:"orig.ident"},{id:"1",name:"Cell type",value:"celltype"},{id:"2",name:"Phase",value:"Phase"}],data_source_list:[],colnames:[]}},methods:{getTraChart:function(e,t,a){var n=this,o=this;o.spinShow1=!0,console.log(this.series),Object(s["A"])(e,t,a).then((function(e){var a=e.data;console.log(a);for(var i=a.xData,r=a.yData,s=a.gData,l=[],c=0;c<i.length;c++){var u={x:i[c],y:r[c],mode:"markers",type:"scatter",name:s[c],marker:{size:6}};l.push(u)}n.Tra_data=l;var h={title:"Differentiation trajectory ("+n.series+"; Group: "+t+")",xaxis:{title:"Component 1"},yaxis:{title:"Component 2"}};n.Tra_layout=h,o.spinShow1=!1}))},getTraCol:function(e,t){var a=this;Object(s["B"])(e,t).then((function(e){var t=e.data;console.log(t),a.colnames=t}))},getPseudoPlot:function(e,t){var a=this,n=this;n.spinShow2=!0,console.log(this.series),""!=t?Object(s["s"])(e,t).then((function(e){var o=e.data;console.log(o);var i=o;a.pseudo_data=i;var r={title:"Pseudotime trajectory ("+a.series+"; Group: "+t+")",xaxis:{title:"Component 1"},yaxis:{title:"Component 2"},legend:{y:.5,yref:"paper",font:{family:"Arial, sans-serif",size:20,color:"grey"}}};a.pseudo_layout=r,n.spinShow2=!1})):this.$Message.info("please select data source",10)},changedShowGroup:function(e){this.source=e,this.getPseudoPlot(this.series,e)},changedShowGroup2:function(e){this.source2=e,this.getTraCol(this.series,e),this.getTraChart(this.series,e,this.traCol)},changedTraChart:function(e){console.log(e),this.traCol=e,this.getTraChart(this.series,this.source,e)},getDataSourceList:function(e){var t=this;Object(s["E"])(this.series).then((function(e){var a=t,n=e.data;console.log(n);var o=n;t.source=o[0].source_g,t.source2=o[0].source_g,n.forEach((function(e){console.log(e.source_g),a.data_source_list.push({name:e.source_g})})),t.getPseudoPlot(t.series,o[0].source_g),t.getTraCol(t.series,o[0].source_g),t.traCol="celltype",t.getTraChart(t.series,o[0].source_g,"celltype")}))}},mounted:function(){this.getDataSourceList(this.series)}},c=l,u=a("2877"),h=Object(u["a"])(c,n,o,!1,null,null,null);t["default"]=h.exports},e6ca:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"h",(function(){return i})),a.d(t,"j",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"g",(function(){return h})),a.d(t,"f",(function(){return p})),a.d(t,"k",(function(){return d})),a.d(t,"e",(function(){return m}));var n=a("66df"),o=function(e,t,a){return n["a"].request({url:"public/getAllDevExpreBulkData",data:{source:e,gene_symbol:t,cell_source:a},method:"post"})},i=function(e,t,a){return n["a"].request({url:"public/getClusterDataAllDev",data:{selectList:e,group_by:t,source:a},method:"post"})},r=function(e,t,a){return n["a"].request({url:"public/getallDevSampleGroup",data:{table_name:e,pageIndex:t,pageSize:a},method:"post"})},s=function(e){return n["a"].request({url:"public/getAllDevType",data:{table_name:e},method:"post"})},l=function(e){return n["a"].request({url:"public/getAllDevGene",data:{table_name:e},method:"post"})},c=function(e,t){return n["a"].request({url:"public/getAllEnrichData",data:{table_name:e,contrastsGroup:t},method:"post"})},u=function(e,t,a){return n["a"].request({url:"public/getLRPlotData",data:{dataset_name:e,source:t,comm_type:a},method:"post"})},h=function(){return n["a"].request({url:"public/getCellSourceData",data:{},method:"post"})},p=function(e,t,a){return n["a"].request({url:"public/getCellChatSigData",data:{series:e,dev_type:t,sig_pattern:a},method:"post"})},d=function(e,t,a){return n["a"].request({url:"public/geteSigPathNetData",data:{series:e,dev_type:t,sig_pattern:a},method:"post"})},m=function(e,t,a){return n["a"].request({url:"public/getCellChartRcontri",data:{series:e,dev_type:t,sigName:a},method:"post"})}},e7c7:function(e,t,a){},ead9:function(e,t,a){e.exports=a.p+"img/help_scMarker.c8328f69.png"},ec80:function(e,t,a){e.exports=a.p+"img/subredcell_test.629e3a6e.png"},ecdb:function(e,t,a){},ef491:function(e,t,a){e.exports=a.p+"img/image-20220310215903098.7c0e53a1.png"},f093:function(e,t,a){e.exports=a.p+"img/help_homePage2.64ed5b1f.png"},f121:function(e,t,a){"use strict";t["a"]={title:"EryDB",useI18n:!1,baseUrl:{dev:"http://localhost:8090/EryDB/api",pro:"https://ngdc.cncb.ac.cn/EryDB/api"},homeName:"home"}},f1a7:function(e,t,a){e.exports=a.p+"img/help_about.04b94270.png"},f1fd:function(e,t,a){},f39f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("h1",{staticClass:"my_h1"},[e._v("Cell Cluster Marker Heatmap")]),a("br"),a("Row",{attrs:{gutter:16}},[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"8"}},[a("Form-item",{attrs:{label:"Group: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cell group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedShowGroup},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.data_source_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Add feature: "}},[a("i-select",{staticStyle:{width:"80%"},attrs:{"enter-button":"Search",placeholder:"Please input gene symbol",filterable:""},on:{"on-search":function(t){return e.addFeatureByName(t)},"on-change":function(t){return e.addFeatureByName(t)}},model:{value:e.InputKeyName,callback:function(t){e.InputKeyName=t},expression:"InputKeyName"}},e._l(e.keyWords_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"3"}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.reFeatureByName(t)}}},[e._v("Remove")])],1)],1)],1),a("Row",[a("div",[e.spinShow1?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{data:e.ClusterHotMapMarkerdata,layout:e.ClusterHotMapMarker_layout,options:e.ClusterHotMapMarker_option}})],1)])],1),a("div",[a("h1",{staticClass:"my_h1"},[e._v("Cluster's Enrichment Analysis")]),a("br"),a("Row",{attrs:{gutter:16}},[a("i-form",{attrs:{"label-width":120}},[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Enrichment cluster: "}},[a("i-select",{attrs:{model:e.showByGroup,clearable:"",placeholder:"Pleace select cluster group",filterable:""},on:{"update:model":function(t){e.showByGroup=t},"on-change":e.changedEnrichChart},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.group_type_list,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"Enrichment type: "}},[a("i-select",{attrs:{clearable:"",placeholder:"Pleace select Enrichment Type",filterable:""},on:{"on-change":e.changeEnrichType},model:{value:e.enrichType,callback:function(t){e.enrichType=t},expression:"enrichType"}},e._l(e.goTypeList,(function(t,n){return a("i-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Row",[a("div",[e.spinShow2?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{watchShallow:e.ifResize,autoResize:e.ifResize,data:e.enrich_data,layout:e.enrich_layout,options:e.enrich_option}})],1)])],1)])},o=[],i=a("ade3"),r=(a("d3b7"),a("159b"),a("43e0")),s=a.n(r),l=a("6c9c"),c=a("39b2"),u={name:"ClusterMarker",components:{VuePlotly:s.a},data:function(){var e;return{keyWords_list:[],ifResize:!0,ClusterHotMapMarkerdata:[],enrich_data:[],enrichType:"CC",goTypeList:[{name:"GO-CC",value:"CC"},{name:"GO-MF",value:"MF"},{name:"GO-BP",value:"BP"},{name:"KEGG",value:"KEGG"}],ClusterHotMapMarker_option:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_marker_image",height:500,width:700,scale:1}},enrich_option:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"sc_enrich_image",height:500,width:700,scale:1}},ClusterHotMapMarker_layout:{title:"Identity features for each cluster ("+this.series+"; Group: "+this.source+")",xaxis:(e={title:"Cell cluster",automargin:!0,titlefont:{size:15}},Object(i["a"])(e,"automargin",!0),Object(i["a"])(e,"gridcolor","rgb(243, 243, 243)"),Object(i["a"])(e,"gridwidth",1),Object(i["a"])(e,"rangemode","normal"),Object(i["a"])(e,"dtick",1),e),yaxis:{title:"Feature name",automargin:!0,rangemode:"normal",titlefont:{size:15},dtick:1}},enrich_layout:{},spinShow2:"true",enrichShow:!1,spinShow1:"true",TSNE_data:[],TSNE_layout:{},contrasts_group:[],TSNE_options:{responsive:!0},showByGroup:"",series:this.$store.state.app.CurrentPageToken,data_source_list:[],source:"",source2:"",group_type_list:[],z_list:[],y_list:[],x_list:[],feature_list:[{name:"C1QC"},{name:"HIST1H4C"}]}},methods:{getAllscFeature:function(e,t){var a=this;Object(c["a"])(e,t).then((function(e){var t=e.data.keywords;a.keyWords_list=t}))},addFeatureByName:function(e){var t=this,a=this;"undefined"==typeof this.source?this.$Message.info("Please select data source firstly",10):"undefined"==typeof e||null==e?this.$Message.info("Please input gene name ",10):(a.spinShow1=!0,Object(l["n"])(this.series,this.source,e,this.x_list).then((function(e){var n=e.data;if(console.log("getFeatureBygroup"),console.log(n.col_list),0===n.col_list){var o;t.$Message.info("no data about this feature",10);var r=t.z_list,s=t.y_list,l=t.x_list,c=[{z:r,x:l,y:s,type:"heatmap",colorscale:"YlGnBu",textposition:"outside",cliponaxis:FALSE,hoverongaps:!1}],u=(o={title:"Identity features for each cluster ("+t.series+"; Group: "+t.source+")",autosize:!1,xaxis:{title:"Cell cluster",tickmode:"array",automargin:!0,titlefont:{size:40}},yaxis:{title:"Feature name"}},Object(i["a"])(o,"title","Identity features for each cluster ("+t.series+"; Group: "+source+")"),Object(i["a"])(o,"xaxis",{title:"Cell cluster",tickmode:"array",automargin:!0,titlefont:{size:15}}),Object(i["a"])(o,"yaxis",{title:"Feature name",tickmode:"array",automargin:!0,titlefont:{size:15}}),o);a.ClusterHotMapMarker_layout=u,t.ClusterHotMapMarkerdata=c,a.spinShow1=!1}else{t.z_list.push(n.col_list);r=t.z_list;t.y_list.push(n.feature_name);s=t.y_list,l=t.x_list,c=[{z:r,x:l,y:s,type:"heatmap",colorscale:"YlGnBu",hoverongaps:!1}],u={title:"Identity features for each cluster ("+t.series+"; Group: "+t.source+")",xaxis:{title:"Cell cluster",tickmode:"array",automargin:!0,titlefont:{size:15}},yaxis:{title:"Feature name",tickmode:"array",automargin:!0,titlefont:{size:15}}};t.ClusterHotMapMarker_layout=u,t.ClusterHotMapMarkerdata=c,a.spinShow1=!1}})))},reFeatureByName:function(){this.z_list.pop();var e=this.z_list;this.y_list.pop();var t=this.y_list,a=this.x_list,n=[{z:e,x:a,y:t,type:"heatmap",colorscale:"YlGnBu",hoverongaps:!1}],o={title:"Identity features for each cluster ("+this.series+"; Group: "+this.source+")",xaxis:{title:"Cell cluster",tickmode:"array",automargin:!0,titlefont:{size:15}},yaxis:{title:"Feature name",tickmode:"array",automargin:!0,titlefont:{size:15}}};this.ClusterHotMapMarker_layout=o,this.ClusterHotMapMarkerdata=n},changeEnrichType:function(e){this.enrichType=e,this.getEnrichChart()},changedEnrichChart:function(e){"undefined"===typeof e?this.group=e:(this.group=e,this.getEnrichChart(this.series,this.source,e))},getEnrichChart:function(){var e=this;this.enrichShow=!0,""==this.source2&&this.$Message.info("please select data source",10),""==this.group&&this.$Message.info("please select enrich group",10),this.spinShow2=!0,Object(l["d"])(this.series,this.source,this.group,this.enrichType).then((function(t){var a=t.data,n=[{x:a.log_p_adjust,y:a.Description,type:"bar",orientation:"h"}],o={title:"Enrichment ("+e.enrichType+") of "+e.group+" ("+e.series+"; Group: "+e.source+")",xaxis:{title:"-Log10(P value)",showgrid:!1,zeroline:!1},yaxis:{title:" Pathway term",showline:!1,tickmode:"array",automargin:!0,titlefont:{size:15}}};e.enrich_layout=o,e.enrich_data=n,e.spinShow2=!1}))},getEnrichGroup:function(e,t){var a=this;Object(l["c"])(e,t).then((function(e){var t=e.data;a.group_type_list=[],a.group=t[0],t.forEach((function(e){return a.group_type_list.push({name:e})})),a.getEnrichChart()}))},pcaMeta:function(e,t){var a=this,n=this;Object(l["D"])(e,t).then((function(e){var t=e.data;n.colnames=t,a.group_type_list=[],t.forEach((function(e){return a.group_type_list.push({name:e})}))}))},changedShowGroup:function(e){if("undefined"===typeof e)this.source=e;else{this.source=e,this.source2=e,this.getAllscFeature(this.series,this.source),this.getMarkerChart(this.series,this.source),this.getEnrichGroup(this.series,this.source)}},changedMarkerChart:function(e){this.getMarkerChart(this.series,this.source)},getMarkerChart:function(e,t){var a=this,n=this;n.spinShow1=!0,Object(l["e"])(e,t).then((function(e){var o=e.data,i=o.d_res;a.z_list=o.d_res,a.y_list=o.col_list,a.x_list=o.group;var r=o.group,s=o.col_list,l=[{z:i,x:r,y:s,type:"heatmap",colorscale:"YlGnBu"}],c={title:"Identity features for each cluster ("+a.series+"; Group: "+t+")",xaxis:{title:"Cell cluster",tickmode:"array",automargin:!0,titlefont:{size:15}},yaxis:{title:"Feature name",tickmode:"array",automargin:!0,titlefont:{size:15}}};a.ClusterHotMapMarker_layout=c,a.ClusterHotMapMarkerdata=l,n.spinShow1=!1}))},changedFeatureName:function(e){this.getFeaturePlot(this.series,e)},getFeatureByName:function(e){this.getFeaturePlot(this.series,this.source,e)},getDataSourceList:function(e){var t=this;Object(l["E"])(this.series).then((function(e){var a=t,n=e.data,o=n;t.source=o[0].source_g,t.source2=o[0].source_g,n.forEach((function(e){a.data_source_list.push({name:e.source_g})})),a.group_type_list.push({name:"all"}),t.getAllscFeature(t.series,o[0].source_g),t.getMarkerChart(t.series,o[0].source_g),t.getEnrichGroup(t.series,o[0].source_g)}))}},mounted:function(){this.getDataSourceList(this.series)}},h=u,p=(a("33cf"),a("2877")),d=Object(p["a"])(h,n,o,!1,null,"5d1df5ad",null);t["default"]=d.exports},f3ce:function(e,t,a){e.exports=a.p+"img/help_scCommu.a48f4037.png"},f8e0:function(e,t,a){e.exports=a.p+"img/help_eryAtlaSample.c80414ef.png"},fa49:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lay_out"},[a("h1",{staticClass:"my_h1"},[e._v("Enrichment Analysis (Organism: "+e._s(e.orga_name)+") ")]),a("Br"),a("div",[a("Row",{attrs:{gutter:4}},[a("Col",{attrs:{span:"10"}},[a("i-select",{attrs:{model:e.contrastsGroup,clearable:"",placeholder:"Pleace select contrasts group",filterable:""},on:{"update:model":function(t){e.contrastsGroup=t},"on-change":e.changedContrGroup},model:{value:e.contrastsGroup,callback:function(t){e.contrastsGroup=t},expression:"contrastsGroup"}},e._l(e.contrasts_group,(function(t,n){return a("i-option",{key:n,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),a("Col",{attrs:{span:"12"}},[a("div",{staticStyle:{"margin-left":"4px"}},[a("span",[e._v(" e.g, late_basoE_CB_vitro-orthoE_CB_vitro means the late_basoE_CB_vitro group versus the orthoE_CB_vitro group ")])])])],1),a("Br"),a("Row",[a("div",[e.spinShow2?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("vue-plotly",{attrs:{autoResize:e.ifResize,data:e.enrichGO_data,layout:e.enrichGO_layout,options:e.enrichGO_options}})],1)])],1)],1)},o=[],i=(a("d3b7"),a("159b"),a("6c9c")),r=a("e6ca"),s=a("43e0"),l=a.n(s),c={name:"all_Enrich",components:{VuePlotly:l.a},props:{selectList:{type:Array,default:function(){return[]}}},data:function(){return{orga_name:"",ifResize:!0,enrichGO_data:[],enrichGO_layout:{},enrichGO_options:{responsive:!0,displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"all_pca",height:500,width:700,scale:1}},contrasts_group:[],contrastsGroup:"",sourceGroup:"vivo",contrGroupOfEnrich:"",GOformItem:{},spinShow2:"true",series:this.$store.state.app.CurrentPageToken,enrichGroup:"",enrichGroupList:[],table_name:"all_rna_dev_bulk_vivo",source_group:[{name:"vivo"},{name:"vitro"},{name:"vivo-vitro"}]}},watch:{selectList:{handler:function(e){var t="all_"+e[0].orga+"_ep_"+e[0].sequnceType;this.table_name=t,this.getdiff_group(this.table_name),this.getdiff_group(this.table_name),"hs"==e[0].orga&&(this.orga_name="Homo sapiens"),"mm"==e[0].orga&&(this.orga_name="Mus musculus"),"dr"==e[0].orga&&(this.orga_name="Danio rerio")},immediate:!0}},methods:{getenrich_chart:function(e,t){var a=this;this.spinShow2=!0,Object(r["d"])(e,t).then((function(e){var t=e.data,n=t.xData,o=t.yData,i=t.nData;t.tData;a.enrichGO_data=[];for(var r=0;r<n.length;r++){var s={x:n[r],y:o[r],name:i[r],type:"bar",orientation:"h"};a.enrichGO_data.push(s)}var l={title:"GO enrichment of "+a.contrastsGroup,bargap:.25,xaxis:{title:"-Log10(P value)"},yaxis:{title:{text:"Pathway term",position:"top",standoff:40,yanchor:"top"},automargin:!0,rangemode:"normal",dtick:1,exponentformat:function(e){return e.length>30?e.substring(0,30)+"...":e}},margin:{l:650}};a.enrichGO_layout=l})),this.spinShow2=!1},changedContrGroupOfEnrich:function(e){var t=[],a=this,n=e.split("-");n.forEach((function(e){return t.push({name:e})})),a.enrichGroupList=t,this.contrGroupOfEnrich=e},changeGoType:function(e){this.goType=e},changenrichType:function(e){this.enrichGroup=e},getdiff_group:function(e){var t=this,a=[];Object(i["F"])(e).then((function(e){var n=e.data;n.forEach((function(e){return a.push({name:e})})),t.contrasts_group=a,t.contrastsGroup=n[0],t.getenrich_chart(t.table_name,t.contrastsGroup)}))},changedContrGroup:function(e){this.contrastsGroup=e,this.getenrich_chart(this.table_name,this.contrastsGroup)}},mounted:function(){this.getdiff_group(this.table_name)}},u=c,h=(a("cb0f"),a("2877")),p=Object(h["a"])(u,n,o,!1,null,null,null);t["default"]=p.exports},fa8d:function(e,t,a){e.exports=a.p+"img/help_datasetSample.42db9601.png"},fd4a:function(e,t,a){e.exports=a.p+"img/help_datasetOtherInfo.8b80f5a0.png"}});